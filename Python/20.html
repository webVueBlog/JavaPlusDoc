<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第20天-访问数据库 | Jeskson-微服务分布式</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Jeskson文档-架构师">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/JavaPlusDoc/assets/css/0.styles.69a89f58.css" as="style"><link rel="preload" href="/JavaPlusDoc/assets/js/app.ff4b1912.js" as="script"><link rel="preload" href="/JavaPlusDoc/assets/js/7.dfc0397a.js" as="script"><link rel="preload" href="/JavaPlusDoc/assets/js/2.cfbace72.js" as="script"><link rel="preload" href="/JavaPlusDoc/assets/js/1.d59a348b.js" as="script"><link rel="preload" href="/JavaPlusDoc/assets/js/137.7afd61da.js" as="script"><link rel="prefetch" href="/JavaPlusDoc/assets/js/10.8af913bb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/100.2c53fcbd.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/101.8ccd9f40.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/102.6abe231e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/103.0e437ead.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/104.d915d7e5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/105.5d55ab62.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/106.07d5a34b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/107.513f25ac.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/108.7cda8012.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/109.b70451e6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/11.7e3aeb50.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/110.b8dbdfb8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/111.71acaa8b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/112.ca35903a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/113.2db92a40.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/114.6e775813.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/115.d4fcd4df.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/116.5fbd9309.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/117.67d2a408.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/118.458ec435.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/119.044db67a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/120.433d403c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/121.4a247941.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/122.edf76321.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/123.24f157cc.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/124.8d2eafc2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/125.9fcad17b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/126.ea0c1e50.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/127.eb6e5a6c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/128.c37745dd.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/129.d42e1da1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/130.1f940759.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/131.f048f51b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/132.f2e05b7b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/133.1025c747.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/134.e986b5c6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/135.ee67ecb2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/136.51486790.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/138.a9b7f1d5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/139.b0abdadb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/140.928f8b9d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/141.75ac97ba.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/142.e4a40851.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/143.abb68380.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/144.4a31149b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/145.4a204821.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/146.df6efac7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/147.35f39f6d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/148.8f687af8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/149.75598127.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/15.ab64ce54.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/150.7c950dfa.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/151.1a568fbd.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/152.39d4b618.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/153.f7912ca4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/154.a7e8c404.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/155.11719bb5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/156.b0f61c27.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/157.78f0d5ec.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/158.96bd7aa7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/159.c826f336.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/16.5859debf.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/160.79fcd999.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/161.6e041a18.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/162.c1dd8613.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/163.ab44d65f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/164.55f30c4b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/165.1945cc91.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/166.7ce08c0a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/167.39902e9e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/168.0a015885.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/169.68d1a118.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/17.f3af3709.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/170.284bccfc.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/171.8abc7f27.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/172.1fda5d51.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/173.bb2d4d2b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/174.b34f63a3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/175.28b93c68.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/176.7c670e26.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/177.5163bae9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/178.51467a77.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/179.9738c734.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/18.7387f7e6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/180.ec8da569.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/181.321020b2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/182.eaa16e7a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/183.fd9bacb6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/184.987ef50e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/185.65f18305.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/186.ece5c753.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/187.b0e4a1ac.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/188.5ac430dd.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/189.e5a35218.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/19.f4fea483.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/190.0d633d69.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/191.cb84e758.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/192.5696bda6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/193.c152ca1b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/194.58104929.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/195.f5268146.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/196.09b66f73.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/197.ac23f446.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/198.261200a2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/199.724aa135.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/20.070d4a3f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/200.2fc8b0b5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/201.8d7b1f57.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/202.b803e840.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/203.2eff0b6c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/204.d5a4c7c6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/205.88bbae92.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/206.cd68581c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/207.85c260ec.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/208.fd085d80.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/209.d2453e08.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/21.78933f38.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/210.116334ba.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/211.345d1772.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/212.1a27f8c9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/213.59877e34.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/214.6480dee2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/215.70ae1d89.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/216.09ca4312.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/217.af7bdf8c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/218.02a40cca.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/219.f484832f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/22.4753ae4d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/220.6ba39f2b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/221.d585a6e3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/222.557543ae.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/223.5140b6e5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/224.eaa0e691.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/225.356a94a3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/226.fc10b75b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/227.9af00c34.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/228.4dc3c41b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/229.d11b02a5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/23.5ad2a326.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/230.519fdeb6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/231.680b752e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/232.1adf38e1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/233.fcc3e8cc.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/234.7295f17c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/235.860622cd.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/236.07a1c33e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/237.8b3b18c5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/238.02b07b10.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/239.4b1eaae1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/24.d8ef76cb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/240.7a378249.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/241.50826979.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/242.a827cb6e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/243.02ee6149.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/244.95a1f931.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/245.839cc4a8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/246.a8298108.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/247.17c29ff6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/248.076346b6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/249.a5694c3b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/25.56c87efe.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/250.db53d9fa.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/251.e5678920.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/252.4a97a73b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/253.fab94cc6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/254.f6fe60a9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/255.5c90176f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/256.51b253fa.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/257.7545eceb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/258.d30ea980.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/259.19f6dd5e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/26.e137a506.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/260.b45fa309.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/261.b82f3b68.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/262.66dbb3e0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/263.1bd0b88a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/264.e2d16987.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/265.a999dac8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/266.0e3ffc82.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/267.31bcc9c4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/268.21cadd7e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/269.6d41a49b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/27.8fd1e34f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/270.cdc34c03.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/271.14d67f07.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/272.6b7ef511.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/273.29143d7e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/274.98c8d414.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/275.fcbb9b74.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/276.57d87a0b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/277.f32479eb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/278.6c8f70ff.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/279.ee430fb0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/28.ec80e187.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/280.6482b349.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/281.a146cd78.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/282.859de97e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/283.c15404e4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/284.01dad2ca.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/285.619be44a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/286.d242787c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/287.c87ab04d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/288.e030d44a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/289.59a5a660.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/29.a2b39230.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/290.eab48a51.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/291.1f4b1e47.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/292.a13c9a99.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/293.b4eb7ce5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/294.d4abf953.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/295.8daf6058.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/296.368c24d4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/297.3f74b182.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/298.6988474c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/299.dfad3465.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/3.40e3acc6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/30.9a11650a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/300.17321217.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/301.d9a1826e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/302.09a7987d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/303.5025013f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/304.d4b8a3d1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/305.159772d2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/306.24c63e31.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/307.e6a6d270.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/308.4e507498.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/309.aee111c8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/31.874f8153.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/310.5f1b5ca1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/311.34ae5cb3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/312.c43ea236.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/313.b847ec00.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/314.d64f5684.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/315.7d106bd1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/316.867e71e0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/317.494bb25c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/318.b855401a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/319.6ac2e09f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/32.ee0b114a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/320.5c40f84e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/321.f2cf33ad.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/322.3fa8fc56.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/323.8a4d04ec.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/324.8105e17f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/325.2550dcad.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/326.c3ff61c8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/327.3a7ecc7c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/328.fed3b915.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/329.827908ae.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/33.cd82de30.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/330.937816d2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/331.c852bfdf.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/332.c505b6c7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/333.bef6e033.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/334.08a55ffe.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/335.6b268219.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/336.82d3fb2a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/337.39956547.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/338.6136640d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/339.81f5ad5b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/34.9c90a2a7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/340.48782f66.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/341.d47516d3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/342.4436bb4a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/343.908c9bd3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/344.697ee8bd.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/345.ab9f1f75.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/346.076fd1c5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/347.3be42a59.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/348.97ba33db.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/349.3c07d100.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/35.d8543719.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/350.ec1bc3db.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/351.9d3153e4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/352.e71317f4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/353.261cb101.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/354.f3e47221.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/355.b307a3ed.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/356.b38d86c2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/357.d1d9dc9d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/358.a03fc094.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/359.6b15776d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/36.ca9f16ca.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/360.bb0c54dd.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/361.35cefb19.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/362.56d3b2f7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/363.86a26ed2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/364.94d338d5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/365.07637682.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/366.575090a7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/367.a24af406.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/368.84aaad95.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/369.878f8b2f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/37.21403d6a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/370.dd867f9d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/371.dd80e718.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/372.c7b54b81.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/373.e2554640.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/374.b9b710d2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/375.c9ad50e0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/376.9b86837b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/377.05760818.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/378.12ec82d0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/379.173b0296.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/38.bc6b1c3c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/380.d0bdf0e1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/381.79d7a925.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/382.2c726e6e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/383.c3692568.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/384.7d008b7d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/385.08ce6856.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/386.12bb7596.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/387.4ee785b3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/388.ebe74e39.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/389.05b70f9b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/39.8a7f24eb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/390.bdcfda98.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/391.5f2295e0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/392.8e12903a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/393.c553ee9b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/394.142fba6a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/395.2330c45a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/396.a7c9d0aa.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/397.e8412077.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/398.464f44c4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/399.aaa72c53.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/4.8b5d3c01.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/40.98ac2f84.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/400.154963b8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/401.894a8c6f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/402.8f683588.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/403.b8dbd9cb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/404.fc97c865.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/405.398fff13.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/406.ada3f6c6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/407.46666ee3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/408.39295bc5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/409.00710db4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/41.b36c815d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/410.0cb22004.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/411.e5923416.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/412.f58d3da9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/413.0f6f7f8b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/414.015eb6b2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/415.b155b195.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/416.3244bedb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/417.26b9b844.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/418.37dd3bda.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/419.4a64bc57.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/42.8c4dfaf7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/420.15ff5f8b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/421.988f32c6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/422.75528a99.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/423.366db802.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/424.508f7b6c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/425.6f763bb5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/426.659742ea.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/427.8b3d75d8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/428.2f29aadb.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/429.2f28db07.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/43.815d0502.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/430.abf10612.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/431.9e64562c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/432.99f2f904.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/433.6296d93e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/434.f7904247.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/435.98715d2d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/436.9fefac84.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/437.fea151e9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/438.7191b005.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/439.f3ccd045.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/44.ba19f402.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/440.2de0c08c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/441.8e3cb7b2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/442.b93b4817.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/443.39c48a3a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/444.1655e664.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/445.97e47e06.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/446.d2adebf8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/447.4be86ce4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/448.0b587761.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/449.ddf18f4c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/45.4182ef1e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/450.28fa53ca.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/451.ef5b2bd0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/452.e121c917.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/453.c8132e49.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/454.2432fab6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/455.34584ef6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/456.9903968f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/457.63aa6849.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/458.0b9d9b23.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/459.9f021166.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/46.2a154851.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/460.a629ff70.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/461.d75e8448.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/462.552a8aef.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/463.ec331fd1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/464.1890b541.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/465.2a0bd1b9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/466.610de9f1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/467.2d46b708.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/468.04a56bcc.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/469.7d6a224c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/47.9b096bd4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/470.da81c67e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/471.e592f995.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/472.bc085169.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/473.0cb79355.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/474.7f396d93.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/475.e2adea36.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/476.8b82e0ff.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/477.8bd4fa06.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/478.3fa4b579.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/479.6029394b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/48.fff8acb7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/480.1eb05b6f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/481.18496764.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/482.11a56dce.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/483.285ea6df.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/484.b15c921d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/485.53d859c3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/486.4680c312.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/487.2376b70e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/488.bd4ff8a8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/489.7c19b407.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/49.510ceb1b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/490.5c95e6f9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/491.c22e75d5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/492.e7342ffc.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/493.7e251855.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/494.b4a9a5ea.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/495.36fc9e68.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/496.7616b0ef.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/497.a627b99d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/498.e6ec30be.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/499.9f8c621b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/5.dd2e9586.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/50.1c015ec1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/500.e4f04fa7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/501.23e805ce.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/502.c7707c65.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/503.3f577d77.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/504.5fd17fd2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/505.0e03be2a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/506.e87bada7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/507.2b245401.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/508.87b73a39.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/509.cc69075a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/51.fa0d4ce8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/510.6490c5fe.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/511.be7a1d82.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/512.c680c2c9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/513.36b29e3e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/514.d3ae3a27.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/515.cdb5681f.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/516.469418ff.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/517.24928bff.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/518.6a26365b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/519.59e59dea.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/52.03c9ff54.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/520.23673bd1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/521.a5806db8.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/522.73be9af3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/523.0e7e4925.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/524.327700e3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/525.c768492d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/526.febcc9d9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/527.dd5fd0b5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/528.7e1d4ec5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/529.8bdce1a4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/53.7e80043a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/530.44e010d9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/531.f67a86b7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/532.09b7ead5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/533.7adabdfa.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/534.f868f74a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/535.c98d4c0e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/536.370ce042.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/537.753a8af1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/538.d017f77d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/539.a133376e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/54.f7955daf.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/540.f4dbc9d0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/55.686f3985.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/56.cb0430ac.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/57.eb834e65.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/58.bf089253.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/59.14efcce4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/6.bab6d49b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/60.eaf6e3a4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/61.3bbdc790.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/62.38f6d5ec.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/63.02f1b305.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/64.1722673d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/65.6547e007.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/66.4e8931dc.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/67.cfca24ed.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/68.8add83f1.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/69.1693fd1e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/70.179cc187.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/71.313fbab6.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/72.0e0d03ef.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/73.9b65b544.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/74.b4c4befd.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/75.f2ffd04c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/76.d8a485ae.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/77.df0cc69e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/78.63985859.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/79.1b530da0.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/8.482e3594.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/80.48deda5a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/81.26d7dd05.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/82.526c2b16.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/83.a00c4a7e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/84.f55a4b6a.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/85.62ab46e7.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/86.82d619c9.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/87.e726803b.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/88.a864fe77.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/89.dee71f5d.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/9.cb5e384c.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/90.f1aadb95.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/91.94144a2e.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/92.72d39ce5.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/93.b68bfc16.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/94.8957be11.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/95.eb9d19f3.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/96.093d0db2.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/97.5ba97253.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/98.6bf338d4.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/99.ba035d72.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/vendors~docsearch.0b3f4b62.js"><link rel="prefetch" href="/JavaPlusDoc/assets/js/vendors~flowchart.2a4bfc54.js">
    <link rel="stylesheet" href="/JavaPlusDoc/assets/css/0.styles.69a89f58.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Jeskson-微服务分布式</h3> <p class="description" data-v-59e6cb88>Jeskson文档-架构师</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/JavaPlusDoc/" class="home-link router-link-active"><!----> <span class="site-name">Jeskson-微服务分布式</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/JavaPlusDoc/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      学习路线
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/" class="nav-link"><i class="undefined"></i>
  入门指南
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/basic-grammar/basic-data-type.html" class="nav-link"><i class="undefined"></i>
  基础到进阶
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/high-concurrency/why-cache.html" class="nav-link"><i class="undefined"></i>
  架构师成长
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      刷题练习
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/" class="nav-link"><i class="undefined"></i>
  🎯 题库首页
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/topics/" class="nav-link"><i class="undefined"></i>
  📚 专题练习
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/written-exam/" class="nav-link"><i class="undefined"></i>
  📝 笔试真题
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/interview/" class="nav-link"><i class="undefined"></i>
  💼 面试真题
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/contest/" class="nav-link"><i class="undefined"></i>
  🏆 竞赛题库
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/statistics/" class="nav-link"><i class="undefined"></i>
  📊 刷题统计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      技术分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/basic-grammar/basic-data-type.html" class="nav-link"><i class="undefined"></i>
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/java-up/nginx.html" class="nav-link"><i class="undefined"></i>
  Java进阶
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/go/" class="nav-link"><i class="undefined"></i>
  GO语言技术
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/iot/" class="nav-link"><i class="undefined"></i>
  物联网架构
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/high-concurrency/why-cache.html" class="nav-link"><i class="undefined"></i>
  分布式架构
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/worker/1.html" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/mysql/mysql.html" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/sql/" class="nav-link"><i class="undefined"></i>
  SQL专属手册
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/linux/linux.html" class="nav-link"><i class="undefined"></i>
  运维与部署
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/docker/docker-tutorial.html" class="nav-link"><i class="undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/uniapp/充电宝小程序实现.html" class="nav-link"><i class="undefined"></i>
  UniApp小程序
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/products/" class="nav-link"><i class="undefined"></i>
  产品系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      实战案例
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/worker/1.html" class="nav-link"><i class="undefined"></i>
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/high-concurrency/why-cache.html" class="nav-link"><i class="undefined"></i>
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/java-up/nginx.html" class="nav-link"><i class="undefined"></i>
  项目实践
</a></li><li class="dropdown-item"><!----> <a href="https://1024bibi.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  📝 简历制作工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      资源
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://webvueblog.github.io/JavaPlusDoc/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/webVueBlog/JavaPlusDoc" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/webVueBlog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  作者主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/wechat-contact-demo.html" class="nav-link"><i class="undefined"></i>
  微信联系
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>496</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>22</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/JavaPlusDoc/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      学习路线
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/" class="nav-link"><i class="undefined"></i>
  入门指南
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/basic-grammar/basic-data-type.html" class="nav-link"><i class="undefined"></i>
  基础到进阶
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/high-concurrency/why-cache.html" class="nav-link"><i class="undefined"></i>
  架构师成长
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      刷题练习
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/" class="nav-link"><i class="undefined"></i>
  🎯 题库首页
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/topics/" class="nav-link"><i class="undefined"></i>
  📚 专题练习
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/written-exam/" class="nav-link"><i class="undefined"></i>
  📝 笔试真题
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/interview/" class="nav-link"><i class="undefined"></i>
  💼 面试真题
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/contest/" class="nav-link"><i class="undefined"></i>
  🏆 竞赛题库
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/coding-practice/statistics/" class="nav-link"><i class="undefined"></i>
  📊 刷题统计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      技术分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/basic-grammar/basic-data-type.html" class="nav-link"><i class="undefined"></i>
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/java-up/nginx.html" class="nav-link"><i class="undefined"></i>
  Java进阶
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/go/" class="nav-link"><i class="undefined"></i>
  GO语言技术
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/iot/" class="nav-link"><i class="undefined"></i>
  物联网架构
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/high-concurrency/why-cache.html" class="nav-link"><i class="undefined"></i>
  分布式架构
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/worker/1.html" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/mysql/mysql.html" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/sql/" class="nav-link"><i class="undefined"></i>
  SQL专属手册
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/linux/linux.html" class="nav-link"><i class="undefined"></i>
  运维与部署
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/docker/docker-tutorial.html" class="nav-link"><i class="undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/uniapp/充电宝小程序实现.html" class="nav-link"><i class="undefined"></i>
  UniApp小程序
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/products/" class="nav-link"><i class="undefined"></i>
  产品系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      实战案例
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/worker/1.html" class="nav-link"><i class="undefined"></i>
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/high-concurrency/why-cache.html" class="nav-link"><i class="undefined"></i>
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/java-up/nginx.html" class="nav-link"><i class="undefined"></i>
  项目实践
</a></li><li class="dropdown-item"><!----> <a href="https://1024bibi.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  📝 简历制作工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      资源
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://webvueblog.github.io/JavaPlusDoc/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/webVueBlog/JavaPlusDoc" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/webVueBlog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  作者主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/JavaPlusDoc/wechat-contact-demo.html" class="nav-link"><i class="undefined"></i>
  微信联系
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/JavaPlusDoc/" class="sidebar-heading clickable router-link-active open"><span>文档指南</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/" aria-current="page" class="sidebar-link">学前必读</a></li><li><a href="/JavaPlusDoc/encrypted-article.html" class="sidebar-link">加密文章示例</a></li><li><a href="/JavaPlusDoc/plugin-demo.html" class="sidebar-link">插件功能演示</a></li><li><a href="/JavaPlusDoc/share-demo.html" class="sidebar-link">社交分享功能演示</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>后端专属笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>达达JAVA基础问答</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/basic/1.html" class="sidebar-link">第1天-第一个程序</a></li><li><a href="/JavaPlusDoc/basic/2.html" class="sidebar-link">第2天-基础语法</a></li><li><a href="/JavaPlusDoc/basic/3.html" class="sidebar-link">第3天-基本概念</a></li><li><a href="/JavaPlusDoc/basic/4.html" class="sidebar-link">第4天-基本数据类型</a></li><li><a href="/JavaPlusDoc/basic/5.html" class="sidebar-link">第5天-变量的声明实例</a></li><li><a href="/JavaPlusDoc/basic/6.html" class="sidebar-link">第6天-变量命名规则</a></li><li><a href="/JavaPlusDoc/basic/7.html" class="sidebar-link">第7天-修饰符</a></li><li><a href="/JavaPlusDoc/basic/8.html" class="sidebar-link">第8天-运算符</a></li><li><a href="/JavaPlusDoc/basic/9.html" class="sidebar-link">第9天-循环结构</a></li><li><a href="/JavaPlusDoc/basic/10.html" class="sidebar-link">第10天-条件语句</a></li><li><a href="/JavaPlusDoc/basic/11.html" class="sidebar-link">第11天-switch-case</a></li><li><a href="/JavaPlusDoc/basic/12.html" class="sidebar-link">第12天-Number-Math类</a></li><li><a href="/JavaPlusDoc/basic/13.html" class="sidebar-link">第13天-Character</a></li><li><a href="/JavaPlusDoc/basic/14.html" class="sidebar-link">第14天-String</a></li><li><a href="/JavaPlusDoc/basic/15.html" class="sidebar-link">第15天-StringBuffer</a></li><li><a href="/JavaPlusDoc/basic/16.html" class="sidebar-link">第16天-数组</a></li><li><a href="/JavaPlusDoc/basic/17.html" class="sidebar-link">第17天-日期时间</a></li><li><a href="/JavaPlusDoc/basic/18.html" class="sidebar-link">第18天-正则表达式</a></li><li><a href="/JavaPlusDoc/basic/19.html" class="sidebar-link">第19天-方法</a></li><li><a href="/JavaPlusDoc/basic/20.html" class="sidebar-link">第20天-构造方法</a></li><li><a href="/JavaPlusDoc/basic/21.html" class="sidebar-link">第21天-流</a></li><li><a href="/JavaPlusDoc/basic/22.html" class="sidebar-link">第22天-异常处理</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>达达JAVA写法思路</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/basic/23.html" class="sidebar-link">第23天-继承的概念</a></li><li><a href="/JavaPlusDoc/basic/24.html" class="sidebar-link">第24天-重写与重载</a></li><li><a href="/JavaPlusDoc/basic/25.html" class="sidebar-link">第25天-多态</a></li><li><a href="/JavaPlusDoc/basic/26.html" class="sidebar-link">第26天-抽象类</a></li><li><a href="/JavaPlusDoc/basic/27.html" class="sidebar-link">第27天-封装</a></li><li><a href="/JavaPlusDoc/basic/28.html" class="sidebar-link">第28天-接口</a></li><li><a href="/JavaPlusDoc/basic/29.html" class="sidebar-link">第29天-枚举</a></li><li><a href="/JavaPlusDoc/basic/30.html" class="sidebar-link">第30天-反射</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>达达JAVA进阶教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/basicUp/31.html" class="sidebar-link">第31天-数据结构</a></li><li><a href="/JavaPlusDoc/basicUp/32.html" class="sidebar-link">第32天-集合框架</a></li><li><a href="/JavaPlusDoc/basicUp/33.html" class="sidebar-link">第33天-ArrayList</a></li><li><a href="/JavaPlusDoc/basicUp/34.html" class="sidebar-link">第34天-LinkedList</a></li><li><a href="/JavaPlusDoc/basicUp/35.html" class="sidebar-link">第35天-HashSet</a></li><li><a href="/JavaPlusDoc/basicUp/36.html" class="sidebar-link">第36天-HashMap</a></li><li><a href="/JavaPlusDoc/basicUp/37.html" class="sidebar-link">第37天-Iterator</a></li><li><a href="/JavaPlusDoc/basicUp/38.html" class="sidebar-link">第38天-Object</a></li><li><a href="/JavaPlusDoc/basicUp/39.html" class="sidebar-link">第39天-NIO</a></li><li><a href="/JavaPlusDoc/basicUp/40.html" class="sidebar-link">第40天-泛型</a></li><li><a href="/JavaPlusDoc/basicUp/41.html" class="sidebar-link">第41天-序列化</a></li><li><a href="/JavaPlusDoc/basicUp/42.html" class="sidebar-link">第42天-网络编程</a></li><li><a href="/JavaPlusDoc/basicUp/43.html" class="sidebar-link">第43天-发送邮件</a></li><li><a href="/JavaPlusDoc/basicUp/44.html" class="sidebar-link">第44天-多线程编程</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>刷题练习平台</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/coding-practice/" class="sidebar-link">题库导航</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/JavaPlusDoc/coding-practice/topics/" class="sidebar-heading clickable"><span>📝 专题练习</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/JavaPlusDoc/coding-practice/written-exam/" class="sidebar-heading clickable"><span>📝 笔试真题</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/JavaPlusDoc/coding-practice/interview/" class="sidebar-heading clickable"><span>💼 面试真题</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/JavaPlusDoc/coding-practice/contest/" class="sidebar-heading clickable"><span>🏆 竞赛题库</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/JavaPlusDoc/coding-practice/statistics/" class="sidebar-heading clickable"><span>📊 学习统计</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>SQL专属笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/sql/" class="sidebar-link">手册简介</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>基础语法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/sql/basic/syntax.html" class="sidebar-link">SQL基础语法</a></li><li><a href="/JavaPlusDoc/sql/basic/data-types.html" class="sidebar-link">数据类型</a></li><li><a href="/JavaPlusDoc/sql/basic/constraints.html" class="sidebar-link">约束条件</a></li><li><a href="/JavaPlusDoc/sql/basic/ddl.html" class="sidebar-link">DDL数据定义语言</a></li><li><a href="/JavaPlusDoc/sql/basic/dml.html" class="sidebar-link">DML数据操作语言</a></li><li><a href="/JavaPlusDoc/sql/basic/dql.html" class="sidebar-link">DQL数据查询语言</a></li><li><a href="/JavaPlusDoc/sql/basic/dcl.html" class="sidebar-link">DCL数据控制语言</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>查询操作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/sql/query/select-basic.html" class="sidebar-link">SELECT查询基础</a></li><li><a href="/JavaPlusDoc/sql/query/where.html" class="sidebar-link">WHERE条件查询</a></li><li><a href="/JavaPlusDoc/sql/query/join.html" class="sidebar-link">JOIN表连接</a></li><li><a href="/JavaPlusDoc/sql/query/subquery.html" class="sidebar-link">子查询</a></li><li><a href="/JavaPlusDoc/sql/query/group-by.html" class="sidebar-link">GROUP BY分组</a></li><li><a href="/JavaPlusDoc/sql/query/order-by.html" class="sidebar-link">ORDER BY排序</a></li><li><a href="/JavaPlusDoc/sql/query/pagination.html" class="sidebar-link">分页查询</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>性能优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/sql/perfor/indexr.html" class="sidebar-link">性能优化概述</a></li><li><a href="/JavaPlusDoc/sql/perfor/indexes.html" class="sidebar-link">索引原理与应用</a></li><li><a href="/JavaPlusDoc/sql/perfor/query-optimization.html" class="sidebar-link">查询优化</a></li><li><a href="/JavaPlusDoc/sql/perfor/execution-plans.html" class="sidebar-link">执行计划分析</a></li><li><a href="/JavaPlusDoc/sql/perfor/tuning.html" class="sidebar-link">性能调优</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>高级特性</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/sql/advanced/indexr.html" class="sidebar-link">高级特性概述</a></li><li><a href="/JavaPlusDoc/sql/advanced/transactions.html" class="sidebar-link">事务处理</a></li><li><a href="/JavaPlusDoc/sql/advanced/stored-procedures.html" class="sidebar-link">存储过程与函数</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>函数大全</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/sql/functions/aggregate.html" class="sidebar-link">聚合函数</a></li><li><a href="/JavaPlusDoc/sql/functions/string.html" class="sidebar-link">字符串函数</a></li><li><a href="/JavaPlusDoc/sql/functions/numeric.html" class="sidebar-link">数值函数</a></li><li><a href="/JavaPlusDoc/sql/functions/datetime.html" class="sidebar-link">日期时间函数</a></li><li><a href="/JavaPlusDoc/sql/functions/conditional.html" class="sidebar-link">条件函数</a></li><li><a href="/JavaPlusDoc/sql/functions/window.html" class="sidebar-link">窗口函数</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>实战案例</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/sql/examples/ecommerce.html" class="sidebar-link">电商系统实战</a></li><li><a href="/JavaPlusDoc/sql/examples/analytics.html" class="sidebar-link">数据分析实战</a></li><li><a href="/JavaPlusDoc/sql/examples/reports.html" class="sidebar-link">报表查询实战</a></li><li><a href="/JavaPlusDoc/sql/examples/migration.html" class="sidebar-link">数据迁移实战</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>数据库特定</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/sql/databases/mysql.html" class="sidebar-link">MySQL</a></li><li><a href="/JavaPlusDoc/sql/databases/postgresql.html" class="sidebar-link">PostgreSQL</a></li><li><a href="/JavaPlusDoc/sql/databases/sqlserver.html" class="sidebar-link">SQL Server</a></li><li><a href="/JavaPlusDoc/sql/databases/oracle.html" class="sidebar-link">Oracle</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>UniApp小程序开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/uniapp/充电宝小程序实现.html" class="sidebar-link">充电宝小程序实现</a></li><li><a href="/JavaPlusDoc/uniapp/充电桩小程序实现.html" class="sidebar-link">充电桩小程序实现</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python专属笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Python基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/Python/1.html" class="sidebar-link">第1天-Python历史</a></li><li><a href="/JavaPlusDoc/Python/2.html" class="sidebar-link">第2天-安装Python</a></li><li><a href="/JavaPlusDoc/Python/3.html" class="sidebar-link">第3天-第一个程序</a></li><li><a href="/JavaPlusDoc/Python/4.html" class="sidebar-link">第4天-Python基础</a></li><li><a href="/JavaPlusDoc/Python/5.html" class="sidebar-link">第5天-函数</a></li><li><a href="/JavaPlusDoc/Python/6.html" class="sidebar-link">第6天-高级特性</a></li><li><a href="/JavaPlusDoc/Python/7.html" class="sidebar-link">第7天-函数式编程</a></li><li><a href="/JavaPlusDoc/Python/8.html" class="sidebar-link">第8天-模块</a></li><li><a href="/JavaPlusDoc/Python/9.html" class="sidebar-link">第9天-面向对象编程</a></li><li><a href="/JavaPlusDoc/Python/10.html" class="sidebar-link">第10天-高级编程</a></li><li><a href="/JavaPlusDoc/Python/11.html" class="sidebar-link">第11天-错误和调试</a></li><li><a href="/JavaPlusDoc/Python/12.html" class="sidebar-link">第12天-IO编程</a></li><li><a href="/JavaPlusDoc/Python/13.html" class="sidebar-link">第13天-进程和线程</a></li><li><a href="/JavaPlusDoc/Python/14.html" class="sidebar-link">第14天-正则表达式</a></li><li><a href="/JavaPlusDoc/Python/15.html" class="sidebar-link">第15天-常用内建模块</a></li><li><a href="/JavaPlusDoc/Python/16.html" class="sidebar-link">第16天-常用第三方模块</a></li><li><a href="/JavaPlusDoc/Python/17.html" class="sidebar-link">第17天-图形界面</a></li><li><a href="/JavaPlusDoc/Python/18.html" class="sidebar-link">第18天-网络编程</a></li><li><a href="/JavaPlusDoc/Python/19.html" class="sidebar-link">第19天-电子邮件</a></li><li><a href="/JavaPlusDoc/Python/20.html" aria-current="page" class="active sidebar-link">第20天-访问数据库</a></li><li><a href="/JavaPlusDoc/Python/21.html" class="sidebar-link">第21天-Web开发</a></li><li><a href="/JavaPlusDoc/Python/22.html" class="sidebar-link">第22天-异步IO</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java核心技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>基础篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/e/JVM深入解析.html" class="sidebar-link">JVM深入解析</a></li><li><a href="/JavaPlusDoc/e/JDK开发工具详解.html" class="sidebar-link">JDK开发工具详解</a></li><li><a href="/JavaPlusDoc/e/Java实战演示.html" class="sidebar-link">Java实战演示</a></li><li><a href="/JavaPlusDoc/basic-grammar/java-jdk-jre-jvm.html" class="sidebar-link">Java、JDK、JRE、JVM详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/basic-data-type.html" class="sidebar-link">Java基本数据类型</a></li><li><a href="/JavaPlusDoc/basic-grammar/type-cast.html" class="sidebar-link">数据类型转换</a></li><li><a href="/JavaPlusDoc/basic-grammar/int-cache.html" class="sidebar-link">数据类型缓存池</a></li><li><a href="/JavaPlusDoc/basic-grammar/operator.html" class="sidebar-link">运算符</a></li><li><a href="/JavaPlusDoc/basic-grammar/flow-control.html" class="sidebar-link">流程控制</a></li><li><a href="/JavaPlusDoc/basic-grammar/string-source.html" class="sidebar-link">String类详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/constant-pool.html" class="sidebar-link">字符串常量池</a></li><li><a href="/JavaPlusDoc/basic-grammar/builder-buffer.html" class="sidebar-link">StringBuilder和Buffer</a></li><li><a href="/JavaPlusDoc/basic-grammar/equals.html" class="sidebar-link">字符串比较</a></li><li><a href="/JavaPlusDoc/basic-grammar/object-class.html" class="sidebar-link">面向对象基础</a></li><li><a href="/JavaPlusDoc/basic-grammar/package.html" class="sidebar-link">Java包机制</a></li><li><a href="/JavaPlusDoc/basic-grammar/var.html" class="sidebar-link">变量与方法</a></li><li><a href="/JavaPlusDoc/basic-grammar/construct.html" class="sidebar-link">构造方法</a></li><li><a href="/JavaPlusDoc/basic-grammar/abstract.html" class="sidebar-link">抽象类</a></li><li><a href="/JavaPlusDoc/basic-grammar/interface.html" class="sidebar-link">接口和内部类</a></li><li><a href="/JavaPlusDoc/basic-grammar/encapsulation-inheritance-polymorphism.html" class="sidebar-link">封装继承多态</a></li><li><a href="/JavaPlusDoc/basic-grammar/this-super.html" class="sidebar-link">this与super关键字</a></li><li><a href="/JavaPlusDoc/basic-grammar/immutable.html" class="sidebar-link">不可变对象</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>集合框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/basic-grammar/gailan.html" class="sidebar-link">集合框架概览</a></li><li><a href="/JavaPlusDoc/basic-grammar/arraylist.html" class="sidebar-link">ArrayList详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/linkedlist.html" class="sidebar-link">LinkedList详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/stack.html" class="sidebar-link">栈Stack详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/hashmap.html" class="sidebar-link">HashMap详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/linkedhashmap.html" class="sidebar-link">LinkedHashMap详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/treemap.html" class="sidebar-link">TreeMap详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/ArrayDeque.html" class="sidebar-link">ArrayDeque详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/PriorityQueue.html" class="sidebar-link">PriorityQueue详解</a></li><li><a href="/JavaPlusDoc/basic-grammar/array-linked-list.html" class="sidebar-link">ArrayList vs LinkedList</a></li><li><a href="/JavaPlusDoc/basic-grammar/generic.html" class="sidebar-link">Java泛型</a></li><li><a href="/JavaPlusDoc/basic-grammar/iterator-iterable.html" class="sidebar-link">Iterator和Iterable</a></li><li><a href="/JavaPlusDoc/basic-grammar/fail-fast.html" class="sidebar-link">foreach循环陷阱</a></li><li><a href="/JavaPlusDoc/basic-grammar/comparable-omparator.html" class="sidebar-link">Comparable和Comparator</a></li><li><a href="/JavaPlusDoc/basic-grammar/WeakHashMap.html" class="sidebar-link">WeakHashMap详解</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>JVM与性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/aJava/jvm.html" class="sidebar-link">JVM基础</a></li><li><a href="/JavaPlusDoc/aJava/JVM内存区域.html" class="sidebar-link">JVM内存区域</a></li><li><a href="/JavaPlusDoc/aJava/程序计数器.html" class="sidebar-link">程序计数器</a></li><li><a href="/JavaPlusDoc/aJava/线程.html" class="sidebar-link">线程</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>并发编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/thread/thread.html" class="sidebar-link">多线程入门</a></li><li><a href="/JavaPlusDoc/thread/callable-future-futuretask.html" class="sidebar-link">线程执行结果获取</a></li><li><a href="/JavaPlusDoc/thread/thread-state-and-method.html" class="sidebar-link">线程的6种状态</a></li><li><a href="/JavaPlusDoc/thread/threadpool-executor.html" class="sidebar-link">深入浅出Java线程池ThreadPoolExecutor</a></li><li><a href="/JavaPlusDoc/jobPro/synchronized.html" class="sidebar-link">synchronized和lock</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>IO与网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/java-up/shangtou.html" class="sidebar-link">JavaIO知识体系</a></li><li><a href="/JavaPlusDoc/java-up/file-path.html" class="sidebar-link">文件流</a></li><li><a href="/JavaPlusDoc/java-up/reader-writer.html" class="sidebar-link">字节流与字符流</a></li><li><a href="/JavaPlusDoc/java-up/char-byte.html" class="sidebar-link">转换流</a></li><li><a href="/JavaPlusDoc/java-up/serialize.html" class="sidebar-link">序列化和反序列化</a></li><li><a href="/JavaPlusDoc/nio/nio.html" class="sidebar-link">NIO基础</a></li><li><a href="/JavaPlusDoc/nio/BIONIOAIO.html" class="sidebar-link">NIO vs BIO vs AIO</a></li><li><a href="/JavaPlusDoc/nio/buffer-channel.html" class="sidebar-link">Buffer和Channel</a></li><li><a href="/JavaPlusDoc/nio/network-connect.html" class="sidebar-link">网络编程实践</a></li><li><a href="/JavaPlusDoc/nio/moxing.html" class="sidebar-link">IO模型</a></li><li><a href="/JavaPlusDoc/jobPro/IO.html" class="sidebar-link">IO多路复用</a></li><li><a href="/JavaPlusDoc/java-up/netty.html" class="sidebar-link">Netty入门</a></li><li><a href="/JavaPlusDoc/nio/socket-communication-basics.html" class="sidebar-link">Socket通信基础</a></li><li><a href="/JavaPlusDoc/nio/tcp-udp-programming.html" class="sidebar-link">TCP与UDP编程</a></li><li><a href="/JavaPlusDoc/nio/network-protocols-deep-dive.html" class="sidebar-link">网络协议深入解析</a></li><li><a href="/JavaPlusDoc/nio/nio-netty-framework.html" class="sidebar-link">NIO与Netty框架</a></li><li><a href="/JavaPlusDoc/nio/socket-programming-practice.html" class="sidebar-link">Socket编程实战案例</a></li><li><a href="/JavaPlusDoc/nio/socket-performance-optimization.html" class="sidebar-link">Socket性能优化与调试</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/JavaPlusDoc/gaobingfaxitong/1" class="sidebar-heading clickable"><span>高并发系统</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/gaobingfaxitong/1.html" class="sidebar-link">它的通用设计方法是什么</a></li><li><a href="/JavaPlusDoc/gaobingfaxitong/2.html" class="sidebar-link">架构分层</a></li><li><a href="/JavaPlusDoc/gaobingfaxitong/3.html" class="sidebar-link">如何提升系统性能</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>物联网架构系列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/iot/" class="sidebar-link">IoT架构概览</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>架构分层设计</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/iot/device-layer.html" class="sidebar-link">设备层架构</a></li><li><a href="/JavaPlusDoc/iot/network-layer.html" class="sidebar-link">网络层架构</a></li><li><a href="/JavaPlusDoc/iot/application-layer.html" class="sidebar-link">应用层架构</a></li><li><a href="/JavaPlusDoc/iot/frontend-layer.html" class="sidebar-link">前端展示层</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>设备接入与管理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/iot/device-access.html" class="sidebar-link">设备接入层</a></li><li><a href="/JavaPlusDoc/iot/device-management-layer.html" class="sidebar-link">设备管理层</a></li><li><a href="/JavaPlusDoc/iot/device-authentication.html" class="sidebar-link">设备认证</a></li><li><a href="/JavaPlusDoc/iot/device-control.html" class="sidebar-link">设备控制</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>协议适配层</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/iot/protocol-adapter-layer.html" class="sidebar-link">协议适配器</a></li><li><a href="/JavaPlusDoc/iot/mqtt-access-layer.html" class="sidebar-link">MQTT接入</a></li><li><a href="/JavaPlusDoc/iot/http-access-layer.html" class="sidebar-link">HTTP接入</a></li><li><a href="/JavaPlusDoc/iot/coap-access-layer.html" class="sidebar-link">CoAP接入</a></li><li><a href="/JavaPlusDoc/iot/tcp-udp-access-layer.html" class="sidebar-link">TCP/UDP接入</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>数据处理与存储</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/iot/data-processing.html" class="sidebar-link">数据处理层</a></li><li><a href="/JavaPlusDoc/iot/data-reception.html" class="sidebar-link">数据接收</a></li><li><a href="/JavaPlusDoc/iot/redis.html" class="sidebar-link">Redis缓存</a></li><li><a href="/JavaPlusDoc/iot/kafka.html" class="sidebar-link">Kafka消息队列</a></li><li><a href="/JavaPlusDoc/iot/cassandra.html" class="sidebar-link">Cassandra存储</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>实战项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/iot/practice-projects.html" class="sidebar-link">实践项目案例</a></li><li><a href="/JavaPlusDoc/iot/geofence.html" class="sidebar-link">电子围栏功能设计</a></li><li><a href="/JavaPlusDoc/iot/charging-station-gateway.html" class="sidebar-link">充电桩设备网关</a></li><li><a href="/JavaPlusDoc/iot/netty-gateway-design.html" class="sidebar-link">百万台设备Netty网关架构</a></li><li><a href="/JavaPlusDoc/iot/netty-gateway-design-mi.html" class="sidebar-link">小米实战过亿设备Netty网关架构</a></li><li><a href="/JavaPlusDoc/iot/netty-gateway-bat.html" class="sidebar-link">哈喽电池设备Netty网关架构</a></li><li><a href="/JavaPlusDoc/iot/user-organization-permissions.html" class="sidebar-link">用户组织权限</a></li><li><a href="/JavaPlusDoc/iot/database-storage.html" class="sidebar-link">架构懂了就来了解数据库存储扩展千亿读写</a></li><li><a href="/JavaPlusDoc/iot/mermaid-test.html" class="sidebar-link">Mermaid图表测试</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>GO语言技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/go/" class="sidebar-link">GO技术手册导航</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>基础语法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/go/basic-grammar/basic-syntax.html" class="sidebar-link">GO语言基础语法</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>高级特性</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/go/advanced/concurrency.html" class="sidebar-link">并发编程</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>标准库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/go/stdlib/http.html" class="sidebar-link">HTTP编程</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>最佳实践</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/go/best-practices/testing.html" class="sidebar-link">测试最佳实践</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>实战项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/go/projects/web-service.html" class="sidebar-link">Web服务开发实战</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式架构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>缓存系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/high-concurrency/why-cache.html" class="sidebar-link">缓存使用场景</a></li><li><a href="/JavaPlusDoc/high-concurrency/redis-single-thread-model.html" class="sidebar-link">Redis vs Memcached</a></li><li><a href="/JavaPlusDoc/high-concurrency/redis-data-types.html" class="sidebar-link">Redis数据类型</a></li><li><a href="/JavaPlusDoc/high-concurrency/redis-expiration-policies-and-lru.html" class="sidebar-link">Redis过期策略</a></li><li><a href="/JavaPlusDoc/high-concurrency/how-to-ensure-high-concurrency-and-high-availability-of-redis.html" class="sidebar-link">Redis高并发与高可用</a></li><li><a href="/JavaPlusDoc/high-concurrency/redis-master-slave.html" class="sidebar-link">Redis主从架构</a></li><li><a href="/JavaPlusDoc/high-concurrency/redis-persistence.html" class="sidebar-link">Redis持久化</a></li><li><a href="/JavaPlusDoc/high-concurrency/redis-sentinel.html" class="sidebar-link">Redis哨兵集群</a></li><li><a href="/JavaPlusDoc/jobPro/redis.html" class="sidebar-link">Redis应用场景</a></li><li><a href="/JavaPlusDoc/redis/redis-key-expiration.html" class="sidebar-link">Redis key过期问题解决方案</a></li><li><a href="/JavaPlusDoc/java-up/redis-springboot.html" class="sidebar-link">SpringBoot整合Redis</a></li><li><a href="/JavaPlusDoc/redis/xuebeng-chuantou-jichuan.html" class="sidebar-link">缓存雪崩、穿透、击穿</a></li><li><a href="/JavaPlusDoc/redis/redis-lua.html" class="sidebar-link">深入分析Redis Lua脚本运行原理</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>消息队列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/messagequeue/why-mq.html" class="sidebar-link">为什么使用消息队列</a></li><li><a href="/JavaPlusDoc/messagequeue/how-to-ensure-high-availability-of-message-queues.html" class="sidebar-link">消息队列高可用</a></li><li><a href="/JavaPlusDoc/messagequeue/how-to-ensure-that-messages-are-not-repeatedly-consumed.html" class="sidebar-link">消息不重复消费</a></li><li><a href="/JavaPlusDoc/messagequeue/how-to-ensure-the-reliable-transmission-of-messages.html" class="sidebar-link">消息可靠传输</a></li><li><a href="/JavaPlusDoc/messagequeue/how-to-ensure-the-order-of-messages.html" class="sidebar-link">消息顺序性</a></li><li><a href="/JavaPlusDoc/messagequeue/mq-time-delay-and-expired-failure.html" class="sidebar-link">消息队列延时问题</a></li><li><a href="/JavaPlusDoc/messagequeue/mq-design.html" class="sidebar-link">消息队列设计</a></li><li><a href="/JavaPlusDoc/java-up/rabbitmq.html" class="sidebar-link">RabbitMQ入门</a></li><li><a href="/JavaPlusDoc/power/kafka.html" class="sidebar-link">Kafka基础</a></li><li><a href="/JavaPlusDoc/power/kafkas.html" class="sidebar-link">Kafka集群</a></li><li><a href="/JavaPlusDoc/power/comsumer.html" class="sidebar-link">Kafka消费者</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>搜索引擎</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/searchEngine/es-architecture.html" class="sidebar-link">ES分布式架构原理</a></li><li><a href="/JavaPlusDoc/searchEngine/es-write-query-search.html" class="sidebar-link">ES写入数据原理</a></li><li><a href="/JavaPlusDoc/searchEngine/es-optimizing-query-performance.html" class="sidebar-link">ES查询效率优化</a></li><li><a href="/JavaPlusDoc/searchEngine/es-production-cluster.html" class="sidebar-link">ES生产集群部署</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>微服务架构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/worker/3.html" class="sidebar-link">微服务优雅上下线</a></li><li><a href="/JavaPlusDoc/worker/1.html" class="sidebar-link">滚动部署</a></li><li><a href="/JavaPlusDoc/worker/2.html" class="sidebar-link">Nacos优雅停机</a></li><li><a href="/JavaPlusDoc/dubbo/dubbo.html" class="sidebar-link">Dubbo基础</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>数据库技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/mysql/mysql.html" class="sidebar-link">SQL执行过程</a></li><li><a href="/JavaPlusDoc/mysql/shiwu-shixia.html" class="sidebar-link">MySQL事务实现</a></li><li><a href="/JavaPlusDoc/mysql/lijie-shiwu.html" class="sidebar-link">深入理解MySQL事务</a></li><li><a href="/JavaPlusDoc/mysql/mysql-locks.html" class="sidebar-link">MySQL锁机制详解</a></li><li><a href="/JavaPlusDoc/mysql/redis-shuju-yizhixing.html" class="sidebar-link">MySQL和Redis数据一致性</a></li><li><a href="/JavaPlusDoc/jobPro/InnoDB.html" class="sidebar-link">MyISAM vs InnoDB</a></li><li><a href="/JavaPlusDoc/java-up/mongodb.html" class="sidebar-link">MongoDB基础</a></li><li><a href="/JavaPlusDoc/java-up/mongodb-backup-restore.html" class="sidebar-link">MongoDB备份与恢复</a></li><li><a href="/JavaPlusDoc/MyBatis-Plus/getting-started.html" class="sidebar-link">MyBatis-Plus入门</a></li><li><a href="/JavaPlusDoc/MyBatis-Plus/service-interface.html" class="sidebar-link">MyBatis-Plus接口</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>运维与部署</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Docker容器技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/docker/docker-tutorial.html" class="sidebar-link">Docker教程</a></li><li><a href="/JavaPlusDoc/docker/docker架构.html" class="sidebar-link">docker架构</a></li><li><a href="/JavaPlusDoc/docker/docker-install.html" class="sidebar-link">Docker安装指南</a></li><li><a href="/JavaPlusDoc/docker/docker-mirror.html" class="sidebar-link">Docker配置国内源</a></li><li><a href="/JavaPlusDoc/docker/docker-images.html" class="sidebar-link">Docker镜像管理</a></li><li><a href="/JavaPlusDoc/docker/docker-containers.html" class="sidebar-link">Docker容器管理</a></li><li><a href="/JavaPlusDoc/docker/docker-network.html" class="sidebar-link">Docker网络配置</a></li><li><a href="/JavaPlusDoc/docker/docker-volumes.html" class="sidebar-link">Docker数据卷管理</a></li><li><a href="/JavaPlusDoc/docker/docker-dockerfile.html" class="sidebar-link">Dockerfile最佳实践</a></li><li><a href="/JavaPlusDoc/docker/docker-compose.html" class="sidebar-link">Docker Compose详解</a></li><li><a href="/JavaPlusDoc/docker/docker-swarm.html" class="sidebar-link">Docker Swarm集群</a></li><li><a href="/JavaPlusDoc/docker/docker-security.html" class="sidebar-link">Docker安全最佳实践</a></li><li><a href="/JavaPlusDoc/docker/docker-production.html" class="sidebar-link">Docker生产环境部署</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>基础设施</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/aJava/设备网关后端设计.html" class="sidebar-link">设备网关后端设计</a></li><li><a href="/JavaPlusDoc/aJava/Redis底层数据结构原理.html" class="sidebar-link">Redis底层数据结构原理</a></li><li><a href="/JavaPlusDoc/aJava/HashMap底层原理.html" class="sidebar-link">HashMap底层原理</a></li><li><a href="/JavaPlusDoc/aJava/MySQL的InnoDB原理.html" class="sidebar-link">MySQL的InnoDB原理</a></li><li><a href="/JavaPlusDoc/aJava/充电桩业务实现.html" class="sidebar-link">充电桩业务实现</a></li><li><a href="/JavaPlusDoc/aJava/充电宝业务实现.html" class="sidebar-link">充电宝业务实现</a></li><li><a href="/JavaPlusDoc/aJava/数据库分片技术实现.html" class="sidebar-link">数据库分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/Redis分片技术实现.html" class="sidebar-link">Redis分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/MongoDB分片技术实现.html" class="sidebar-link">MongoDB分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/Elasticsearch分片技术实现.html" class="sidebar-link">Elasticsearch分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/HBase分片技术实现.html" class="sidebar-link">HBase分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/ClickHouse分片技术实现.html" class="sidebar-link">ClickHouse分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/PostgreSQL分片技术实现.html" class="sidebar-link">PostgreSQL分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/Oracle分片技术实现.html" class="sidebar-link">Oracle分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/SQLServer分片技术实现.html" class="sidebar-link">SQLServer分片技术实现</a></li><li><a href="/JavaPlusDoc/aJava/云计算是什么.html" class="sidebar-link">云计算基础</a></li><li><a href="/JavaPlusDoc/aJava/mysql是什么.html" class="sidebar-link">mysql是什么</a></li><li><a href="/JavaPlusDoc/aJava/mogodb是什么.html" class="sidebar-link">mogodb是什么</a></li><li><a href="/JavaPlusDoc/aJava/安全组是什么.html" class="sidebar-link">安全组是什么</a></li><li><a href="/JavaPlusDoc/aJava/子网掩码是什么.html" class="sidebar-link">子网掩码是什么</a></li><li><a href="/JavaPlusDoc/aJava/路由器是什么.html" class="sidebar-link">路由器是什么</a></li><li><a href="/JavaPlusDoc/aJava/交换机是什么.html" class="sidebar-link">交换机是什么</a></li><li><a href="/JavaPlusDoc/aJava/CDN是什么.html" class="sidebar-link">CDN是什么</a></li><li><a href="/JavaPlusDoc/aJava/nginx是什么.html" class="sidebar-link">nginx是什么</a></li><li><a href="/JavaPlusDoc/aJava/tomcat是什么.html" class="sidebar-link">tomcat是什么</a></li><li><a href="/JavaPlusDoc/aJava/Eureka是什么.html" class="sidebar-link">Eureka是什么</a></li><li><a href="/JavaPlusDoc/aJava/nacos是什么.html" class="sidebar-link">nacos是什么</a></li><li><a href="/JavaPlusDoc/aJava/Zookeeper是什么.html" class="sidebar-link">Zookeeper是什么</a></li><li><a href="/JavaPlusDoc/aJava/ElasticSearch是什么.html" class="sidebar-link">ElasticSearch是什么</a></li><li><a href="/JavaPlusDoc/aJava/微服务是什么.html" class="sidebar-link">微服务基础</a></li><li><a href="/JavaPlusDoc/aJava/HDFS是什么.html" class="sidebar-link">HDFS基础</a></li><li><a href="/JavaPlusDoc/aJava/块存储是什么.html" class="sidebar-link">块存储</a></li><li><a href="/JavaPlusDoc/aJava/对象存储是什么.html" class="sidebar-link">对象存储</a></li><li><a href="/JavaPlusDoc/aJava/存储快照是什么.html" class="sidebar-link">存储快照</a></li><li><a href="/JavaPlusDoc/aJava/负载均衡是什么.html" class="sidebar-link">负载均衡</a></li><li><a href="/JavaPlusDoc/aJava/什么是灰度发布.html" class="sidebar-link">灰度发布</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>DevOps工具链</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/aJava/Jenkins是什么.html" class="sidebar-link">Jenkins基础</a></li><li><a href="/JavaPlusDoc/aJava/Ansible是什么.html" class="sidebar-link">Ansible基础</a></li><li><a href="/JavaPlusDoc/aJava/DevOps是什么.html" class="sidebar-link">DevOps概念</a></li><li><a href="/JavaPlusDoc/aJava/WAF和DDOS的区别是什么.html" class="sidebar-link">WAF和DDOS防护</a></li><li><a href="/JavaPlusDoc/linux/linux.html" class="sidebar-link">Linux常用命令</a></li><li><a href="/JavaPlusDoc/linux/nginx-env.html" class="sidebar-link">Nginx环境配置</a></li><li><a href="/JavaPlusDoc/linux/kibana-install.html" class="sidebar-link">Kibana安装与使用</a></li><li><a href="/JavaPlusDoc/java-up/nginx.html" class="sidebar-link">Nginx入门</a></li><li><a href="/JavaPlusDoc/java-up/ssl.html" class="sidebar-link">Nginx SSL配置</a></li><li><a href="/JavaPlusDoc/worker/nginx-optimization.html" class="sidebar-link">Nginx优化与防盗链</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>部署与监控</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/worker/elk.html" class="sidebar-link">ELK日志系统</a></li><li><a href="/JavaPlusDoc/worker/elfk-cluster.html" class="sidebar-link">ELFK生产集群搭建</a></li><li><a href="/JavaPlusDoc/worker/jenkins.html" class="sidebar-link">Jenkins部署SpringBoot</a></li><li><a href="/JavaPlusDoc/worker/rocketmq.html" class="sidebar-link">RocketMQ安装</a></li><li><a href="/JavaPlusDoc/worker/grafana.html" class="sidebar-link">Grafana监控</a></li><li><a href="/JavaPlusDoc/worker/prometheus.html" class="sidebar-link">Prometheus单机部署</a></li><li><a href="/JavaPlusDoc/worker/grafana-database-monitoring.html" class="sidebar-link">Grafana监控MySQL、Redis和MongoDB</a></li><li><a href="/JavaPlusDoc/worker/k8s-monitoring.html" class="sidebar-link">K8s监控</a></li><li><a href="/JavaPlusDoc/worker/cpu-troubleshooting.html" class="sidebar-link">CPU使用率100%异常排查</a></li><li><a href="/JavaPlusDoc/worker/springboot.html" class="sidebar-link">SpringBoot启动脚本</a></li><li><a href="/JavaPlusDoc/worker/skywalking.html" class="sidebar-link">SkyWalking监控</a></li><li><a href="/JavaPlusDoc/worker/7.html" class="sidebar-link">前端自动化部署</a></li><li><a href="/JavaPlusDoc/sre/sre.html" class="sidebar-link">SRE实践</a></li><li><a href="/JavaPlusDoc/sre/monitor.html" class="sidebar-link">分布式监控</a></li><li><a href="/JavaPlusDoc/sre/serviceQuality.html" class="sidebar-link">服务质量目标</a></li><li><a href="/JavaPlusDoc/sre/errorBudget.html" class="sidebar-link">错误预算</a></li><li><a href="/JavaPlusDoc/sre/system.html" class="sidebar-link">系统性能指标</a></li><li><a href="/JavaPlusDoc/sre/server-mining-virus-removal.html" class="sidebar-link">服务器挖矿病毒清除</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ElasticSearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/es/es-architecture.html" class="sidebar-link">ElasticSearch架构</a></li><li><a href="/JavaPlusDoc/es/es-optimizing-query-performance.html" class="sidebar-link">查询性能优化</a></li><li><a href="/JavaPlusDoc/es/es-cluster-setup.html" class="sidebar-link">Linux搭建ES集群与Kibana</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>产品系列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/products/" class="sidebar-link">产品概述</a></li><li><a href="/JavaPlusDoc/products/product-gallery.html" class="sidebar-link">【溜溜梅】官方商城小程序</a></li><li><a href="/JavaPlusDoc/products/productChange.html" class="sidebar-link">小区充电桩小程序</a></li><li><a href="/JavaPlusDoc/products/photoImage.html" class="sidebar-link">话圈小程序</a></li><li><a href="/JavaPlusDoc/products/changeChange.html" class="sidebar-link">速绿充电小程序体验设计</a></li><li><a href="/JavaPlusDoc/products/changeChange2.html" class="sidebar-link">恒想充充电桩小程序改版设计</a></li><li><a href="/JavaPlusDoc/products/productShare.html" class="sidebar-link">分销小程序</a></li><li><a href="/JavaPlusDoc/products/product-car.html" class="sidebar-link">电动车充电桩小程序</a></li><li><a href="/JavaPlusDoc/products/无人岛商业计划书.html" class="sidebar-link">无人岛商业计划书</a></li><li><a href="/JavaPlusDoc/products/蜗牛睡眠高嵩.html" class="sidebar-link">蜗牛睡眠高嵩</a></li><li><a href="/JavaPlusDoc/products/优质行业报告网站.html" class="sidebar-link">优质行业报告网站</a></li><li><a href="/JavaPlusDoc/products/篮球场如何赚钱.html" class="sidebar-link">篮球场如何赚钱</a></li><li><a href="/JavaPlusDoc/products/enterprise-platform.html" class="sidebar-link">企业级应用平台</a></li><li><a href="/JavaPlusDoc/products/microservice-framework.html" class="sidebar-link">微服务框架</a></li><li><a href="/JavaPlusDoc/products/data-analytics-suite.html" class="sidebar-link">数据分析套件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>实战案例</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Web应用开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/jobPro/login.html" class="sidebar-link">用户注册登录系统</a></li><li><a href="/JavaPlusDoc/jobPro/lan.html" class="sidebar-link">多语言国际化</a></li><li><a href="/JavaPlusDoc/jobPro/jobPro.html" class="sidebar-link">PC网站微信扫码登录</a></li><li><a href="/JavaPlusDoc/jobPro/wechat-miniprogram-guide.html" class="sidebar-link">微信小程序开发完全指南</a></li><li><a href="/JavaPlusDoc/jobPro/wechat-customer-service.html" class="sidebar-link">微信小程序API客服消息</a></li><li><a href="/JavaPlusDoc/jobPro/wechat-open-api.html" class="sidebar-link">微信小程序开放接口</a></li><li><a href="/JavaPlusDoc/jobPro/wechat-operation-center.html" class="sidebar-link">微信小程序运维中心</a></li><li><a href="/JavaPlusDoc/jobPro/appMsg.html" class="sidebar-link">微信小程序消息推送</a></li><li><a href="/JavaPlusDoc/jobPro/miniprogram.html" class="sidebar-link">微信小程序自动化部署</a></li><li><a href="/JavaPlusDoc/jobPro/appPay.html" class="sidebar-link">微信小程序支付功能</a></li><li><a href="/JavaPlusDoc/jobPro/uniapp.html" class="sidebar-link">iOS/Android打包发布</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>GO语言应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/go/projects/web-service.html" class="sidebar-link">GO Web服务开发实战</a></li><li><a href="/JavaPlusDoc/go/advanced/concurrency.html" class="sidebar-link">GO并发编程实践</a></li><li><a href="/JavaPlusDoc/go/stdlib/http.html" class="sidebar-link">GO HTTP编程指南</a></li><li><a href="/JavaPlusDoc/go/best-practices/testing.html" class="sidebar-link">GO测试最佳实践</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>技术架构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/tech/high-availability-group-buying.html" class="sidebar-link">500万日订单下的高可用拼购系统</a></li><li><a href="/JavaPlusDoc/tech/twenty-million-orders-architecture.html" class="sidebar-link">2000万日订单背后的技术架构</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>企业级应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/java-up/aop-log.html" class="sidebar-link">SpringAOP实践</a></li><li><a href="/JavaPlusDoc/java-up/ioc.html" class="sidebar-link">SpringIoC实践</a></li><li><a href="/JavaPlusDoc/java-up/transaction.html" class="sidebar-link">事务支持</a></li><li><a href="/JavaPlusDoc/java-up/Filter-Interceptor-Listener.html" class="sidebar-link">过滤器与拦截器</a></li><li><a href="/JavaPlusDoc/java-up/quartz.html" class="sidebar-link">SpringBoot整合Quartz</a></li><li><a href="/JavaPlusDoc/java-up/mybatis.html" class="sidebar-link">SpringBoot整合MyBatis</a></li><li><a href="/JavaPlusDoc/java-up/validator.html" class="sidebar-link">数据校验</a></li><li><a href="/JavaPlusDoc/worker/6.html" class="sidebar-link">API数据加密</a></li><li><a href="/JavaPlusDoc/data/data.html" class="sidebar-link">大数据开发实践</a></li><li><a href="/JavaPlusDoc/order/order-BizOrderService.html" class="sidebar-link">订单流程设计</a></li><li><a href="/JavaPlusDoc/linuxPrometheus/linux.html" class="sidebar-link">数据导入导出优化</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>物联网应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/iot/iot.html" class="sidebar-link">物联网基础</a></li><li><a href="/JavaPlusDoc/iot/kafka.html" class="sidebar-link">物联网Kafka应用</a></li><li><a href="/JavaPlusDoc/iot/redis.html" class="sidebar-link">物联网Redis应用</a></li><li><a href="/JavaPlusDoc/iot/cassandra.html" class="sidebar-link">物联网Cassandra应用</a></li><li><a href="/JavaPlusDoc/iot/server.html" class="sidebar-link">物联网设备管理</a></li><li><a href="/JavaPlusDoc/iot/byteArray.html" class="sidebar-link">字节数组处理</a></li><li><a href="/JavaPlusDoc/iot/iotJob.html" class="sidebar-link">物联网业务流程</a></li><li><a href="/JavaPlusDoc/iot/protocol-adapter-layer.html" class="sidebar-link">协议适配层</a></li><li><a href="/JavaPlusDoc/iot/device-management-layer.html" class="sidebar-link">设备管理层</a></li><li><a href="/JavaPlusDoc/iot/application-service-layer.html" class="sidebar-link">应用服务层</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java线程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/thread/java-multithreading-basics.html" class="sidebar-link">Java多线程基础</a></li><li><a href="/JavaPlusDoc/thread/java-thread-synchronization.html" class="sidebar-link">Java线程同步机制</a></li><li><a href="/JavaPlusDoc/thread/java-concurrent-utilities.html" class="sidebar-link">Java并发工具类</a></li><li><a href="/JavaPlusDoc/thread/java-threadpool-advanced.html" class="sidebar-link">Java线程池深入解析</a></li><li><a href="/JavaPlusDoc/thread/java-memory-model.html" class="sidebar-link">Java内存模型与并发编程</a></li><li><a href="/JavaPlusDoc/thread/java-concurrency-best-practices.html" class="sidebar-link">Java并发编程最佳实践</a></li><li><a href="/JavaPlusDoc/thread/thread-state-and-method.html" class="sidebar-link">线程状态与方法</a></li><li><a href="/JavaPlusDoc/thread/callable-future-futuretask.html" class="sidebar-link">Callable、Future、FutureTask</a></li><li><a href="/JavaPlusDoc/thread/threadpool-executor.html" class="sidebar-link">ThreadPoolExecutor详解</a></li><li><a href="/JavaPlusDoc/aThread/linux.html" class="sidebar-link">linux线程基础</a></li><li><a href="/JavaPlusDoc/aThread/jvm.html" class="sidebar-link">jvm基础知识</a></li><li><a href="/JavaPlusDoc/aThread/jvmThread.html" class="sidebar-link">jvm线程</a></li><li><a href="/JavaPlusDoc/aThread/jvmThreadEvent.html" class="sidebar-link">jvm线程通信原理</a></li><li><a href="/JavaPlusDoc/aThread/jvmThreadSync.html" class="sidebar-link">jvm线程同步机制</a></li><li><a href="/JavaPlusDoc/aThread/jvmLock.html" class="sidebar-link">java锁实现原理</a></li><li><a href="/JavaPlusDoc/aThread/jvmAtomic.html" class="sidebar-link">java原子操作类实现原理</a></li><li><a href="/JavaPlusDoc/aThread/jvmConcurrent.html" class="sidebar-link">java并发容器实现原理</a></li><li><a href="/JavaPlusDoc/aThread/javaThreadPool.html" class="sidebar-link">java线程池实现原理</a></li><li><a href="/JavaPlusDoc/aThread/javaThreadPoolUse.html" class="sidebar-link">java线程池使用</a></li><li><a href="/JavaPlusDoc/aThread/javaThreadSkill.html" class="sidebar-link">java多线程编程技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>电商业务交易系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/ecommerce/product-management.html" class="sidebar-link">商品管理系统</a></li><li><a href="/JavaPlusDoc/ecommerce/order-management.html" class="sidebar-link">订单管理系统</a></li><li><a href="/JavaPlusDoc/ecommerce/payment-system.html" class="sidebar-link">支付系统设计</a></li><li><a href="/JavaPlusDoc/ecommerce/shopping-cart.html" class="sidebar-link">购物车系统</a></li><li><a href="/JavaPlusDoc/ecommerce/inventory-management.html" class="sidebar-link">库存管理系统</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>跨境电商系统架构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/ecommerce/cross-border/" class="sidebar-link">系统架构概述</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/product-catalog-service.html" class="sidebar-link">商品管理系统</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/pricing-engine.html" class="sidebar-link">价格计算引擎</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/order-processing-system.html" class="sidebar-link">订单处理系统</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/payment-gateway-system.html" class="sidebar-link">支付网关系统</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/logistics-delivery-system.html" class="sidebar-link">物流配送系统</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/after-sales-service.html" class="sidebar-link">售后服务系统</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/user-management-system.html" class="sidebar-link">用户管理与权限系统</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/search-recommendation-engine.html" class="sidebar-link">搜索推荐引擎</a></li><li><a href="/JavaPlusDoc/ecommerce/cross-border/shopping-cart-system.html" class="sidebar-link">购物车系统</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>营销系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/marketing/coupon-system.html" class="sidebar-link">优惠券系统</a></li><li><a href="/JavaPlusDoc/marketing/flash-sale-system.html" class="sidebar-link">秒杀系统</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>物联网设备接入系统</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/iot/device-access.html" class="sidebar-link">设备接入系统</a></li><li><a href="/JavaPlusDoc/iot/device-management.html" class="sidebar-link">设备管理服务</a></li><li><a href="/JavaPlusDoc/iot/device-authentication.html" class="sidebar-link">设备认证服务</a></li><li><a href="/JavaPlusDoc/iot/data-reception.html" class="sidebar-link">数据接收服务</a></li><li><a href="/JavaPlusDoc/iot/device-control.html" class="sidebar-link">设备控制服务</a></li><li><a href="/JavaPlusDoc/iot/protocol-adapter.html" class="sidebar-link">协议适配器</a></li><li><a href="/JavaPlusDoc/iot/mqtt-access-layer.html" class="sidebar-link">MQTT设备接入层</a></li><li><a href="/JavaPlusDoc/iot/coap-access-layer.html" class="sidebar-link">CoAP设备接入层</a></li><li><a href="/JavaPlusDoc/iot/http-access-layer.html" class="sidebar-link">HTTP设备接入层</a></li><li><a href="/JavaPlusDoc/iot/tcp-udp-access-layer.html" class="sidebar-link">TCP/UDP设备接入层</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaPlusDoc/cs/os.html" class="sidebar-link">操作系统</a></li><li><a href="/JavaPlusDoc/cs/wangluo.html" class="sidebar-link">计算机网络</a></li><li><a href="/JavaPlusDoc/cs/tcp-ip.html" class="sidebar-link">TCP/IP协议详解</a></li><li><a href="/JavaPlusDoc/aJava/cookie-session-token.html" class="sidebar-link">Cookie/Session/Token</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>第20天-访问数据库</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">第20天-访问数据库</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>哪吒</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/6/15</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="第20天-访问数据库"><a href="#第20天-访问数据库" class="header-anchor">#</a> 第20天-访问数据库</h1> <h2 id="_1-数据库基础"><a href="#_1-数据库基础" class="header-anchor">#</a> 1. 数据库基础</h2> <h3 id="_1-1-数据库概述"><a href="#_1-1-数据库概述" class="header-anchor">#</a> 1.1 数据库概述</h3> <p>数据库是存储和管理数据的系统，Python提供了多种方式来访问不同类型的数据库。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">database_overview_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库概述演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 数据库概述演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 1. 数据库类型</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 常见数据库类型:&quot;</span><span class="token punctuation">)</span>
    
    database_types <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;关系型数据库&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;SQLite&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;轻量级文件数据库，无需服务器&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;MySQL&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;开源关系型数据库管理系统&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;PostgreSQL&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;功能强大的开源对象关系数据库&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;Oracle&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;企业级商业数据库&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;SQL Server&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;微软的关系型数据库&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;NoSQL数据库&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;MongoDB&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;文档型数据库&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;Redis&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;内存键值数据库&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;Cassandra&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;分布式列族数据库&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;Neo4j&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;图形数据库&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> category<span class="token punctuation">,</span> databases <span class="token keyword">in</span> database_types<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   </span><span class="token interpolation"><span class="token punctuation">{</span>category<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> name<span class="token punctuation">,</span> description <span class="token keyword">in</span> databases<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     • </span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. Python数据库API规范</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. Python数据库API规范 (DB-API 2.0):&quot;</span><span class="token punctuation">)</span>
    
    api_components <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;连接对象 (Connection)&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;表示数据库连接&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;游标对象 (Cursor)&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;执行SQL语句和获取结果&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;异常类型&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;处理数据库相关错误&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;类型构造器&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;处理特殊数据类型&quot;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> component<span class="token punctuation">,</span> description <span class="token keyword">in</span> api_components<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>component<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 常用Python数据库模块</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 常用Python数据库模块:&quot;</span><span class="token punctuation">)</span>
    
    python_modules <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;sqlite3&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Python内置SQLite模块&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;pymysql&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;纯Python MySQL客户端&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;psycopg2&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PostgreSQL适配器&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;cx_Oracle&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Oracle数据库接口&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;pymongo&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;MongoDB Python驱动&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;redis-py&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Redis Python客户端&quot;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> module<span class="token punctuation">,</span> description <span class="token keyword">in</span> python_modules<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>module<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 数据库操作基本流程</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 数据库操作基本流程:&quot;</span><span class="token punctuation">)</span>
    
    basic_flow <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;1. 导入数据库模块&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;2. 建立数据库连接&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;3. 创建游标对象&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;4. 执行SQL语句&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;5. 处理查询结果&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;6. 提交事务（如需要）&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;7. 关闭游标和连接&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> step <span class="token keyword">in</span> basic_flow<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>step<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 基本SQL语句回顾</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 基本SQL语句回顾:&quot;</span><span class="token punctuation">)</span>
    
    sql_examples <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;创建表&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT, email TEXT)&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;插入数据&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;INSERT INTO users (name, email) VALUES ('张三', 'zhang@example.com')&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;查询数据&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT * FROM users WHERE name = '张三'&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;更新数据&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;UPDATE users SET email = 'new@example.com' WHERE id = 1&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;删除数据&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;DELETE FROM users WHERE id = 1&quot;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> operation<span class="token punctuation">,</span> sql <span class="token keyword">in</span> sql_examples<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>operation<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>sql<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 运行数据库概述演示</span>
database_overview_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_2-sqlite数据库"><a href="#_2-sqlite数据库" class="header-anchor">#</a> 2. SQLite数据库</h2> <h3 id="_2-1-sqlite基础操作"><a href="#_2-1-sqlite基础操作" class="header-anchor">#</a> 2.1 SQLite基础操作</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sqlite3
<span class="token keyword">import</span> os
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime

<span class="token keyword">def</span> <span class="token function">sqlite_basic_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;SQLite基础操作演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== SQLite基础操作演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 1. 连接数据库</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 连接SQLite数据库:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 连接到数据库文件（如果不存在会自动创建）</span>
    db_path <span class="token operator">=</span> <span class="token string">'example.db'</span>
    conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 连接到数据库: </span><span class="token interpolation"><span class="token punctuation">{</span>db_path<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建游标</span>
    cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建游标对象&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 创建表</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 创建数据表:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 用户表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            username TEXT NOT NULL UNIQUE,
            email TEXT NOT NULL,
            password TEXT NOT NULL,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            is_active BOOLEAN DEFAULT 1
        )
    '''</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建用户表&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 文章表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE IF NOT EXISTS articles (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            title TEXT NOT NULL,
            content TEXT,
            author_id INTEGER,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (author_id) REFERENCES users (id)
        )
    '''</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建文章表&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 插入数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 插入数据:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 插入单条记录</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
            <span class="token string">&quot;INSERT INTO users (username, email, password) VALUES (?, ?, ?)&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'zhangsan@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password123'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 插入用户: 张三&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> sqlite3<span class="token punctuation">.</span>IntegrityError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   用户已存在: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 插入多条记录</span>
    users_data <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token string">'lisi@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token string">'wangwu@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password789'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'赵六'</span><span class="token punctuation">,</span> <span class="token string">'zhaoliu@example.com'</span><span class="token punctuation">,</span> <span class="token string">'passwordabc'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        cursor<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span>
            <span class="token string">&quot;INSERT INTO users (username, email, password) VALUES (?, ?, ?)&quot;</span><span class="token punctuation">,</span>
            users_data
        <span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 批量插入 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>users_data<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个用户&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> sqlite3<span class="token punctuation">.</span>IntegrityError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   部分用户已存在: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 提交事务</span>
    conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 提交事务&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 查询数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 查询数据:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 查询所有用户</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM users&quot;</span><span class="token punctuation">)</span>
    users <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   查询到 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个用户:&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> user <span class="token keyword">in</span> users<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     ID: </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">, 用户名: </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">, 邮箱: </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 条件查询</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT id, username FROM users WHERE username LIKE ?&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'%张%'</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    filtered_users <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   姓张的用户 (</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>filtered_users<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个):&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> user <span class="token keyword">in</span> filtered_users<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     ID: </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">, 用户名: </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 使用fetchone获取单条记录</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM users WHERE username = ?&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    user <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> user<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   找到用户: </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 更新数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 更新数据:&quot;</span><span class="token punctuation">)</span>
    
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
        <span class="token string">&quot;UPDATE users SET email = ? WHERE username = ?&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'zhangsan_new@example.com'</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    affected_rows <span class="token operator">=</span> cursor<span class="token punctuation">.</span>rowcount
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 更新了 </span><span class="token interpolation"><span class="token punctuation">{</span>affected_rows<span class="token punctuation">}</span></span><span class="token string"> 条记录&quot;</span></span><span class="token punctuation">)</span>
    
    conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 删除数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n6. 删除数据:&quot;</span><span class="token punctuation">)</span>
    
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;DELETE FROM users WHERE username = ?&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'赵六'</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    deleted_rows <span class="token operator">=</span> cursor<span class="token punctuation">.</span>rowcount
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 删除了 </span><span class="token interpolation"><span class="token punctuation">{</span>deleted_rows<span class="token punctuation">}</span></span><span class="token string"> 条记录&quot;</span></span><span class="token punctuation">)</span>
    
    conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 7. 查看表结构</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n7. 查看表结构:&quot;</span><span class="token punctuation">)</span>
    
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;PRAGMA table_info(users)&quot;</span><span class="token punctuation">)</span>
    columns <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   users表结构:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> col <span class="token keyword">in</span> columns<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>col<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>col<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">'NOT NULL'</span> <span class="token keyword">if</span> col<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token string">'NULL'</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 8. 关闭连接</span>
    cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   ✓ 关闭数据库连接&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 清理测试文件</span>
    <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 清理测试文件: </span><span class="token interpolation"><span class="token punctuation">{</span>db_path<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 运行SQLite基础演示</span>
sqlite_basic_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-2-sqlite高级功能"><a href="#_2-2-sqlite高级功能" class="header-anchor">#</a> 2.2 SQLite高级功能</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sqlite3
<span class="token keyword">import</span> json
<span class="token keyword">from</span> contextlib <span class="token keyword">import</span> contextmanager

<span class="token keyword">def</span> <span class="token function">sqlite_advanced_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;SQLite高级功能演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== SQLite高级功能演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 1. 连接管理和上下文管理器</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 连接管理:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token decorator annotation punctuation">@contextmanager</span>
    <span class="token keyword">def</span> <span class="token function">get_db_connection</span><span class="token punctuation">(</span>db_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库连接上下文管理器&quot;&quot;&quot;</span>
        conn <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span>
            <span class="token comment"># 设置行工厂，使查询结果可以像字典一样访问</span>
            conn<span class="token punctuation">.</span>row_factory <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>Row
            <span class="token keyword">yield</span> conn
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">if</span> conn<span class="token punctuation">:</span>
                conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">raise</span> e
        <span class="token keyword">finally</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> conn<span class="token punctuation">:</span>
                conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    db_path <span class="token operator">=</span> <span class="token string">'advanced_example.db'</span>
    
    <span class="token comment"># 使用上下文管理器</span>
    <span class="token keyword">with</span> get_db_connection<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
        cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 创建测试表</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
            CREATE TABLE IF NOT EXISTS products (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                name TEXT NOT NULL,
                price REAL NOT NULL,
                category TEXT,
                metadata TEXT,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        '''</span><span class="token punctuation">)</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 使用上下文管理器创建连接&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 事务处理</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 事务处理:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">transfer_money_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;转账事务演示&quot;&quot;&quot;</span>
        <span class="token keyword">with</span> get_db_connection<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
            cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment"># 创建账户表</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                CREATE TABLE IF NOT EXISTS accounts (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    name TEXT NOT NULL,
                    balance REAL NOT NULL DEFAULT 0
                )
            '''</span><span class="token punctuation">)</span>
            
            <span class="token comment"># 插入测试账户</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;INSERT OR REPLACE INTO accounts (id, name, balance) VALUES (1, '账户A', 1000)&quot;</span><span class="token punctuation">)</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;INSERT OR REPLACE INTO accounts (id, name, balance) VALUES (2, '账户B', 500)&quot;</span><span class="token punctuation">)</span>
            conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                <span class="token comment"># 开始事务</span>
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;BEGIN TRANSACTION&quot;</span><span class="token punctuation">)</span>
                
                <span class="token comment"># 从账户A扣款</span>
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;UPDATE accounts SET balance = balance - ? WHERE id = ?&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                
                <span class="token comment"># 检查余额是否足够</span>
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT balance FROM accounts WHERE id = ?&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                balance <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                
                <span class="token keyword">if</span> balance <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                    <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&quot;余额不足&quot;</span><span class="token punctuation">)</span>
                
                <span class="token comment"># 向账户B转账</span>
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;UPDATE accounts SET balance = balance + ? WHERE id = ?&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                
                <span class="token comment"># 提交事务</span>
                conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 转账成功&quot;</span><span class="token punctuation">)</span>
                
                <span class="token comment"># 查看结果</span>
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT name, balance FROM accounts&quot;</span><span class="token punctuation">)</span>
                accounts <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">for</span> account <span class="token keyword">in</span> accounts<span class="token punctuation">:</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>account<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>account<span class="token punctuation">[</span><span class="token string">'balance'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> 元&quot;</span></span><span class="token punctuation">)</span>
                
            <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                <span class="token comment"># 回滚事务</span>
                conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✗ 转账失败，已回滚: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    transfer_money_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 索引和性能优化</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 索引和性能优化:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">with</span> get_db_connection<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
        cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 创建索引</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;CREATE INDEX IF NOT EXISTS idx_products_category ON products(category)&quot;</span><span class="token punctuation">)</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;CREATE INDEX IF NOT EXISTS idx_products_price ON products(price)&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建索引&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 插入测试数据</span>
        products_data <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token punctuation">(</span><span class="token string">'笔记本电脑'</span><span class="token punctuation">,</span> <span class="token number">5999.99</span><span class="token punctuation">,</span> <span class="token string">'电子产品'</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'brand'</span><span class="token punctuation">:</span> <span class="token string">'Dell'</span><span class="token punctuation">,</span> <span class="token string">'model'</span><span class="token punctuation">:</span> <span class="token string">'XPS13'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'无线鼠标'</span><span class="token punctuation">,</span> <span class="token number">199.99</span><span class="token punctuation">,</span> <span class="token string">'电子产品'</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'brand'</span><span class="token punctuation">:</span> <span class="token string">'Logitech'</span><span class="token punctuation">,</span> <span class="token string">'wireless'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'办公椅'</span><span class="token punctuation">,</span> <span class="token number">899.99</span><span class="token punctuation">,</span> <span class="token string">'家具'</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'material'</span><span class="token punctuation">:</span> <span class="token string">'皮革'</span><span class="token punctuation">,</span> <span class="token string">'adjustable'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'台灯'</span><span class="token punctuation">,</span> <span class="token number">299.99</span><span class="token punctuation">,</span> <span class="token string">'家具'</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'LED'</span><span class="token punctuation">,</span> <span class="token string">'dimmable'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
        
        cursor<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span>
            <span class="token string">&quot;INSERT OR REPLACE INTO products (name, price, category, metadata) VALUES (?, ?, ?, ?)&quot;</span><span class="token punctuation">,</span>
            products_data
        <span class="token punctuation">)</span>
        conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 插入 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>products_data<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个产品&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 使用EXPLAIN QUERY PLAN查看查询计划</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;EXPLAIN QUERY PLAN SELECT * FROM products WHERE category = '电子产品'&quot;</span><span class="token punctuation">)</span>
        plan <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   查询计划:&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> step <span class="token keyword">in</span> plan<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>step<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. JSON数据处理</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. JSON数据处理:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">with</span> get_db_connection<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
        cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 查询并解析JSON数据</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT name, metadata FROM products WHERE category = '电子产品'&quot;</span><span class="token punctuation">)</span>
        products <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   电子产品详情:&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> product <span class="token keyword">in</span> products<span class="token punctuation">:</span>
            metadata <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>product<span class="token punctuation">[</span><span class="token string">'metadata'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>product<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> metadata<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;       </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 自定义函数</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 自定义函数:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">calculate_discount</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span> discount_rate<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;计算折扣价格&quot;&quot;&quot;</span>
        <span class="token keyword">return</span> price <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> discount_rate <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span>
    
    <span class="token keyword">with</span> get_db_connection<span class="token punctuation">(</span>db_path<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
        <span class="token comment"># 注册自定义函数</span>
        conn<span class="token punctuation">.</span>create_function<span class="token punctuation">(</span><span class="token string">&quot;calculate_discount&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> calculate_discount<span class="token punctuation">)</span>
        
        cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 使用自定义函数</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
            <span class="token string">&quot;SELECT name, price, calculate_discount(price, 20) as discounted_price FROM products&quot;</span>
        <span class="token punctuation">)</span>
        products <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   产品价格（8折优惠）:&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> product <span class="token keyword">in</span> products<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>product<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>product<span class="token punctuation">[</span><span class="token string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string"> → </span><span class="token interpolation"><span class="token punctuation">{</span>product<span class="token punctuation">[</span><span class="token string">'discounted_price'</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 备份和恢复</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n6. 数据库备份:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">backup_database</span><span class="token punctuation">(</span>source_db<span class="token punctuation">,</span> backup_db<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;备份数据库&quot;&quot;&quot;</span>
        <span class="token keyword">with</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>source_db<span class="token punctuation">)</span> <span class="token keyword">as</span> source<span class="token punctuation">:</span>
            <span class="token keyword">with</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>backup_db<span class="token punctuation">)</span> <span class="token keyword">as</span> backup<span class="token punctuation">:</span>
                source<span class="token punctuation">.</span>backup<span class="token punctuation">(</span>backup<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 备份完成: </span><span class="token interpolation"><span class="token punctuation">{</span>source_db<span class="token punctuation">}</span></span><span class="token string"> → </span><span class="token interpolation"><span class="token punctuation">{</span>backup_db<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    backup_path <span class="token operator">=</span> <span class="token string">'backup_example.db'</span>
    backup_database<span class="token punctuation">(</span>db_path<span class="token punctuation">,</span> backup_path<span class="token punctuation">)</span>
    
    <span class="token comment"># 验证备份</span>
    <span class="token keyword">with</span> get_db_connection<span class="token punctuation">(</span>backup_path<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
        cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT COUNT(*) FROM products&quot;</span><span class="token punctuation">)</span>
        count <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 备份验证: 产品数量 </span><span class="token interpolation"><span class="token punctuation">{</span>count<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 清理文件</span>
    <span class="token keyword">import</span> os
    <span class="token keyword">for</span> file_path <span class="token keyword">in</span> <span class="token punctuation">[</span>db_path<span class="token punctuation">,</span> backup_path<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 清理测试文件&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 运行SQLite高级演示</span>
sqlite_advanced_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_3-mysql数据库"><a href="#_3-mysql数据库" class="header-anchor">#</a> 3. MySQL数据库</h2> <h3 id="_3-1-mysql连接和基本操作"><a href="#_3-1-mysql连接和基本操作" class="header-anchor">#</a> 3.1 MySQL连接和基本操作</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 注意：需要安装 pymysql: pip install pymysql</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> pymysql
    PYMYSQL_AVAILABLE <span class="token operator">=</span> <span class="token boolean">True</span>
<span class="token keyword">except</span> ImportError<span class="token punctuation">:</span>
    PYMYSQL_AVAILABLE <span class="token operator">=</span> <span class="token boolean">False</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;PyMySQL未安装，请运行: pip install pymysql&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">mysql_basic_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;MySQL基础操作演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== MySQL基础操作演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token keyword">not</span> PYMYSQL_AVAILABLE<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ⚠️ PyMySQL模块未安装，跳过MySQL演示&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    
    <span class="token comment"># 1. 连接配置</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. MySQL连接配置:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 数据库连接配置</span>
    config <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'host'</span><span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
        <span class="token string">'port'</span><span class="token punctuation">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
        <span class="token string">'user'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
        <span class="token string">'password'</span><span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span>  <span class="token comment"># 请替换为实际密码</span>
        <span class="token string">'database'</span><span class="token punctuation">:</span> <span class="token string">'test_db'</span><span class="token punctuation">,</span>
        <span class="token string">'charset'</span><span class="token punctuation">:</span> <span class="token string">'utf8mb4'</span><span class="token punctuation">,</span>
        <span class="token string">'autocommit'</span><span class="token punctuation">:</span> <span class="token boolean">False</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   连接配置:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> config<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> key <span class="token operator">!=</span> <span class="token string">'password'</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 连接管理类</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. MySQL连接管理:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">MySQLManager</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;MySQL连接管理器&quot;&quot;&quot;</span>
        
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>config <span class="token operator">=</span> config
            self<span class="token punctuation">.</span>connection <span class="token operator">=</span> <span class="token boolean">None</span>
        
        <span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;建立连接&quot;&quot;&quot;</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>connection <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token operator">**</span>self<span class="token punctuation">.</span>config<span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 连接MySQL成功&quot;</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
            <span class="token keyword">except</span> pymysql<span class="token punctuation">.</span>Error <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✗ 连接失败: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">False</span>
        
        <span class="token keyword">def</span> <span class="token function">disconnect</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;关闭连接&quot;&quot;&quot;</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>connection<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 关闭MySQL连接&quot;</span><span class="token punctuation">)</span>
        
        <span class="token keyword">def</span> <span class="token function">execute_query</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;执行查询&quot;&quot;&quot;</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                <span class="token keyword">with</span> self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
                    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> params <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">except</span> pymysql<span class="token punctuation">.</span>Error <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✗ 查询失败: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">None</span>
        
        <span class="token keyword">def</span> <span class="token function">execute_update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;执行更新&quot;&quot;&quot;</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                <span class="token keyword">with</span> self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
                    affected_rows <span class="token operator">=</span> cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> params <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> affected_rows
            <span class="token keyword">except</span> pymysql<span class="token punctuation">.</span>Error <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✗ 更新失败: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token number">0</span>
        
        <span class="token keyword">def</span> <span class="token function">execute_many</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> params_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;批量执行&quot;&quot;&quot;</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                <span class="token keyword">with</span> self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
                    affected_rows <span class="token operator">=</span> cursor<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> params_list<span class="token punctuation">)</span>
                    self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> affected_rows
            <span class="token keyword">except</span> pymysql<span class="token punctuation">.</span>Error <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✗ 批量执行失败: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token number">0</span>
    
    <span class="token comment"># 3. 模拟MySQL操作（如果无法连接真实数据库）</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. MySQL操作演示:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">simulate_mysql_operations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;模拟MySQL操作&quot;&quot;&quot;</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   模拟MySQL数据库操作:&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 模拟创建表</span>
        create_table_sql <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
            CREATE TABLE IF NOT EXISTS employees (
                id INT AUTO_INCREMENT PRIMARY KEY,
                name VARCHAR(100) NOT NULL,
                email VARCHAR(100) UNIQUE NOT NULL,
                department VARCHAR(50),
                salary DECIMAL(10, 2),
                hire_date DATE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        '''</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 创建员工表&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 模拟插入数据</span>
        employees_data <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'zhangsan@company.com'</span><span class="token punctuation">,</span> <span class="token string">'技术部'</span><span class="token punctuation">,</span> <span class="token number">8000.00</span><span class="token punctuation">,</span> <span class="token string">'2023-01-15'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token string">'lisi@company.com'</span><span class="token punctuation">,</span> <span class="token string">'销售部'</span><span class="token punctuation">,</span> <span class="token number">6000.00</span><span class="token punctuation">,</span> <span class="token string">'2023-02-20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token string">'wangwu@company.com'</span><span class="token punctuation">,</span> <span class="token string">'人事部'</span><span class="token punctuation">,</span> <span class="token number">7000.00</span><span class="token punctuation">,</span> <span class="token string">'2023-03-10'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'赵六'</span><span class="token punctuation">,</span> <span class="token string">'zhaoliu@company.com'</span><span class="token punctuation">,</span> <span class="token string">'技术部'</span><span class="token punctuation">,</span> <span class="token number">9000.00</span><span class="token punctuation">,</span> <span class="token string">'2023-04-05'</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
        
        insert_sql <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
            INSERT INTO employees (name, email, department, salary, hire_date)
            VALUES (%s, %s, %s, %s, %s)
        '''</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     ✓ 插入 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>employees_data<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个员工&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 模拟查询操作</span>
        queries <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;查询所有员工&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT * FROM employees&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;按部门查询&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT * FROM employees WHERE department = '技术部'&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;薪资统计&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT department, AVG(salary) as avg_salary FROM employees GROUP BY department&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;高薪员工&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT name, salary FROM employees WHERE salary &gt; 7000 ORDER BY salary DESC&quot;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">for</span> desc<span class="token punctuation">,</span> sql <span class="token keyword">in</span> queries<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     • </span><span class="token interpolation"><span class="token punctuation">{</span>desc<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>sql<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token format-spec">50]</span><span class="token punctuation">}</span></span><span class="token string">...&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 模拟更新操作</span>
        update_sql <span class="token operator">=</span> <span class="token string">&quot;UPDATE employees SET salary = salary * 1.1 WHERE department = '技术部'&quot;</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 技术部员工加薪10%&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 模拟删除操作</span>
        delete_sql <span class="token operator">=</span> <span class="token string">&quot;DELETE FROM employees WHERE hire_date &lt; '2023-02-01'&quot;</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 删除早期员工记录&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 尝试连接真实数据库，如果失败则模拟操作</span>
    mysql_manager <span class="token operator">=</span> MySQLManager<span class="token punctuation">(</span>config<span class="token punctuation">)</span>
    <span class="token keyword">if</span> mysql_manager<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 真实数据库操作</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 创建数据库（如果不存在）</span>
            mysql_manager<span class="token punctuation">.</span>execute_update<span class="token punctuation">(</span><span class="token string">&quot;CREATE DATABASE IF NOT EXISTS test_db&quot;</span><span class="token punctuation">)</span>
            mysql_manager<span class="token punctuation">.</span>execute_update<span class="token punctuation">(</span><span class="token string">&quot;USE test_db&quot;</span><span class="token punctuation">)</span>
            
            <span class="token comment"># 执行实际操作...</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   执行真实MySQL操作&quot;</span><span class="token punctuation">)</span>
            
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   操作过程中出错: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">finally</span><span class="token punctuation">:</span>
            mysql_manager<span class="token punctuation">.</span>disconnect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token comment"># 模拟操作</span>
        simulate_mysql_operations<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 运行MySQL基础演示</span>
mysql_basic_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-2-mysql连接池和高级功能"><a href="#_3-2-mysql连接池和高级功能" class="header-anchor">#</a> 3.2 MySQL连接池和高级功能</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 连接池需要额外安装: pip install DBUtils</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> DBUtils<span class="token punctuation">.</span>PooledDB <span class="token keyword">import</span> PooledDB
    DBUTILS_AVAILABLE <span class="token operator">=</span> <span class="token boolean">True</span>
<span class="token keyword">except</span> ImportError<span class="token punctuation">:</span>
    DBUTILS_AVAILABLE <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token keyword">def</span> <span class="token function">mysql_advanced_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;MySQL高级功能演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== MySQL高级功能演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 1. 连接池管理</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 连接池管理:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">MySQLConnectionPool</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;MySQL连接池管理器&quot;&quot;&quot;</span>
        
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> config<span class="token punctuation">,</span> pool_size<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>config <span class="token operator">=</span> config
            self<span class="token punctuation">.</span>pool_size <span class="token operator">=</span> pool_size
            self<span class="token punctuation">.</span>pool <span class="token operator">=</span> <span class="token boolean">None</span>
            self<span class="token punctuation">.</span>_init_pool<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">def</span> <span class="token function">_init_pool</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;初始化连接池&quot;&quot;&quot;</span>
            <span class="token keyword">if</span> DBUTILS_AVAILABLE <span class="token keyword">and</span> PYMYSQL_AVAILABLE<span class="token punctuation">:</span>
                <span class="token keyword">try</span><span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span>pool <span class="token operator">=</span> PooledDB<span class="token punctuation">(</span>
                        creator<span class="token operator">=</span>pymysql<span class="token punctuation">,</span>
                        maxconnections<span class="token operator">=</span>self<span class="token punctuation">.</span>pool_size<span class="token punctuation">,</span>
                        mincached<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>
                        maxcached<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>
                        maxshared<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>
                        blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
                        maxusage<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
                        setsession<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        ping<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
                        <span class="token operator">**</span>self<span class="token punctuation">.</span>config
                    <span class="token punctuation">)</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 初始化连接池，大小: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>pool_size<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
                <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✗ 连接池初始化失败: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ⚠️ 缺少依赖，使用模拟连接池&quot;</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>pool <span class="token operator">=</span> <span class="token boolean">None</span>
        
        <span class="token keyword">def</span> <span class="token function">get_connection</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;从连接池获取连接&quot;&quot;&quot;</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>pool<span class="token punctuation">:</span>
                <span class="token keyword">return</span> self<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>connection<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token comment"># 模拟连接</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   获取模拟连接&quot;</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">None</span>
        
        <span class="token keyword">def</span> <span class="token function">execute_transaction</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> operations<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;执行事务&quot;&quot;&quot;</span>
            conn <span class="token operator">=</span> self<span class="token punctuation">.</span>get_connection<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> conn<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ⚠️ 无法获取连接，模拟事务执行&quot;</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>
            
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
                
                <span class="token comment"># 开始事务</span>
                conn<span class="token punctuation">.</span>begin<span class="token punctuation">(</span><span class="token punctuation">)</span>
                
                <span class="token keyword">for</span> operation <span class="token keyword">in</span> operations<span class="token punctuation">:</span>
                    sql <span class="token operator">=</span> operation<span class="token punctuation">[</span><span class="token string">'sql'</span><span class="token punctuation">]</span>
                    params <span class="token operator">=</span> operation<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'params'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> params<span class="token punctuation">)</span>
                
                <span class="token comment"># 提交事务</span>
                conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 事务执行成功，包含 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>operations<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个操作&quot;</span></span><span class="token punctuation">)</span>
                
            <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✗ 事务执行失败，已回滚: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">finally</span><span class="token punctuation">:</span>
                cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 数据访问对象 (DAO) 模式</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 数据访问对象模式:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">UserDAO</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;用户数据访问对象&quot;&quot;&quot;</span>
        
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> connection_pool<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>pool <span class="token operator">=</span> connection_pool
        
        <span class="token keyword">def</span> <span class="token function">create_user</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;创建用户&quot;&quot;&quot;</span>
            sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO users (username, email, password) VALUES (%s, %s, %s)&quot;</span>
            params <span class="token operator">=</span> <span class="token punctuation">(</span>username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
            
            <span class="token comment"># 模拟执行</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 创建用户: </span><span class="token interpolation"><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token punctuation">{</span>email<span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        
        <span class="token keyword">def</span> <span class="token function">get_user_by_id</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> user_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;根据ID获取用户&quot;&quot;&quot;</span>
            sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users WHERE id = %s&quot;</span>
            params <span class="token operator">=</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span><span class="token punctuation">)</span>
            
            <span class="token comment"># 模拟返回数据</span>
            user_data <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">'id'</span><span class="token punctuation">:</span> user_id<span class="token punctuation">,</span>
                <span class="token string">'username'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f'user_</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span>
                <span class="token string">'email'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f'user_</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">@example.com'</span></span><span class="token punctuation">,</span>
                <span class="token string">'created_at'</span><span class="token punctuation">:</span> <span class="token string">'2023-01-01 00:00:00'</span>
            <span class="token punctuation">}</span>
            
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 获取用户: </span><span class="token interpolation"><span class="token punctuation">{</span>user_data<span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> user_data
        
        <span class="token keyword">def</span> <span class="token function">update_user</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> user_id<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;更新用户信息&quot;&quot;&quot;</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> kwargs<span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">False</span>
            
            set_clause <span class="token operator">=</span> <span class="token string">', '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string"> = %s&quot;</span></span> <span class="token keyword">for</span> key <span class="token keyword">in</span> kwargs<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            sql <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;UPDATE users SET </span><span class="token interpolation"><span class="token punctuation">{</span>set_clause<span class="token punctuation">}</span></span><span class="token string"> WHERE id = %s&quot;</span></span>
            params <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>kwargs<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">[</span>user_id<span class="token punctuation">]</span>
            
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 更新用户 </span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">list</span><span class="token punctuation">(</span>kwargs<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        
        <span class="token keyword">def</span> <span class="token function">delete_user</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> user_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;删除用户&quot;&quot;&quot;</span>
            sql <span class="token operator">=</span> <span class="token string">&quot;DELETE FROM users WHERE id = %s&quot;</span>
            params <span class="token operator">=</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span><span class="token punctuation">)</span>
            
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 删除用户: </span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        
        <span class="token keyword">def</span> <span class="token function">search_users</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> keyword<span class="token punctuation">,</span> limit<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;搜索用户&quot;&quot;&quot;</span>
            sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users WHERE username LIKE %s OR email LIKE %s LIMIT %s&quot;</span>
            params <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'%</span><span class="token interpolation"><span class="token punctuation">{</span>keyword<span class="token punctuation">}</span></span><span class="token string">%'</span></span><span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f'%</span><span class="token interpolation"><span class="token punctuation">{</span>keyword<span class="token punctuation">}</span></span><span class="token string">%'</span></span><span class="token punctuation">,</span> limit<span class="token punctuation">)</span>
            
            <span class="token comment"># 模拟搜索结果</span>
            results <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> i<span class="token punctuation">,</span> <span class="token string">'username'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>keyword<span class="token punctuation">}</span></span><span class="token string">_user_</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> <span class="token string">'email'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>keyword<span class="token punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">@example.com'</span></span><span class="token punctuation">}</span>
                <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token punctuation">(</span>limit <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
            
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 搜索用户 '</span><span class="token interpolation"><span class="token punctuation">{</span>keyword<span class="token punctuation">}</span></span><span class="token string">': 找到 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个结果&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> results
    
    <span class="token comment"># 3. 测试连接池和DAO</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 测试连接池和DAO:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建连接池</span>
    config <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'host'</span><span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
        <span class="token string">'user'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
        <span class="token string">'password'</span><span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span>
        <span class="token string">'database'</span><span class="token punctuation">:</span> <span class="token string">'test_db'</span><span class="token punctuation">,</span>
        <span class="token string">'charset'</span><span class="token punctuation">:</span> <span class="token string">'utf8mb4'</span>
    <span class="token punctuation">}</span>
    
    pool <span class="token operator">=</span> MySQLConnectionPool<span class="token punctuation">(</span>config<span class="token punctuation">,</span> pool_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建DAO实例</span>
    user_dao <span class="token operator">=</span> UserDAO<span class="token punctuation">(</span>pool<span class="token punctuation">)</span>
    
    <span class="token comment"># 测试CRUD操作</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   CRUD操作测试:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建用户</span>
    user_dao<span class="token punctuation">.</span>create_user<span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'zhangsan@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password123'</span><span class="token punctuation">)</span>
    user_dao<span class="token punctuation">.</span>create_user<span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token string">'lisi@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password456'</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 查询用户</span>
    user <span class="token operator">=</span> user_dao<span class="token punctuation">.</span>get_user_by_id<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 更新用户</span>
    user_dao<span class="token punctuation">.</span>update_user<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> email<span class="token operator">=</span><span class="token string">'zhangsan_new@example.com'</span><span class="token punctuation">,</span> username<span class="token operator">=</span><span class="token string">'张三_new'</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 搜索用户</span>
    results <span class="token operator">=</span> user_dao<span class="token punctuation">.</span>search_users<span class="token punctuation">(</span><span class="token string">'张'</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 删除用户</span>
    user_dao<span class="token punctuation">.</span>delete_user<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 批量操作和性能优化</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 批量操作和性能优化:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">batch_operations_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;批量操作演示&quot;&quot;&quot;</span>
        
        <span class="token comment"># 批量插入</span>
        batch_data <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token punctuation">(</span><span class="token string">'用户1'</span><span class="token punctuation">,</span> <span class="token string">'user1@example.com'</span><span class="token punctuation">,</span> <span class="token string">'pass1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'用户2'</span><span class="token punctuation">,</span> <span class="token string">'user2@example.com'</span><span class="token punctuation">,</span> <span class="token string">'pass2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'用户3'</span><span class="token punctuation">,</span> <span class="token string">'user3@example.com'</span><span class="token punctuation">,</span> <span class="token string">'pass3'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'用户4'</span><span class="token punctuation">,</span> <span class="token string">'user4@example.com'</span><span class="token punctuation">,</span> <span class="token string">'pass4'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'用户5'</span><span class="token punctuation">,</span> <span class="token string">'user5@example.com'</span><span class="token punctuation">,</span> <span class="token string">'pass5'</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 批量插入 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>batch_data<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个用户&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 分页查询</span>
        page_size <span class="token operator">=</span> <span class="token number">10</span>
        page_num <span class="token operator">=</span> <span class="token number">1</span>
        offset <span class="token operator">=</span> <span class="token punctuation">(</span>page_num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> page_size
        
        pagination_sql <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;SELECT * FROM users LIMIT </span><span class="token interpolation"><span class="token punctuation">{</span>page_size<span class="token punctuation">}</span></span><span class="token string"> OFFSET </span><span class="token interpolation"><span class="token punctuation">{</span>offset<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 分页查询: 第</span><span class="token interpolation"><span class="token punctuation">{</span>page_num<span class="token punctuation">}</span></span><span class="token string">页，每页</span><span class="token interpolation"><span class="token punctuation">{</span>page_size<span class="token punctuation">}</span></span><span class="token string">条&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 索引优化建议</span>
        index_suggestions <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;CREATE INDEX idx_users_email ON users(email)&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;CREATE INDEX idx_users_username ON users(username)&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;CREATE INDEX idx_users_created_at ON users(created_at)&quot;</span>
        <span class="token punctuation">]</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   索引优化建议:&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> suggestion <span class="token keyword">in</span> index_suggestions<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>suggestion<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    batch_operations_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 数据库监控和统计</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 数据库监控:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">database_monitoring_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库监控演示&quot;&quot;&quot;</span>
        
        monitoring_queries <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;连接数统计&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SHOW STATUS LIKE 'Threads_connected'&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;查询缓存命中率&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SHOW STATUS LIKE 'Qcache_hits'&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;慢查询数量&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SHOW STATUS LIKE 'Slow_queries'&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;表锁等待&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SHOW STATUS LIKE 'Table_locks_waited'&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;InnoDB缓冲池&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SHOW STATUS LIKE 'Innodb_buffer_pool_read_requests'&quot;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   监控查询:&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> desc<span class="token punctuation">,</span> query <span class="token keyword">in</span> monitoring_queries<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>desc<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>query<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 性能分析</span>
        performance_tips <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;使用EXPLAIN分析查询计划&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;合理创建索引，避免过多索引&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;使用连接池减少连接开销&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;定期分析表统计信息&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;监控慢查询日志&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;优化数据库配置参数&quot;</span>
        <span class="token punctuation">]</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   性能优化建议:&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> tip <span class="token keyword">in</span> performance_tips<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     • </span><span class="token interpolation"><span class="token punctuation">{</span>tip<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    database_monitoring_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 运行MySQL高级演示</span>
mysql_advanced_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_4-orm框架"><a href="#_4-orm框架" class="header-anchor">#</a> 4. ORM框架</h2> <h3 id="_4-1-sqlalchemy基础"><a href="#_4-1-sqlalchemy基础" class="header-anchor">#</a> 4.1 SQLAlchemy基础</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 注意：需要安装 SQLAlchemy: pip install sqlalchemy</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> sqlalchemy <span class="token keyword">import</span> create_engine<span class="token punctuation">,</span> Column<span class="token punctuation">,</span> Integer<span class="token punctuation">,</span> String<span class="token punctuation">,</span> DateTime<span class="token punctuation">,</span> ForeignKey<span class="token punctuation">,</span> Text
    <span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>ext<span class="token punctuation">.</span>declarative <span class="token keyword">import</span> declarative_base
    <span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>orm <span class="token keyword">import</span> sessionmaker<span class="token punctuation">,</span> relationship
    <span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
    SQLALCHEMY_AVAILABLE <span class="token operator">=</span> <span class="token boolean">True</span>
<span class="token keyword">except</span> ImportError<span class="token punctuation">:</span>
    SQLALCHEMY_AVAILABLE <span class="token operator">=</span> <span class="token boolean">False</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;SQLAlchemy未安装，请运行: pip install sqlalchemy&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">sqlalchemy_basic_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;SQLAlchemy基础演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== SQLAlchemy基础演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token keyword">not</span> SQLALCHEMY_AVAILABLE<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ⚠️ SQLAlchemy模块未安装，跳过ORM演示&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    
    <span class="token comment"># 1. 创建数据库引擎</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 创建数据库引擎:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 使用SQLite内存数据库进行演示</span>
    engine <span class="token operator">=</span> create_engine<span class="token punctuation">(</span><span class="token string">'sqlite:///:memory:'</span><span class="token punctuation">,</span> echo<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建SQLite内存数据库引擎&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 定义模型</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 定义ORM模型:&quot;</span><span class="token punctuation">)</span>
    
    Base <span class="token operator">=</span> declarative_base<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;用户模型&quot;&quot;&quot;</span>
        __tablename__ <span class="token operator">=</span> <span class="token string">'users'</span>
        
        <span class="token builtin">id</span> <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        username <span class="token operator">=</span> Column<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unique<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        email <span class="token operator">=</span> Column<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unique<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        created_at <span class="token operator">=</span> Column<span class="token punctuation">(</span>DateTime<span class="token punctuation">,</span> default<span class="token operator">=</span>datetime<span class="token punctuation">.</span>utcnow<span class="token punctuation">)</span>
        
        <span class="token comment"># 关系</span>
        posts <span class="token operator">=</span> relationship<span class="token punctuation">(</span><span class="token string">&quot;Post&quot;</span><span class="token punctuation">,</span> back_populates<span class="token operator">=</span><span class="token string">&quot;author&quot;</span><span class="token punctuation">)</span>
        
        <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;&lt;User(username='</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>username<span class="token punctuation">}</span></span><span class="token string">', email='</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>email<span class="token punctuation">}</span></span><span class="token string">')&gt;&quot;</span></span>
    
    <span class="token keyword">class</span> <span class="token class-name">Post</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;文章模型&quot;&quot;&quot;</span>
        __tablename__ <span class="token operator">=</span> <span class="token string">'posts'</span>
        
        <span class="token builtin">id</span> <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        title <span class="token operator">=</span> Column<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        content <span class="token operator">=</span> Column<span class="token punctuation">(</span>Text<span class="token punctuation">)</span>
        created_at <span class="token operator">=</span> Column<span class="token punctuation">(</span>DateTime<span class="token punctuation">,</span> default<span class="token operator">=</span>datetime<span class="token punctuation">.</span>utcnow<span class="token punctuation">)</span>
        author_id <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">,</span> ForeignKey<span class="token punctuation">(</span><span class="token string">'users.id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 关系</span>
        author <span class="token operator">=</span> relationship<span class="token punctuation">(</span><span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span> back_populates<span class="token operator">=</span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">)</span>
        
        <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;&lt;Post(title='</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token string">')&gt;&quot;</span></span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 定义User和Post模型&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 创建表</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 创建数据表:&quot;</span><span class="token punctuation">)</span>
    
    Base<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>create_all<span class="token punctuation">(</span>engine<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建所有表&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 创建会话</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 创建数据库会话:&quot;</span><span class="token punctuation">)</span>
    
    Session <span class="token operator">=</span> sessionmaker<span class="token punctuation">(</span>bind<span class="token operator">=</span>engine<span class="token punctuation">)</span>
    session <span class="token operator">=</span> Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建数据库会话&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 插入数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 插入数据:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建用户</span>
    user1 <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">,</span> email<span class="token operator">=</span><span class="token string">'zhangsan@example.com'</span><span class="token punctuation">)</span>
    user2 <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">,</span> email<span class="token operator">=</span><span class="token string">'lisi@example.com'</span><span class="token punctuation">)</span>
    
    session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>user1<span class="token punctuation">)</span>
    session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>user2<span class="token punctuation">)</span>
    session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建用户&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建文章</span>
    post1 <span class="token operator">=</span> Post<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Python学习笔记'</span><span class="token punctuation">,</span> content<span class="token operator">=</span><span class="token string">'今天学习了Python基础语法...'</span><span class="token punctuation">,</span> author<span class="token operator">=</span>user1<span class="token punctuation">)</span>
    post2 <span class="token operator">=</span> Post<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'数据库设计'</span><span class="token punctuation">,</span> content<span class="token operator">=</span><span class="token string">'数据库设计的基本原则...'</span><span class="token punctuation">,</span> author<span class="token operator">=</span>user1<span class="token punctuation">)</span>
    post3 <span class="token operator">=</span> Post<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Web开发入门'</span><span class="token punctuation">,</span> content<span class="token operator">=</span><span class="token string">'Web开发的基础知识...'</span><span class="token punctuation">,</span> author<span class="token operator">=</span>user2<span class="token punctuation">)</span>
    
    session<span class="token punctuation">.</span>add_all<span class="token punctuation">(</span><span class="token punctuation">[</span>post1<span class="token punctuation">,</span> post2<span class="token punctuation">,</span> post3<span class="token punctuation">]</span><span class="token punctuation">)</span>
    session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建文章&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 查询数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n6. 查询数据:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 查询所有用户</span>
    users <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   所有用户 (</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个):&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> user <span class="token keyword">in</span> users<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 条件查询</span>
    user <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span>username <span class="token operator">==</span> <span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> user<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   找到用户: </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   用户文章数: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>posts<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> post <span class="token keyword">in</span> user<span class="token punctuation">.</span>posts<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     • </span><span class="token interpolation"><span class="token punctuation">{</span>post<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 联表查询</span>
    posts_with_authors <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>Post<span class="token punctuation">)</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   文章及作者 (</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>posts_with_authors<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 篇):&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> post <span class="token keyword">in</span> posts_with_authors<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     《</span><span class="token interpolation"><span class="token punctuation">{</span>post<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token string">》 - </span><span class="token interpolation"><span class="token punctuation">{</span>post<span class="token punctuation">.</span>author<span class="token punctuation">.</span>username<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 7. 更新数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n7. 更新数据:&quot;</span><span class="token punctuation">)</span>
    
    user <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span>username <span class="token operator">==</span> <span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> user<span class="token punctuation">:</span>
        user<span class="token punctuation">.</span>email <span class="token operator">=</span> <span class="token string">'zhangsan_new@example.com'</span>
        session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 更新用户邮箱: </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">.</span>email<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 8. 删除数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n8. 删除数据:&quot;</span><span class="token punctuation">)</span>
    
    post_to_delete <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>Post<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>Post<span class="token punctuation">.</span>title <span class="token operator">==</span> <span class="token string">'Web开发入门'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> post_to_delete<span class="token punctuation">:</span>
        session<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>post_to_delete<span class="token punctuation">)</span>
        session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 删除文章: Web开发入门&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 9. 高级查询</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n9. 高级查询:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 聚合查询</span>
    <span class="token keyword">from</span> sqlalchemy <span class="token keyword">import</span> func
    
    user_post_counts <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>
        User<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
        func<span class="token punctuation">.</span>count<span class="token punctuation">(</span>Post<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">.</span>label<span class="token punctuation">(</span><span class="token string">'post_count'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>Post<span class="token punctuation">)</span><span class="token punctuation">.</span>group_by<span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   用户文章统计:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> username<span class="token punctuation">,</span> count <span class="token keyword">in</span> user_post_counts<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>count<span class="token punctuation">}</span></span><span class="token string"> 篇文章&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 排序和限制</span>
    recent_posts <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>Post<span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span>Post<span class="token punctuation">.</span>created_at<span class="token punctuation">.</span>desc<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   最新文章 (</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>recent_posts<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 篇):&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> post <span class="token keyword">in</span> recent_posts<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>post<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 10. 关闭会话</span>
    session<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   ✓ 关闭数据库会话&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 运行SQLAlchemy基础演示</span>
sqlalchemy_basic_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-2-sqlalchemy高级功能"><a href="#_4-2-sqlalchemy高级功能" class="header-anchor">#</a> 4.2 SQLAlchemy高级功能</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">sqlalchemy_advanced_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;SQLAlchemy高级功能演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== SQLAlchemy高级功能演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token keyword">not</span> SQLALCHEMY_AVAILABLE<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ⚠️ SQLAlchemy模块未安装，跳过高级ORM演示&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    
    <span class="token comment"># 1. 数据库连接池配置</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 连接池配置:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">from</span> sqlalchemy <span class="token keyword">import</span> create_engine
    <span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>pool <span class="token keyword">import</span> QueuePool
    
    <span class="token comment"># 配置连接池</span>
    engine <span class="token operator">=</span> create_engine<span class="token punctuation">(</span>
        <span class="token string">'sqlite:///:memory:'</span><span class="token punctuation">,</span>
        poolclass<span class="token operator">=</span>QueuePool<span class="token punctuation">,</span>
        pool_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>
        max_overflow<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>
        pool_pre_ping<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        echo<span class="token operator">=</span><span class="token boolean">False</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 配置连接池 (大小: 10, 最大溢出: 20)&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 模型继承和混入</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 模型继承和混入:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>ext<span class="token punctuation">.</span>declarative <span class="token keyword">import</span> declarative_base
    <span class="token keyword">from</span> sqlalchemy <span class="token keyword">import</span> Column<span class="token punctuation">,</span> Integer<span class="token punctuation">,</span> String<span class="token punctuation">,</span> DateTime<span class="token punctuation">,</span> Boolean
    <span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
    
    Base <span class="token operator">=</span> declarative_base<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">TimestampMixin</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;时间戳混入类&quot;&quot;&quot;</span>
        created_at <span class="token operator">=</span> Column<span class="token punctuation">(</span>DateTime<span class="token punctuation">,</span> default<span class="token operator">=</span>datetime<span class="token punctuation">.</span>utcnow<span class="token punctuation">)</span>
        updated_at <span class="token operator">=</span> Column<span class="token punctuation">(</span>DateTime<span class="token punctuation">,</span> default<span class="token operator">=</span>datetime<span class="token punctuation">.</span>utcnow<span class="token punctuation">,</span> onupdate<span class="token operator">=</span>datetime<span class="token punctuation">.</span>utcnow<span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">SoftDeleteMixin</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;软删除混入类&quot;&quot;&quot;</span>
        is_deleted <span class="token operator">=</span> Column<span class="token punctuation">(</span>Boolean<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        deleted_at <span class="token operator">=</span> Column<span class="token punctuation">(</span>DateTime<span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">BaseModel</span><span class="token punctuation">(</span>Base<span class="token punctuation">,</span> TimestampMixin<span class="token punctuation">,</span> SoftDeleteMixin<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;基础模型&quot;&quot;&quot;</span>
        __abstract__ <span class="token operator">=</span> <span class="token boolean">True</span>
        
        <span class="token builtin">id</span> <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;产品模型&quot;&quot;&quot;</span>
        __tablename__ <span class="token operator">=</span> <span class="token string">'products'</span>
        
        name <span class="token operator">=</span> Column<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        price <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>  <span class="token comment"># 以分为单位存储价格</span>
        description <span class="token operator">=</span> Column<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;&lt;Product(name='</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">', price=</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>price<span class="token punctuation">}</span></span><span class="token string">)&gt;&quot;</span></span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 定义带混入的Product模型&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 自定义查询类</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 自定义查询类:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>orm <span class="token keyword">import</span> Query
    
    <span class="token keyword">class</span> <span class="token class-name">SoftDeleteQuery</span><span class="token punctuation">(</span>Query<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;支持软删除的查询类&quot;&quot;&quot;</span>
        
        <span class="token keyword">def</span> <span class="token function">filter_active</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;过滤未删除的记录&quot;&quot;&quot;</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>column_descriptions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>is_deleted <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">)</span>
        
        <span class="token keyword">def</span> <span class="token function">filter_deleted</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;过滤已删除的记录&quot;&quot;&quot;</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>column_descriptions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>is_deleted <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 事务管理</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 事务管理:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>orm <span class="token keyword">import</span> sessionmaker
    <span class="token keyword">from</span> contextlib <span class="token keyword">import</span> contextmanager
    
    Session <span class="token operator">=</span> sessionmaker<span class="token punctuation">(</span>bind<span class="token operator">=</span>engine<span class="token punctuation">)</span>
    
    <span class="token decorator annotation punctuation">@contextmanager</span>
    <span class="token keyword">def</span> <span class="token function">get_db_session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库会话上下文管理器&quot;&quot;&quot;</span>
        session <span class="token operator">=</span> Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">yield</span> session
            session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            session<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">raise</span> e
        <span class="token keyword">finally</span><span class="token punctuation">:</span>
            session<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建表</span>
    Base<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>create_all<span class="token punctuation">(</span>engine<span class="token punctuation">)</span>
    
    <span class="token comment"># 使用事务</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> get_db_session<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>
            <span class="token comment"># 批量创建产品</span>
            products <span class="token operator">=</span> <span class="token punctuation">[</span>
                Product<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'笔记本电脑'</span><span class="token punctuation">,</span> price<span class="token operator">=</span><span class="token number">599999</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">'高性能笔记本'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Product<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'无线鼠标'</span><span class="token punctuation">,</span> price<span class="token operator">=</span><span class="token number">19999</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">'人体工学设计'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Product<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'机械键盘'</span><span class="token punctuation">,</span> price<span class="token operator">=</span><span class="token number">39999</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">'青轴机械键盘'</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
            
            session<span class="token punctuation">.</span>add_all<span class="token punctuation">(</span>products<span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 批量创建产品（事务中）&quot;</span><span class="token punctuation">)</span>
            
            <span class="token comment"># 模拟可能的错误</span>
            <span class="token comment"># raise Exception(&quot;模拟错误&quot;)</span>
            
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✗ 事务失败: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 查询优化</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 查询优化:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">with</span> get_db_session<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>
        <span class="token comment"># 延迟加载 vs 立即加载</span>
        <span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>orm <span class="token keyword">import</span> joinedload<span class="token punctuation">,</span> selectinload
        
        <span class="token comment"># 查询产品数量</span>
        product_count <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>Product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>Product<span class="token punctuation">.</span>is_deleted <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   活跃产品数量: </span><span class="token interpolation"><span class="token punctuation">{</span>product_count<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 分页查询</span>
        page_size <span class="token operator">=</span> <span class="token number">2</span>
        page_num <span class="token operator">=</span> <span class="token number">1</span>
        offset <span class="token operator">=</span> <span class="token punctuation">(</span>page_num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> page_size
        
        products <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>Product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>
            Product<span class="token punctuation">.</span>is_deleted <span class="token operator">==</span> <span class="token boolean">False</span>
        <span class="token punctuation">)</span><span class="token punctuation">.</span>offset<span class="token punctuation">(</span>offset<span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span>page_size<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   分页查询结果 (第</span><span class="token interpolation"><span class="token punctuation">{</span>page_num<span class="token punctuation">}</span></span><span class="token string">页):&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> product <span class="token keyword">in</span> products<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>product<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">: ¥</span><span class="token interpolation"><span class="token punctuation">{</span>product<span class="token punctuation">.</span>price<span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 原生SQL查询</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n6. 原生SQL查询:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">with</span> get_db_session<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>
        <span class="token comment"># 执行原生SQL</span>
        result <span class="token operator">=</span> session<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
            <span class="token string">&quot;SELECT name, price FROM products WHERE is_deleted = 0 ORDER BY price DESC&quot;</span>
        <span class="token punctuation">)</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   价格排序（原生SQL）:&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> row <span class="token keyword">in</span> result<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">: ¥</span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 7. 数据验证和约束</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n7. 数据验证:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>orm <span class="token keyword">import</span> validates
    
    <span class="token keyword">class</span> <span class="token class-name">ValidatedProduct</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;带验证的产品模型&quot;&quot;&quot;</span>
        __tablename__ <span class="token operator">=</span> <span class="token string">'validated_products'</span>
        
        name <span class="token operator">=</span> Column<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        price <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
        
        <span class="token decorator annotation punctuation">@validates</span><span class="token punctuation">(</span><span class="token string">'price'</span><span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">validate_price</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">,</span> price<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;价格验证&quot;&quot;&quot;</span>
            <span class="token keyword">if</span> price <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span> <span class="token keyword">and</span> price <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&quot;价格不能为负数&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> price
        
        <span class="token decorator annotation punctuation">@validates</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">validate_name</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token triple-quoted-string string">&quot;&quot;&quot;名称验证&quot;&quot;&quot;</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> name <span class="token keyword">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&quot;产品名称不能为空&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> name<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 定义带验证的产品模型&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 8. 性能监控</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n8. 性能监控:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">import</span> time
    
    <span class="token keyword">class</span> <span class="token class-name">QueryTimer</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;查询计时器&quot;&quot;&quot;</span>
        
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> description<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>description <span class="token operator">=</span> description
            self<span class="token punctuation">.</span>start_time <span class="token operator">=</span> <span class="token boolean">None</span>
        
        <span class="token keyword">def</span> <span class="token function">__enter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>start_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> self
        
        <span class="token keyword">def</span> <span class="token function">__exit__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> exc_type<span class="token punctuation">,</span> exc_val<span class="token punctuation">,</span> exc_tb<span class="token punctuation">)</span><span class="token punctuation">:</span>
            elapsed <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>start_time
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>description<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>elapsed<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">ms&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token keyword">with</span> get_db_session<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>
        <span class="token keyword">with</span> QueryTimer<span class="token punctuation">(</span><span class="token string">&quot;查询所有产品&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            products <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>Product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">with</span> QueryTimer<span class="token punctuation">(</span><span class="token string">&quot;统计产品数量&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            count <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>Product<span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   ✓ SQLAlchemy高级功能演示完成&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 运行SQLAlchemy高级演示</span>
sqlalchemy_advanced_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_5-数据库设计最佳实践"><a href="#_5-数据库设计最佳实践" class="header-anchor">#</a> 5. 数据库设计最佳实践</h2> <h3 id="_5-1-数据库设计原则"><a href="#_5-1-数据库设计原则" class="header-anchor">#</a> 5.1 数据库设计原则</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">database_design_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库设计最佳实践演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 数据库设计最佳实践 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 1. 数据库设计原则</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 数据库设计原则:&quot;</span><span class="token punctuation">)</span>
    
    design_principles <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;第一范式 (1NF)&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;定义&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;每个字段都是原子性的，不可再分&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;将'姓名'字段拆分为'姓'和'名'&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;好处&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;避免数据冗余，便于查询和维护&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;第二范式 (2NF)&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;定义&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;满足1NF，且非主键字段完全依赖于主键&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;订单表中商品信息应该单独建表&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;好处&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;减少数据冗余，提高数据一致性&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;第三范式 (3NF)&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;定义&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;满足2NF，且非主键字段不依赖于其他非主键字段&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;员工表中部门信息应该单独建表&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;好处&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;进一步减少冗余，提高数据完整性&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> principle<span class="token punctuation">,</span> details <span class="token keyword">in</span> design_principles<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   </span><span class="token interpolation"><span class="token punctuation">{</span>principle<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> details<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 命名规范</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 命名规范:&quot;</span><span class="token punctuation">)</span>
    
    naming_conventions <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;表名&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;规则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用复数形式，小写字母，下划线分隔&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;users, user_profiles, order_items&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;避免&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;User, userProfile, OrderItem&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;字段名&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;规则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用小写字母，下划线分隔，见名知意&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;user_id, created_at, email_address&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;避免&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;userId, createdAt, email&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;索引名&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;规则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;idx_表名_字段名&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;idx_users_email, idx_orders_created_at&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;避免&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;index1, user_index&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;外键名&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;规则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;fk_表名_引用表名&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;fk_orders_users, fk_order_items_products&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;避免&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;foreign_key1, user_fk&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> category<span class="token punctuation">,</span> details <span class="token keyword">in</span> naming_conventions<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   </span><span class="token interpolation"><span class="token punctuation">{</span>category<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> details<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 数据类型选择</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 数据类型选择:&quot;</span><span class="token punctuation">)</span>
    
    data_type_guidelines <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;整数类型&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;TINYINT&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;0-255，适用于状态、类型等小范围值&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;INT&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;适用于ID、数量等常规整数&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;BIGINT&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;适用于大数值，如时间戳、大ID&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;字符串类型&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;CHAR&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;固定长度，适用于长度固定的字段如手机号&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;VARCHAR&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;可变长度，适用于姓名、邮箱等&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;TEXT&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;大文本，适用于文章内容、描述等&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;时间类型&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;DATE&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;仅日期，如生日&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;DATETIME&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;日期和时间，如创建时间&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;TIMESTAMP&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;时间戳，自动更新&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;数值类型&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;DECIMAL&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;精确小数，适用于金额&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;FLOAT/DOUBLE&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;浮点数，适用于科学计算&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> category<span class="token punctuation">,</span> types <span class="token keyword">in</span> data_type_guidelines<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   </span><span class="token interpolation"><span class="token punctuation">{</span>category<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> type_name<span class="token punctuation">,</span> usage <span class="token keyword">in</span> types<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>type_name<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>usage<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 索引设计</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 索引设计原则:&quot;</span><span class="token punctuation">)</span>
    
    index_guidelines <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;为经常用于WHERE条件的字段创建索引&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;为经常用于JOIN的字段创建索引&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;为经常用于ORDER BY的字段创建索引&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;避免在小表上创建过多索引&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;避免在频繁更新的字段上创建索引&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;考虑创建复合索引来优化多字段查询&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;定期分析和优化索引使用情况&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> guideline <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>index_guidelines<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>guideline<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 示例：电商系统数据库设计</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 电商系统数据库设计示例:&quot;</span><span class="token punctuation">)</span>
    
    ecommerce_tables <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;users&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;字段&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;password_hash&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;created_at&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;updated_at&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;索引&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;idx_users_email&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;idx_users_username&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;说明&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;用户基本信息表&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;user_profiles&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;字段&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;user_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;birth_date&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;avatar_url&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;索引&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;idx_user_profiles_user_id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;说明&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;用户详细信息表&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;categories&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;字段&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;parent_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sort_order&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;is_active&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;索引&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;idx_categories_parent_id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;说明&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;商品分类表（支持层级）&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;products&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;字段&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;stock&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;category_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;created_at&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;索引&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;idx_products_category_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;idx_products_price&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;说明&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;商品信息表&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;orders&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;字段&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;total_amount&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;created_at&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;updated_at&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;索引&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;idx_orders_user_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;idx_orders_status&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;idx_orders_created_at&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;说明&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;订单主表&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;order_items&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;字段&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;order_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;product_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;subtotal&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;索引&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;idx_order_items_order_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;idx_order_items_product_id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;说明&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;订单明细表&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> table_name<span class="token punctuation">,</span> details <span class="token keyword">in</span> ecommerce_tables<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   </span><span class="token interpolation"><span class="token punctuation">{</span>table_name<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     说明: </span><span class="token interpolation"><span class="token punctuation">{</span>details<span class="token punctuation">[</span><span class="token string">'说明'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     字段: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">', '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>details<span class="token punctuation">[</span><span class="token string">'字段'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     索引: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">', '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>details<span class="token punctuation">[</span><span class="token string">'索引'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 运行数据库设计演示</span>
database_design_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-2-性能优化策略"><a href="#_5-2-性能优化策略" class="header-anchor">#</a> 5.2 性能优化策略</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">database_performance_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库性能优化演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 数据库性能优化策略 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 1. 查询优化</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 查询优化策略:&quot;</span><span class="token punctuation">)</span>
    
    query_optimization <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;使用索引&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;原则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;为WHERE、JOIN、ORDER BY字段创建合适的索引&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;CREATE INDEX idx_users_email ON users(email)&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;注意&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;避免过多索引，影响写入性能&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;避免SELECT *&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;原则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;只查询需要的字段&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;好例子&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT id, name FROM users&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;坏例子&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT * FROM users&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;使用LIMIT&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;原则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;限制查询结果数量&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT * FROM products LIMIT 10 OFFSET 20&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;好处&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;减少内存使用和网络传输&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;优化JOIN&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;原则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用合适的JOIN类型，确保JOIN字段有索引&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;SELECT u.name, p.title FROM users u INNER JOIN posts p ON u.id = p.user_id&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;注意&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;避免不必要的JOIN操作&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> strategy<span class="token punctuation">,</span> details <span class="token keyword">in</span> query_optimization<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   </span><span class="token interpolation"><span class="token punctuation">{</span>strategy<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> details<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 索引优化</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 索引优化技巧:&quot;</span><span class="token punctuation">)</span>
    
    index_optimization <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;复合索引：将多个常一起查询的字段组合成复合索引&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;前缀索引：对于长字符串字段，使用前缀索引节省空间&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;覆盖索引：让索引包含查询所需的所有字段&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;部分索引：只为满足特定条件的行创建索引&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;定期维护：使用ANALYZE TABLE更新索引统计信息&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> tip <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>index_optimization<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>tip<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 连接池优化</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 连接池优化:&quot;</span><span class="token punctuation">)</span>
    
    connection_pool_tips <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;合理设置池大小&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;根据应用并发量设置合适的连接池大小&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;连接超时设置&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;设置合理的连接超时和空闲超时时间&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;连接验证&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;启用连接验证，确保连接可用性&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;监控连接使用&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;监控连接池使用情况，及时调整配置&quot;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> tip<span class="token punctuation">,</span> description <span class="token keyword">in</span> connection_pool_tips<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>tip<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 缓存策略</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 缓存策略:&quot;</span><span class="token punctuation">)</span>
    
    caching_strategies <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;查询结果缓存&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;适用场景&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;频繁查询且数据变化不频繁&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;实现方式&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Redis、Memcached&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;注意事项&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;设置合理的过期时间&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;对象缓存&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;适用场景&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;复杂对象的构建成本较高&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;实现方式&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;应用层缓存&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;注意事项&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;注意缓存一致性&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;页面缓存&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;适用场景&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;静态或半静态页面&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;实现方式&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;CDN、反向代理&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;注意事项&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;处理动态内容&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> strategy<span class="token punctuation">,</span> details <span class="token keyword">in</span> caching_strategies<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n   </span><span class="token interpolation"><span class="token punctuation">{</span>strategy<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> details<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 分库分表策略</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 分库分表策略:&quot;</span><span class="token punctuation">)</span>
    
    sharding_strategies <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;垂直分库&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;按业务模块分离数据库&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;水平分库&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;按数据量分离数据库&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;垂直分表&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;按字段使用频率分离表&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;水平分表&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;按数据量或时间分离表&quot;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> strategy<span class="token punctuation">,</span> description <span class="token keyword">in</span> sharding_strategies<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>strategy<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 监控和诊断</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n6. 性能监控指标:&quot;</span><span class="token punctuation">)</span>
    
    monitoring_metrics <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;查询响应时间&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;慢查询日志&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;连接数使用情况&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;缓存命中率&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;磁盘I/O使用率&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;CPU和内存使用率&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;锁等待时间&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;死锁检测&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> metric <span class="token keyword">in</span> monitoring_metrics<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>metric<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 7. 性能测试示例</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n7. 性能测试示例:&quot;</span><span class="token punctuation">)</span>
    
    performance_test_example <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
    # 使用Python进行简单的性能测试
    import time
    import sqlite3
    
    def performance_test():
        conn = sqlite3.connect(':memory:')
        cursor = conn.cursor()
        
        # 创建测试表
        cursor.execute('''</span>
            CREATE TABLE test_table <span class="token punctuation">(</span>
                <span class="token builtin">id</span> INTEGER PRIMARY KEY<span class="token punctuation">,</span>
                name TEXT<span class="token punctuation">,</span>
                value INTEGER
            <span class="token punctuation">)</span>
        <span class="token triple-quoted-string string">''')
        
        # 测试插入性能
        start_time = time.time()
        for i in range(10000):
            cursor.execute(&quot;INSERT INTO test_table (name, value) VALUES (?, ?)&quot;, 
                         (f'name_{i}', i))
        conn.commit()
        insert_time = time.time() - start_time
        
        # 测试查询性能
        start_time = time.time()
        cursor.execute(&quot;SELECT * FROM test_table WHERE value &gt; 5000&quot;)
        results = cursor.fetchall()
        query_time = time.time() - start_time
        
        print(f&quot;插入10000条记录耗时: {insert_time:.3f}秒&quot;)
        print(f&quot;查询耗时: {query_time:.3f}秒&quot;)
        print(f&quot;查询结果数量: {len(results)}&quot;)
        
        conn.close()
    '''</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   性能测试代码示例:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>performance_test_example<span class="token punctuation">)</span>

<span class="token comment"># 运行数据库性能优化演示</span>
database_performance_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_6-实际应用案例"><a href="#_6-实际应用案例" class="header-anchor">#</a> 6. 实际应用案例</h2> <h3 id="_6-1-用户管理系统"><a href="#_6-1-用户管理系统" class="header-anchor">#</a> 6.1 用户管理系统</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">user_management_system_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;用户管理系统演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 用户管理系统演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">import</span> sqlite3
    <span class="token keyword">import</span> hashlib
    <span class="token keyword">import</span> datetime
    <span class="token keyword">import</span> json
    
    <span class="token comment"># 1. 数据库初始化</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 初始化用户管理数据库:&quot;</span><span class="token punctuation">)</span>
    
    conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">':memory:'</span><span class="token punctuation">)</span>
    cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建用户表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE users (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            username VARCHAR(50) UNIQUE NOT NULL,
            email VARCHAR(100) UNIQUE NOT NULL,
            password_hash VARCHAR(64) NOT NULL,
            salt VARCHAR(32) NOT NULL,
            status INTEGER DEFAULT 1,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            last_login DATETIME,
            login_count INTEGER DEFAULT 0
        )
    '''</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建用户资料表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE user_profiles (
            user_id INTEGER PRIMARY KEY,
            first_name VARCHAR(50),
            last_name VARCHAR(50),
            phone VARCHAR(20),
            birth_date DATE,
            avatar_url VARCHAR(200),
            bio TEXT,
            FOREIGN KEY (user_id) REFERENCES users(id)
        )
    '''</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建登录日志表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE login_logs (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER,
            ip_address VARCHAR(45),
            user_agent TEXT,
            login_time DATETIME DEFAULT CURRENT_TIMESTAMP,
            success INTEGER DEFAULT 1,
            FOREIGN KEY (user_id) REFERENCES users(id)
        )
    '''</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建索引</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE INDEX idx_users_email ON users(email)'</span><span class="token punctuation">)</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE INDEX idx_users_username ON users(username)'</span><span class="token punctuation">)</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE INDEX idx_login_logs_user_id ON login_logs(user_id)'</span><span class="token punctuation">)</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE INDEX idx_login_logs_time ON login_logs(login_time)'</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建用户管理相关表和索引&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 用户注册功能</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 用户注册功能:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">register_user</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> first_name<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> last_name<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;用户注册&quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 生成盐值和密码哈希</span>
            <span class="token keyword">import</span> secrets
            salt <span class="token operator">=</span> secrets<span class="token punctuation">.</span>token_hex<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
            password_hash <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">(</span><span class="token punctuation">(</span>password <span class="token operator">+</span> salt<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment"># 插入用户基本信息</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                INSERT INTO users (username, email, password_hash, salt)
                VALUES (?, ?, ?, ?)
            '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password_hash<span class="token punctuation">,</span> salt<span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            user_id <span class="token operator">=</span> cursor<span class="token punctuation">.</span>lastrowid
            
            <span class="token comment"># 插入用户资料</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                INSERT INTO user_profiles (user_id, first_name, last_name)
                VALUES (?, ?, ?)
            '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token string">'user_id'</span><span class="token punctuation">:</span> user_id<span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'注册成功'</span><span class="token punctuation">}</span>
            
        <span class="token keyword">except</span> sqlite3<span class="token punctuation">.</span>IntegrityError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token string">'username'</span> <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'用户名已存在'</span><span class="token punctuation">}</span>
            <span class="token keyword">elif</span> <span class="token string">'email'</span> <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'邮箱已被注册'</span><span class="token punctuation">}</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'注册失败'</span><span class="token punctuation">}</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f'系统错误: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">}</span>
    
    <span class="token comment"># 注册测试用户</span>
    users_to_register <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'zhangsan@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password123'</span><span class="token punctuation">,</span> <span class="token string">'三'</span><span class="token punctuation">,</span> <span class="token string">'张'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token string">'lisi@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password456'</span><span class="token punctuation">,</span> <span class="token string">'四'</span><span class="token punctuation">,</span> <span class="token string">'李'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token string">'wangwu@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password789'</span><span class="token punctuation">,</span> <span class="token string">'五'</span><span class="token punctuation">,</span> <span class="token string">'王'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name <span class="token keyword">in</span> users_to_register<span class="token punctuation">:</span>
        result <span class="token operator">=</span> register_user<span class="token punctuation">(</span>username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   注册用户 </span><span class="token interpolation"><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 用户登录功能</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 用户登录功能:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">login_user</span><span class="token punctuation">(</span>username_or_email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> ip_address<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> user_agent<span class="token operator">=</span><span class="token string">'Python Client'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;用户登录&quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 查找用户</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                SELECT id, username, email, password_hash, salt, status
                FROM users
                WHERE username = ? OR email = ?
            '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>username_or_email<span class="token punctuation">,</span> username_or_email<span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            user <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token keyword">if</span> <span class="token keyword">not</span> user<span class="token punctuation">:</span>
                <span class="token comment"># 记录失败登录</span>
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                    INSERT INTO login_logs (user_id, ip_address, user_agent, success)
                    VALUES (NULL, ?, ?, 0)
                '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ip_address<span class="token punctuation">,</span> user_agent<span class="token punctuation">)</span><span class="token punctuation">)</span>
                conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'用户不存在'</span><span class="token punctuation">}</span>
            
            user_id<span class="token punctuation">,</span> username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> stored_hash<span class="token punctuation">,</span> salt<span class="token punctuation">,</span> status <span class="token operator">=</span> user
            
            <span class="token comment"># 检查用户状态</span>
            <span class="token keyword">if</span> status <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'账户已被禁用'</span><span class="token punctuation">}</span>
            
            <span class="token comment"># 验证密码</span>
            password_hash <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">(</span><span class="token punctuation">(</span>password <span class="token operator">+</span> salt<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token keyword">if</span> password_hash <span class="token operator">!=</span> stored_hash<span class="token punctuation">:</span>
                <span class="token comment"># 记录失败登录</span>
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                    INSERT INTO login_logs (user_id, ip_address, user_agent, success)
                    VALUES (?, ?, ?, 0)
                '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> ip_address<span class="token punctuation">,</span> user_agent<span class="token punctuation">)</span><span class="token punctuation">)</span>
                conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'密码错误'</span><span class="token punctuation">}</span>
            
            <span class="token comment"># 更新用户登录信息</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                UPDATE users
                SET last_login = CURRENT_TIMESTAMP,
                    login_count = login_count + 1,
                    updated_at = CURRENT_TIMESTAMP
                WHERE id = ?
            '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            <span class="token comment"># 记录成功登录</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                INSERT INTO login_logs (user_id, ip_address, user_agent, success)
                VALUES (?, ?, ?, 1)
            '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> ip_address<span class="token punctuation">,</span> user_agent<span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
                <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'登录成功'</span><span class="token punctuation">,</span>
                <span class="token string">'user'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    <span class="token string">'id'</span><span class="token punctuation">:</span> user_id<span class="token punctuation">,</span>
                    <span class="token string">'username'</span><span class="token punctuation">:</span> username<span class="token punctuation">,</span>
                    <span class="token string">'email'</span><span class="token punctuation">:</span> email
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f'登录失败: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">}</span>
    
    <span class="token comment"># 测试登录</span>
    login_tests <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'password123'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'lisi@example.com'</span><span class="token punctuation">,</span> <span class="token string">'password456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token string">'wrongpassword'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'nonexistent'</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> username<span class="token punctuation">,</span> password <span class="token keyword">in</span> login_tests<span class="token punctuation">:</span>
        result <span class="token operator">=</span> login_user<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   登录测试 </span><span class="token interpolation"><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 用户信息管理</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 用户信息管理:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_user_profile</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;获取用户完整信息&quot;&quot;&quot;</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
            SELECT u.id, u.username, u.email, u.status, u.created_at,
                   u.last_login, u.login_count,
                   p.first_name, p.last_name, p.phone, p.birth_date, p.bio
            FROM users u
            LEFT JOIN user_profiles p ON u.id = p.user_id
            WHERE u.id = ?
        '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        result <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> result<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token string">'id'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'username'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'email'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'status'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'created_at'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'last_login'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'login_count'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'first_name'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'last_name'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'phone'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'birth_date'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'bio'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>
    
    <span class="token keyword">def</span> <span class="token function">update_user_profile</span><span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;更新用户资料&quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 更新用户基本信息</span>
            <span class="token keyword">if</span> <span class="token string">'email'</span> <span class="token keyword">in</span> kwargs<span class="token punctuation">:</span>
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
                    UPDATE users SET email = ?, updated_at = CURRENT_TIMESTAMP
                    WHERE id = ?
                '''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>kwargs<span class="token punctuation">[</span><span class="token string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> user_id<span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            <span class="token comment"># 更新用户详细资料</span>
            profile_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'first_name'</span><span class="token punctuation">,</span> <span class="token string">'last_name'</span><span class="token punctuation">,</span> <span class="token string">'phone'</span><span class="token punctuation">,</span> <span class="token string">'birth_date'</span><span class="token punctuation">,</span> <span class="token string">'bio'</span><span class="token punctuation">]</span>
            profile_updates <span class="token operator">=</span> <span class="token punctuation">{</span>k<span class="token punctuation">:</span> v <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> kwargs<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> k <span class="token keyword">in</span> profile_fields<span class="token punctuation">}</span>
            
            <span class="token keyword">if</span> profile_updates<span class="token punctuation">:</span>
                set_clause <span class="token operator">=</span> <span class="token string">', '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>k<span class="token punctuation">}</span></span><span class="token string"> = ?'</span></span> <span class="token keyword">for</span> k <span class="token keyword">in</span> profile_updates<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                values <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>profile_updates<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">[</span>user_id<span class="token punctuation">]</span>
                
                cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'''
                    UPDATE user_profiles SET </span><span class="token interpolation"><span class="token punctuation">{</span>set_clause<span class="token punctuation">}</span></span><span class="token string">
                    WHERE user_id = ?
                '''</span></span><span class="token punctuation">,</span> values<span class="token punctuation">)</span>
            
            conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'资料更新成功'</span><span class="token punctuation">}</span>
            
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f'更新失败: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">}</span>
    
    <span class="token comment"># 测试用户信息管理</span>
    user_profile <span class="token operator">=</span> get_user_profile<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> user_profile<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   用户信息: </span><span class="token interpolation"><span class="token punctuation">{</span>user_profile<span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token punctuation">{</span>user_profile<span class="token punctuation">[</span><span class="token string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   登录次数: </span><span class="token interpolation"><span class="token punctuation">{</span>user_profile<span class="token punctuation">[</span><span class="token string">'login_count'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 更新用户资料</span>
    update_result <span class="token operator">=</span> update_user_profile<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> phone<span class="token operator">=</span><span class="token string">'13800138000'</span><span class="token punctuation">,</span> bio<span class="token operator">=</span><span class="token string">'Python开发者'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   更新资料: </span><span class="token interpolation"><span class="token punctuation">{</span>update_result<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 统计分析</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 用户统计分析:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_user_statistics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;获取用户统计信息&quot;&quot;&quot;</span>
        stats <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        
        <span class="token comment"># 总用户数</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'SELECT COUNT(*) FROM users'</span><span class="token punctuation">)</span>
        stats<span class="token punctuation">[</span><span class="token string">'total_users'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        
        <span class="token comment"># 活跃用户数（状态为1）</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'SELECT COUNT(*) FROM users WHERE status = 1'</span><span class="token punctuation">)</span>
        stats<span class="token punctuation">[</span><span class="token string">'active_users'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        
        <span class="token comment"># 今日登录用户数</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
            SELECT COUNT(DISTINCT user_id)
            FROM login_logs
            WHERE DATE(login_time) = DATE('now') AND success = 1
        '''</span><span class="token punctuation">)</span>
        stats<span class="token punctuation">[</span><span class="token string">'today_logins'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        
        <span class="token comment"># 平均登录次数</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'SELECT AVG(login_count) FROM users WHERE login_count &gt; 0'</span><span class="token punctuation">)</span>
        avg_logins <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        stats<span class="token punctuation">[</span><span class="token string">'avg_login_count'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>avg_logins<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">if</span> avg_logins <span class="token keyword">else</span> <span class="token number">0</span>
        
        <span class="token comment"># 最近注册的用户</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
            SELECT username, created_at
            FROM users
            ORDER BY created_at DESC
            LIMIT 3
        '''</span><span class="token punctuation">)</span>
        stats<span class="token punctuation">[</span><span class="token string">'recent_users'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> stats
    
    stats <span class="token operator">=</span> get_user_statistics<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   总用户数: </span><span class="token interpolation"><span class="token punctuation">{</span>stats<span class="token punctuation">[</span><span class="token string">'total_users'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   活跃用户数: </span><span class="token interpolation"><span class="token punctuation">{</span>stats<span class="token punctuation">[</span><span class="token string">'active_users'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   今日登录: </span><span class="token interpolation"><span class="token punctuation">{</span>stats<span class="token punctuation">[</span><span class="token string">'today_logins'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   平均登录次数: </span><span class="token interpolation"><span class="token punctuation">{</span>stats<span class="token punctuation">[</span><span class="token string">'avg_login_count'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   最近注册用户:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> username<span class="token punctuation">,</span> created_at <span class="token keyword">in</span> stats<span class="token punctuation">[</span><span class="token string">'recent_users'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token punctuation">{</span>created_at<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 清理资源</span>
    conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   ✓ 用户管理系统演示完成&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 运行用户管理系统演示</span>
user_management_system_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_6-2-数据分析系统"><a href="#_6-2-数据分析系统" class="header-anchor">#</a> 6.2 数据分析系统</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">data_analysis_system_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;数据分析系统演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 数据分析系统演示 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">import</span> sqlite3
    <span class="token keyword">import</span> random
    <span class="token keyword">import</span> datetime
    <span class="token keyword">from</span> datetime <span class="token keyword">import</span> timedelta
    
    <span class="token comment"># 1. 创建销售数据分析数据库</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 创建销售数据分析数据库:&quot;</span><span class="token punctuation">)</span>
    
    conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">':memory:'</span><span class="token punctuation">)</span>
    cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建产品表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE products (
            id INTEGER PRIMARY KEY,
            name VARCHAR(100) NOT NULL,
            category VARCHAR(50),
            price DECIMAL(10,2),
            cost DECIMAL(10,2),
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    '''</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建销售记录表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE sales (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            product_id INTEGER,
            quantity INTEGER,
            unit_price DECIMAL(10,2),
            total_amount DECIMAL(10,2),
            sale_date DATE,
            customer_id INTEGER,
            region VARCHAR(50),
            FOREIGN KEY (product_id) REFERENCES products(id)
        )
    '''</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建客户表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE customers (
            id INTEGER PRIMARY KEY,
            name VARCHAR(100),
            email VARCHAR(100),
            region VARCHAR(50),
            registration_date DATE
        )
    '''</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建索引</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE INDEX idx_sales_date ON sales(sale_date)'</span><span class="token punctuation">)</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE INDEX idx_sales_product ON sales(product_id)'</span><span class="token punctuation">)</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE INDEX idx_sales_customer ON sales(customer_id)'</span><span class="token punctuation">)</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE INDEX idx_sales_region ON sales(region)'</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   ✓ 创建销售分析相关表和索引&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 生成测试数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 生成测试数据:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 插入产品数据</span>
    products <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'笔记本电脑'</span><span class="token punctuation">,</span> <span class="token string">'电子产品'</span><span class="token punctuation">,</span> <span class="token number">5999.00</span><span class="token punctuation">,</span> <span class="token number">4500.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'无线鼠标'</span><span class="token punctuation">,</span> <span class="token string">'电子产品'</span><span class="token punctuation">,</span> <span class="token number">199.00</span><span class="token punctuation">,</span> <span class="token number">120.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'机械键盘'</span><span class="token punctuation">,</span> <span class="token string">'电子产品'</span><span class="token punctuation">,</span> <span class="token number">399.00</span><span class="token punctuation">,</span> <span class="token number">250.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'显示器'</span><span class="token punctuation">,</span> <span class="token string">'电子产品'</span><span class="token punctuation">,</span> <span class="token number">1299.00</span><span class="token punctuation">,</span> <span class="token number">900.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'办公椅'</span><span class="token punctuation">,</span> <span class="token string">'办公用品'</span><span class="token punctuation">,</span> <span class="token number">899.00</span><span class="token punctuation">,</span> <span class="token number">600.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'办公桌'</span><span class="token punctuation">,</span> <span class="token string">'办公用品'</span><span class="token punctuation">,</span> <span class="token number">1599.00</span><span class="token punctuation">,</span> <span class="token number">1000.00</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
    
    cursor<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        INSERT INTO products (id, name, category, price, cost)
        VALUES (?, ?, ?, ?, ?)
    '''</span><span class="token punctuation">,</span> products<span class="token punctuation">)</span>
    
    <span class="token comment"># 插入客户数据</span>
    customers <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'张三公司'</span><span class="token punctuation">,</span> <span class="token string">'zhangsan@company.com'</span><span class="token punctuation">,</span> <span class="token string">'北京'</span><span class="token punctuation">,</span> <span class="token string">'2023-01-15'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'李四企业'</span><span class="token punctuation">,</span> <span class="token string">'lisi@enterprise.com'</span><span class="token punctuation">,</span> <span class="token string">'上海'</span><span class="token punctuation">,</span> <span class="token string">'2023-02-20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'王五集团'</span><span class="token punctuation">,</span> <span class="token string">'wangwu@group.com'</span><span class="token punctuation">,</span> <span class="token string">'广州'</span><span class="token punctuation">,</span> <span class="token string">'2023-03-10'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'赵六科技'</span><span class="token punctuation">,</span> <span class="token string">'zhaoliu@tech.com'</span><span class="token punctuation">,</span> <span class="token string">'深圳'</span><span class="token punctuation">,</span> <span class="token string">'2023-04-05'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'钱七贸易'</span><span class="token punctuation">,</span> <span class="token string">'qianqi@trade.com'</span><span class="token punctuation">,</span> <span class="token string">'杭州'</span><span class="token punctuation">,</span> <span class="token string">'2023-05-12'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
    
    cursor<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        INSERT INTO customers (id, name, email, region, registration_date)
        VALUES (?, ?, ?, ?, ?)
    '''</span><span class="token punctuation">,</span> customers<span class="token punctuation">)</span>
    
    <span class="token comment"># 生成销售数据</span>
    regions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'北京'</span><span class="token punctuation">,</span> <span class="token string">'上海'</span><span class="token punctuation">,</span> <span class="token string">'广州'</span><span class="token punctuation">,</span> <span class="token string">'深圳'</span><span class="token punctuation">,</span> <span class="token string">'杭州'</span><span class="token punctuation">]</span>
    start_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    end_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span>
    
    sales_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 生成500条销售记录</span>
        product_id <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
        customer_id <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
        quantity <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 获取产品价格</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'SELECT price FROM products WHERE id = ?'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>product_id<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        unit_price <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        
        <span class="token comment"># 添加一些价格波动</span>
        unit_price <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>unit_price<span class="token punctuation">)</span> <span class="token operator">*</span> random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span>
        total_amount <span class="token operator">=</span> unit_price <span class="token operator">*</span> quantity
        
        <span class="token comment"># 随机日期</span>
        days_diff <span class="token operator">=</span> <span class="token punctuation">(</span>end_date <span class="token operator">-</span> start_date<span class="token punctuation">)</span><span class="token punctuation">.</span>days
        random_days <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> days_diff<span class="token punctuation">)</span>
        sale_date <span class="token operator">=</span> start_date <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span>random_days<span class="token punctuation">)</span>
        
        region <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>regions<span class="token punctuation">)</span>
        
        sales_data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>
            product_id<span class="token punctuation">,</span> quantity<span class="token punctuation">,</span> unit_price<span class="token punctuation">,</span> total_amount<span class="token punctuation">,</span>
            sale_date<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> customer_id<span class="token punctuation">,</span> region
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    cursor<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        INSERT INTO sales (product_id, quantity, unit_price, total_amount, sale_date, customer_id, region)
        VALUES (?, ?, ?, ?, ?, ?, ?)
    '''</span><span class="token punctuation">,</span> sales_data<span class="token punctuation">)</span>
    
    conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ✓ 生成 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个产品, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>customers<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 个客户, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>sales_data<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> 条销售记录&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 销售数据分析</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 销售数据分析:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 总销售额</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'SELECT SUM(total_amount) FROM sales'</span><span class="token punctuation">)</span>
    total_sales <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   总销售额: ¥</span><span class="token interpolation"><span class="token punctuation">{</span>total_sales<span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 按月份统计销售额</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        SELECT strftime('%Y-%m', sale_date) as month,
               SUM(total_amount) as monthly_sales,
               COUNT(*) as order_count
        FROM sales
        GROUP BY strftime('%Y-%m', sale_date)
        ORDER BY month
    '''</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   月度销售统计:&quot;</span><span class="token punctuation">)</span>
    monthly_data <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> month<span class="token punctuation">,</span> sales<span class="token punctuation">,</span> orders <span class="token keyword">in</span> monthly_data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># 显示前6个月</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>month<span class="token punctuation">}</span></span><span class="token string">: ¥</span><span class="token interpolation"><span class="token punctuation">{</span>sales<span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token punctuation">{</span>orders<span class="token punctuation">}</span></span><span class="token string"> 笔订单)&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 按产品类别统计</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        SELECT p.category,
               SUM(s.total_amount) as category_sales,
               SUM(s.quantity) as total_quantity,
               COUNT(s.id) as order_count
        FROM sales s
        JOIN products p ON s.product_id = p.id
        GROUP BY p.category
        ORDER BY category_sales DESC
    '''</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   产品类别销售统计:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> category<span class="token punctuation">,</span> sales<span class="token punctuation">,</span> quantity<span class="token punctuation">,</span> orders <span class="token keyword">in</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>category<span class="token punctuation">}</span></span><span class="token string">: ¥</span><span class="token interpolation"><span class="token punctuation">{</span>sales<span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string"> (数量: </span><span class="token interpolation"><span class="token punctuation">{</span>quantity<span class="token punctuation">}</span></span><span class="token string">, 订单: </span><span class="token interpolation"><span class="token punctuation">{</span>orders<span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 按地区统计</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        SELECT region,
               SUM(total_amount) as region_sales,
               COUNT(*) as order_count,
               AVG(total_amount) as avg_order_value
        FROM sales
        GROUP BY region
        ORDER BY region_sales DESC
    '''</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   地区销售统计:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> region<span class="token punctuation">,</span> sales<span class="token punctuation">,</span> orders<span class="token punctuation">,</span> avg_value <span class="token keyword">in</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>region<span class="token punctuation">}</span></span><span class="token string">: ¥</span><span class="token interpolation"><span class="token punctuation">{</span>sales<span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token punctuation">{</span>orders<span class="token punctuation">}</span></span><span class="token string"> 笔, 平均: ¥</span><span class="token interpolation"><span class="token punctuation">{</span>avg_value<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 高级分析查询</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 高级分析查询:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 最畅销产品</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        SELECT p.name,
               SUM(s.quantity) as total_sold,
               SUM(s.total_amount) as total_revenue,
               COUNT(s.id) as order_count
        FROM sales s
        JOIN products p ON s.product_id = p.id
        GROUP BY p.id, p.name
        ORDER BY total_sold DESC
        LIMIT 3
    '''</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   最畅销产品 TOP 3:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> name<span class="token punctuation">,</span> sold<span class="token punctuation">,</span> revenue<span class="token punctuation">,</span> orders <span class="token keyword">in</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">: 销量 </span><span class="token interpolation"><span class="token punctuation">{</span>sold<span class="token punctuation">}</span></span><span class="token string">, 收入 ¥</span><span class="token interpolation"><span class="token punctuation">{</span>revenue<span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string">, 订单 </span><span class="token interpolation"><span class="token punctuation">{</span>orders<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 客户价值分析</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        SELECT c.name,
               SUM(s.total_amount) as customer_value,
               COUNT(s.id) as order_count,
               AVG(s.total_amount) as avg_order_value,
               MAX(s.sale_date) as last_purchase
        FROM sales s
        JOIN customers c ON s.customer_id = c.id
        GROUP BY c.id, c.name
        ORDER BY customer_value DESC
        LIMIT 3
    '''</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   高价值客户 TOP 3:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> orders<span class="token punctuation">,</span> avg_value<span class="token punctuation">,</span> last_purchase <span class="token keyword">in</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">: 总价值 ¥</span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>orders<span class="token punctuation">}</span></span><span class="token string"> 笔订单, 最后购买 </span><span class="token interpolation"><span class="token punctuation">{</span>last_purchase<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 季度趋势分析</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        SELECT 
            CASE 
                WHEN strftime('%m', sale_date) IN ('01','02','03') THEN 'Q1'
                WHEN strftime('%m', sale_date) IN ('04','05','06') THEN 'Q2'
                WHEN strftime('%m', sale_date) IN ('07','08','09') THEN 'Q3'
                ELSE 'Q4'
            END as quarter,
            SUM(total_amount) as quarterly_sales,
            COUNT(*) as order_count
        FROM sales
        WHERE strftime('%Y', sale_date) = '2023'
        GROUP BY quarter
        ORDER BY quarter
    '''</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   2023年季度销售趋势:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> quarter<span class="token punctuation">,</span> sales<span class="token punctuation">,</span> orders <span class="token keyword">in</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>quarter<span class="token punctuation">}</span></span><span class="token string">: ¥</span><span class="token interpolation"><span class="token punctuation">{</span>sales<span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token punctuation">{</span>orders<span class="token punctuation">}</span></span><span class="token string"> 笔订单)&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 利润分析</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 利润分析:&quot;</span><span class="token punctuation">)</span>
    
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        SELECT p.name,
               SUM(s.quantity) as total_sold,
               SUM(s.total_amount) as revenue,
               SUM(s.quantity * p.cost) as total_cost,
               SUM(s.total_amount) - SUM(s.quantity * p.cost) as profit,
               (SUM(s.total_amount) - SUM(s.quantity * p.cost)) / SUM(s.total_amount) * 100 as profit_margin
        FROM sales s
        JOIN products p ON s.product_id = p.id
        GROUP BY p.id, p.name
        ORDER BY profit DESC
    '''</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   产品利润分析:&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> name<span class="token punctuation">,</span> sold<span class="token punctuation">,</span> revenue<span class="token punctuation">,</span> cost<span class="token punctuation">,</span> profit<span class="token punctuation">,</span> margin <span class="token keyword">in</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     </span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">: 利润 ¥</span><span class="token interpolation"><span class="token punctuation">{</span>profit<span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string">, 利润率 </span><span class="token interpolation"><span class="token punctuation">{</span>margin<span class="token punctuation">:</span><span class="token format-spec">.1f</span><span class="token punctuation">}</span></span><span class="token string">%&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 清理资源</span>
    conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   ✓ 数据分析系统演示完成&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 运行数据分析系统演示</span>
data_analysis_system_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_7-最佳实践和安全"><a href="#_7-最佳实践和安全" class="header-anchor">#</a> 7. 最佳实践和安全</h2> <h3 id="_7-1-数据库安全最佳实践"><a href="#_7-1-数据库安全最佳实践" class="header-anchor">#</a> 7.1 数据库安全最佳实践</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">database_security_demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库安全最佳实践演示&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 数据库安全最佳实践 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 1. SQL注入防护</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. SQL注入防护:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">import</span> sqlite3
    
    conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">':memory:'</span><span class="token punctuation">)</span>
    cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建测试表</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
        CREATE TABLE users (
            id INTEGER PRIMARY KEY,
            username VARCHAR(50),
            password VARCHAR(100)
        )
    '''</span><span class="token punctuation">)</span>
    
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO users (username, password) VALUES ('admin', 'secret123')&quot;</span><span class="token punctuation">)</span>
    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO users (username, password) VALUES ('user1', 'password456')&quot;</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 错误的做法（容易SQL注入）</span>
    <span class="token keyword">def</span> <span class="token function">unsafe_login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;不安全的登录方法（仅用于演示）&quot;&quot;&quot;</span>
        query <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;SELECT * FROM users WHERE username = '</span><span class="token interpolation"><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span><span class="token string">' AND password = '</span><span class="token interpolation"><span class="token punctuation">{</span>password<span class="token punctuation">}</span></span><span class="token string">'&quot;</span></span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   ⚠️ 不安全的查询: </span><span class="token interpolation"><span class="token punctuation">{</span>query<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token comment"># 注意：这里只是演示，实际不执行</span>
        <span class="token keyword">return</span> <span class="token string">&quot;不安全的查询方式&quot;</span>
    
    <span class="token comment"># 正确的做法（使用参数化查询）</span>
    <span class="token keyword">def</span> <span class="token function">safe_login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;安全的登录方法&quot;&quot;&quot;</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM users WHERE username = ? AND password = ?&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">)</span>
        result <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> result <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   安全登录演示:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 正常登录</span>
    <span class="token keyword">if</span> safe_login<span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token string">'secret123'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 正常登录成功&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 模拟SQL注入尝试</span>
    malicious_input <span class="token operator">=</span> <span class="token string">&quot;admin'; DROP TABLE users; --&quot;</span>
    unsafe_login<span class="token punctuation">(</span>malicious_input<span class="token punctuation">,</span> <span class="token string">&quot;anything&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 参数化查询防止了SQL注入&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 密码安全</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 密码安全处理:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">import</span> hashlib
    <span class="token keyword">import</span> secrets
    <span class="token keyword">import</span> bcrypt
    
    <span class="token keyword">def</span> <span class="token function">hash_password_simple</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;简单的密码哈希（不推荐用于生产）&quot;&quot;&quot;</span>
        salt <span class="token operator">=</span> secrets<span class="token punctuation">.</span>token_hex<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
        password_hash <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">(</span><span class="token punctuation">(</span>password <span class="token operator">+</span> salt<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> salt<span class="token punctuation">,</span> password_hash
    
    <span class="token keyword">def</span> <span class="token function">hash_password_bcrypt</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;使用bcrypt哈希密码（推荐）&quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 生成盐并哈希密码</span>
            salt <span class="token operator">=</span> bcrypt<span class="token punctuation">.</span>gensalt<span class="token punctuation">(</span><span class="token punctuation">)</span>
            password_hash <span class="token operator">=</span> bcrypt<span class="token punctuation">.</span>hashpw<span class="token punctuation">(</span>password<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> salt<span class="token punctuation">)</span>
            <span class="token keyword">return</span> password_hash<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> ImportError<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ⚠️ bcrypt未安装，使用简单哈希方法&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> hash_password_simple<span class="token punctuation">(</span>password<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">verify_password_bcrypt</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> hashed<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;验证bcrypt哈希密码&quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> bcrypt<span class="token punctuation">.</span>checkpw<span class="token punctuation">(</span>password<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hashed<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> ImportError<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
    
    <span class="token comment"># 演示密码哈希</span>
    test_password <span class="token operator">=</span> <span class="token string">&quot;mySecurePassword123!&quot;</span>
    
    <span class="token comment"># 简单哈希方法</span>
    salt<span class="token punctuation">,</span> simple_hash <span class="token operator">=</span> hash_password_simple<span class="token punctuation">(</span>test_password<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   简单哈希: </span><span class="token interpolation"><span class="token punctuation">{</span>simple_hash<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token format-spec">20]</span><span class="token punctuation">}</span></span><span class="token string">...&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># bcrypt方法（如果可用）</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        bcrypt_hash <span class="token operator">=</span> hash_password_bcrypt<span class="token punctuation">(</span>test_password<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   bcrypt哈希: </span><span class="token interpolation"><span class="token punctuation">{</span>bcrypt_hash<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token format-spec">20]</span><span class="token punctuation">}</span></span><span class="token string">...&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 验证密码</span>
        <span class="token keyword">if</span> verify_password_bcrypt<span class="token punctuation">(</span>test_password<span class="token punctuation">,</span> bcrypt_hash<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 密码验证成功&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ⚠️ bcrypt不可用，建议安装: pip install bcrypt&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 数据库连接安全</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 数据库连接安全:&quot;</span><span class="token punctuation">)</span>
    
    connection_security_tips <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;使用SSL/TLS&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;确保数据库连接使用加密传输&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;最小权限原则&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;为应用程序创建专用数据库用户，只授予必要权限&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;连接字符串保护&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;不要在代码中硬编码数据库凭据&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;连接池配置&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;合理配置连接池，避免连接泄露&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;网络隔离&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;将数据库服务器放在私有网络中&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;定期更新&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;保持数据库软件和驱动程序最新&quot;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> tip<span class="token punctuation">,</span> description <span class="token keyword">in</span> connection_security_tips<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>tip<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 数据加密</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 敏感数据加密:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">from</span> cryptography<span class="token punctuation">.</span>fernet <span class="token keyword">import</span> Fernet
    
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 生成加密密钥</span>
        key <span class="token operator">=</span> Fernet<span class="token punctuation">.</span>generate_key<span class="token punctuation">(</span><span class="token punctuation">)</span>
        cipher_suite <span class="token operator">=</span> Fernet<span class="token punctuation">(</span>key<span class="token punctuation">)</span>
        
        <span class="token comment"># 加密敏感数据</span>
        sensitive_data <span class="token operator">=</span> <span class="token string">&quot;用户身份证号: 123456789012345678&quot;</span>
        encrypted_data <span class="token operator">=</span> cipher_suite<span class="token punctuation">.</span>encrypt<span class="token punctuation">(</span>sensitive_data<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   原始数据: </span><span class="token interpolation"><span class="token punctuation">{</span>sensitive_data<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   加密数据: </span><span class="token interpolation"><span class="token punctuation">{</span>encrypted_data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token format-spec">30]</span><span class="token punctuation">}</span></span><span class="token string">...&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token comment"># 解密数据</span>
        decrypted_data <span class="token operator">=</span> cipher_suite<span class="token punctuation">.</span>decrypt<span class="token punctuation">(</span>encrypted_data<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   解密数据: </span><span class="token interpolation"><span class="token punctuation">{</span>decrypted_data<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 数据加密/解密成功&quot;</span><span class="token punctuation">)</span>
        
    <span class="token keyword">except</span> ImportError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ⚠️ cryptography库未安装，建议安装: pip install cryptography&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 使用简单的base64编码作为演示（不安全）</span>
        <span class="token keyword">import</span> base64
        sensitive_data <span class="token operator">=</span> <span class="token string">&quot;演示数据&quot;</span>
        encoded <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span>sensitive_data<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span>
        decoded <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>encoded<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   Base64编码演示: </span><span class="token interpolation"><span class="token punctuation">{</span>encoded<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ⚠️ Base64不是加密，仅用于演示&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 5. 审计和日志</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n5. 数据库审计和日志:&quot;</span><span class="token punctuation">)</span>
    
    <span class="token keyword">import</span> logging
    <span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
    
    <span class="token comment"># 配置日志</span>
    logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>
        level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">,</span>
        <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'%(asctime)s - %(levelname)s - %(message)s'</span>
    <span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">log_database_operation</span><span class="token punctuation">(</span>operation<span class="token punctuation">,</span> table<span class="token punctuation">,</span> user_id<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> details<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;记录数据库操作日志&quot;&quot;&quot;</span>
        log_entry <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'timestamp'</span><span class="token punctuation">:</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isoformat<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">'operation'</span><span class="token punctuation">:</span> operation<span class="token punctuation">,</span>
            <span class="token string">'table'</span><span class="token punctuation">:</span> table<span class="token punctuation">,</span>
            <span class="token string">'user_id'</span><span class="token punctuation">:</span> user_id<span class="token punctuation">,</span>
            <span class="token string">'details'</span><span class="token punctuation">:</span> details
        <span class="token punctuation">}</span>
        logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;DB Operation: </span><span class="token interpolation"><span class="token punctuation">{</span>log_entry<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 演示日志记录</span>
    log_database_operation<span class="token punctuation">(</span><span class="token string">'SELECT'</span><span class="token punctuation">,</span> <span class="token string">'users'</span><span class="token punctuation">,</span> user_id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> details<span class="token operator">=</span><span class="token string">'Login attempt'</span><span class="token punctuation">)</span>
    log_database_operation<span class="token punctuation">(</span><span class="token string">'UPDATE'</span><span class="token punctuation">,</span> <span class="token string">'user_profiles'</span><span class="token punctuation">,</span> user_id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> details<span class="token operator">=</span><span class="token string">'Profile update'</span><span class="token punctuation">)</span>
    log_database_operation<span class="token punctuation">(</span><span class="token string">'DELETE'</span><span class="token punctuation">,</span> <span class="token string">'sessions'</span><span class="token punctuation">,</span> user_id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> details<span class="token operator">=</span><span class="token string">'Logout'</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 数据库操作日志记录完成&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 备份和恢复</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n6. 数据备份策略:&quot;</span><span class="token punctuation">)</span>
    
    backup_strategies <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;定期备份&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;设置自动化的定期备份任务&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;增量备份&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;结合全量备份和增量备份&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;异地备份&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;将备份存储在不同的地理位置&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;备份测试&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;定期测试备份的完整性和可恢复性&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;版本控制&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;保留多个备份版本&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;加密备份&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;对备份文件进行加密保护&quot;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> strategy<span class="token punctuation">,</span> description <span class="token keyword">in</span> backup_strategies<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>strategy<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 简单的SQLite备份演示</span>
    <span class="token keyword">def</span> <span class="token function">backup_sqlite_database</span><span class="token punctuation">(</span>source_db<span class="token punctuation">,</span> backup_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;SQLite数据库备份&quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">import</span> shutil
            shutil<span class="token punctuation">.</span>copy2<span class="token punctuation">(</span>source_db<span class="token punctuation">,</span> backup_path<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;备份失败: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;     ✓ 数据库备份策略说明完成&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 清理资源</span>
    conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n   ✓ 数据库安全最佳实践演示完成&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 运行数据库安全演示</span>
database_security_demo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_8-学习建议和总结"><a href="#_8-学习建议和总结" class="header-anchor">#</a> 8. 学习建议和总结</h2> <h3 id="_8-1-学习路径"><a href="#_8-1-学习路径" class="header-anchor">#</a> 8.1 学习路径</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">learning_path_guide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库学习路径指南&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== Python数据库编程学习路径 ===&quot;</span><span class="token punctuation">)</span>
    
    learning_stages <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;初级阶段 (1-2周)&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;目标&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;掌握基础数据库操作&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;内容&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;理解数据库基本概念&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;学习SQL基础语法&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;掌握Python DB-API 2.0规范&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;练习SQLite基础操作&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;学习CRUD操作&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;实践项目&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;简单的联系人管理系统&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;中级阶段 (2-3周)&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;目标&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;掌握高级数据库功能&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;内容&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;学习事务处理&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;掌握连接池使用&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;理解索引和查询优化&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;学习MySQL/PostgreSQL操作&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;掌握数据库设计原则&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;实践项目&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;博客系统或电商系统&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;高级阶段 (3-4周)&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;目标&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;掌握ORM和高级特性&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;内容&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;学习SQLAlchemy ORM&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;掌握数据库迁移&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;学习性能优化技巧&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;理解数据库安全&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;掌握分布式数据库概念&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;实践项目&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;完整的Web应用后端&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;专家阶段 (持续学习)&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;目标&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;深入理解数据库架构&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;内容&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;学习数据库内部原理&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;掌握分库分表策略&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;学习NoSQL数据库&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;理解大数据处理&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;掌握数据库运维&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;实践项目&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;高并发分布式系统&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> stage<span class="token punctuation">,</span> details <span class="token keyword">in</span> learning_stages<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n</span><span class="token interpolation"><span class="token punctuation">{</span>stage<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   目标: </span><span class="token interpolation"><span class="token punctuation">{</span>details<span class="token punctuation">[</span><span class="token string">'目标'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;   学习内容:&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> content <span class="token keyword">in</span> details<span class="token punctuation">[</span><span class="token string">'内容'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;     • </span><span class="token interpolation"><span class="token punctuation">{</span>content<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   实践项目: </span><span class="token interpolation"><span class="token punctuation">{</span>details<span class="token punctuation">[</span><span class="token string">'实践项目'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 运行学习路径指南</span>
learning_path_guide<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_8-2-最佳实践总结"><a href="#_8-2-最佳实践总结" class="header-anchor">#</a> 8.2 最佳实践总结</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">best_practices_summary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;数据库编程最佳实践总结&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 数据库编程最佳实践总结 ===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 1. 代码组织</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n1. 代码组织最佳实践:&quot;</span><span class="token punctuation">)</span>
    
    code_organization <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;使用数据访问对象(DAO)模式分离数据访问逻辑&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;创建数据库连接管理器统一管理连接&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;使用配置文件管理数据库连接参数&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;实现统一的异常处理机制&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;编写可重用的数据库操作工具函数&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;使用类型提示提高代码可读性&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;编写完整的文档和注释&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> practice <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>code_organization<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>practice<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 性能优化</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n2. 性能优化最佳实践:&quot;</span><span class="token punctuation">)</span>
    
    performance_tips <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;使用连接池避免频繁创建连接&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;合理使用索引优化查询性能&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;避免N+1查询问题&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;使用批量操作处理大量数据&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;实现查询结果缓存&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;定期分析和优化慢查询&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;使用分页避免大结果集&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> tip <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>performance_tips<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>tip<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 安全实践</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n3. 安全最佳实践:&quot;</span><span class="token punctuation">)</span>
    
    security_practices <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;始终使用参数化查询防止SQL注入&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;对敏感数据进行加密存储&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;使用强密码哈希算法&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;实施最小权限原则&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;启用数据库连接加密&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;定期备份和测试恢复&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;记录和监控数据库访问日志&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> practice <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>security_practices<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>practice<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 4. 错误处理</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n4. 错误处理最佳实践:&quot;</span><span class="token punctuation">)</span>
    
    error_handling <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;使用try-catch块处理数据库异常&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;实现事务回滚机制&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;提供有意义的错误消息&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;记录详细的错误日志&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;实现重试机制处理临时故障&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;优雅地处理连接超时&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;避免向用户暴露敏感错误信息&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> practice <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>error_handling<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>practice<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 运行最佳实践总结</span>
best_practices_summary<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_8-3-常见陷阱和解决方案"><a href="#_8-3-常见陷阱和解决方案" class="header-anchor">#</a> 8.3 常见陷阱和解决方案</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">common_pitfalls_and_solutions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;常见陷阱和解决方案&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 常见陷阱和解决方案 ===&quot;</span><span class="token punctuation">)</span>
    
    pitfalls <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;连接泄露&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;问题&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;忘记关闭数据库连接导致连接池耗尽&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;解决方案&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用with语句或try-finally确保连接关闭&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;with get_connection() as conn: # 自动关闭连接&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;SQL注入&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;问题&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;直接拼接SQL字符串导致安全漏洞&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;解决方案&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用参数化查询或ORM&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;cursor.execute('SELECT * FROM users WHERE id = ?', (user_id,))&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;N+1查询&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;问题&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;在循环中执行查询导致性能问题&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;解决方案&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用JOIN查询或预加载&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用SQLAlchemy的joinedload或selectinload&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;事务管理&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;问题&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;忘记提交事务或处理回滚&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;解决方案&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用上下文管理器自动管理事务&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用@contextmanager装饰器创建事务管理器&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;字符编码&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;问题&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;中文字符显示乱码&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;解决方案&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;确保数据库、连接和Python使用相同编码&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;连接字符串中指定charset=utf8mb4&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;时区问题&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;问题&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;时间数据在不同时区显示错误&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;解决方案&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;统一使用UTC时间或明确指定时区&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;示例&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;使用datetime.utcnow()和时区转换&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> pitfall<span class="token punctuation">,</span> details <span class="token keyword">in</span> pitfalls<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n</span><span class="token interpolation"><span class="token punctuation">{</span>pitfall<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   问题: </span><span class="token interpolation"><span class="token punctuation">{</span>details<span class="token punctuation">[</span><span class="token string">'问题'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   解决方案: </span><span class="token interpolation"><span class="token punctuation">{</span>details<span class="token punctuation">[</span><span class="token string">'解决方案'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   示例: </span><span class="token interpolation"><span class="token punctuation">{</span>details<span class="token punctuation">[</span><span class="token string">'示例'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 运行常见陷阱和解决方案</span>
common_pitfalls_and_solutions<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_8-4-本章总结"><a href="#_8-4-本章总结" class="header-anchor">#</a> 8.4 本章总结</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">chapter_summary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;第20天学习总结&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=== 第20天 - Python数据库访问学习总结 ===&quot;</span><span class="token punctuation">)</span>
    
    summary_points <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;核心概念&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;数据库基础知识和DB-API 2.0规范&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;SQLite、MySQL等数据库的连接和操作&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;SQL语句的执行和结果处理&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;事务管理和错误处理机制&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;重要技能&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;使用sqlite3模块进行SQLite操作&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;使用mysql-connector-python操作MySQL&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;掌握SQLAlchemy ORM框架&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;实现数据库连接池和性能优化&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;实践应用&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;用户管理系统的设计和实现&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;销售数据分析系统的构建&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;数据库安全和最佳实践&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;性能优化和监控策略&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;进阶方向&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;学习NoSQL数据库(MongoDB, Redis)&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;掌握数据库集群和分布式架构&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;深入理解数据库内部原理&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;学习大数据处理技术&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> category<span class="token punctuation">,</span> points <span class="token keyword">in</span> summary_points<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n</span><span class="token interpolation"><span class="token punctuation">{</span>category<span class="token punctuation">}</span></span><span class="token string">:&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> point <span class="token keyword">in</span> points<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>point<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n学习成果:&quot;</span><span class="token punctuation">)</span>
    achievements <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;✓ 掌握了Python数据库编程的基础知识&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;✓ 学会了使用多种数据库和ORM框架&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;✓ 理解了数据库设计和性能优化原则&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;✓ 具备了构建实际数据库应用的能力&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;✓ 了解了数据库安全和最佳实践&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> achievement <span class="token keyword">in</span> achievements<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   </span><span class="token interpolation"><span class="token punctuation">{</span>achievement<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n下一步学习建议:&quot;</span><span class="token punctuation">)</span>
    next_steps <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;深入学习特定数据库的高级特性&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;实践更复杂的数据库应用项目&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;学习数据库运维和监控技能&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;探索大数据和分布式数据库技术&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;关注数据库技术的最新发展趋势&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> step <span class="token keyword">in</span> next_steps<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;   • </span><span class="token interpolation"><span class="token punctuation">{</span>step<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n恭喜你完成了Python数据库访问的学习！&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;数据库是现代应用的核心，继续实践和深入学习将让你成为更优秀的开发者。&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 运行本章总结</span>
chapter_summary<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>通过第20天的学习，我们全面掌握了Python数据库访问的各个方面：</p> <ol><li><strong>数据库基础</strong> - 理解了数据库概念、DB-API规范和SQL基础</li> <li><strong>SQLite操作</strong> - 掌握了轻量级数据库的使用和高级功能</li> <li><strong>MySQL操作</strong> - 学会了企业级数据库的连接和操作</li> <li><strong>ORM框架</strong> - 深入学习了SQLAlchemy的使用和高级特性</li> <li><strong>设计最佳实践</strong> - 了解了数据库设计原则和性能优化策略</li> <li><strong>实际应用</strong> - 通过用户管理和数据分析系统掌握了实践技能</li> <li><strong>安全实践</strong> - 学习了数据库安全和最佳实践</li></ol> <p>数据库编程是后端开发的核心技能，掌握这些知识将为你的Python开发之路奠定坚实的基础。继续实践和深入学习，你将能够构建更加复杂和高效的数据库应用！</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/JavaPlusDoc/Python/19.html" class="prev">
          第19天-电子邮件
        </a></span> <span class="next"><a href="/JavaPlusDoc/Python/21.html">
          第21天-Web开发
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_1-数据库基础" class="sidebar-link reco-side-_1-数据库基础" data-v-b57cc07c>1. 数据库基础</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_1-1-数据库概述" class="sidebar-link reco-side-_1-1-数据库概述" data-v-b57cc07c>1.1 数据库概述</a></li><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_2-sqlite数据库" class="sidebar-link reco-side-_2-sqlite数据库" data-v-b57cc07c>2. SQLite数据库</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_2-1-sqlite基础操作" class="sidebar-link reco-side-_2-1-sqlite基础操作" data-v-b57cc07c>2.1 SQLite基础操作</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_2-2-sqlite高级功能" class="sidebar-link reco-side-_2-2-sqlite高级功能" data-v-b57cc07c>2.2 SQLite高级功能</a></li><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_3-mysql数据库" class="sidebar-link reco-side-_3-mysql数据库" data-v-b57cc07c>3. MySQL数据库</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_3-1-mysql连接和基本操作" class="sidebar-link reco-side-_3-1-mysql连接和基本操作" data-v-b57cc07c>3.1 MySQL连接和基本操作</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_3-2-mysql连接池和高级功能" class="sidebar-link reco-side-_3-2-mysql连接池和高级功能" data-v-b57cc07c>3.2 MySQL连接池和高级功能</a></li><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_4-orm框架" class="sidebar-link reco-side-_4-orm框架" data-v-b57cc07c>4. ORM框架</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_4-1-sqlalchemy基础" class="sidebar-link reco-side-_4-1-sqlalchemy基础" data-v-b57cc07c>4.1 SQLAlchemy基础</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_4-2-sqlalchemy高级功能" class="sidebar-link reco-side-_4-2-sqlalchemy高级功能" data-v-b57cc07c>4.2 SQLAlchemy高级功能</a></li><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_5-数据库设计最佳实践" class="sidebar-link reco-side-_5-数据库设计最佳实践" data-v-b57cc07c>5. 数据库设计最佳实践</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_5-1-数据库设计原则" class="sidebar-link reco-side-_5-1-数据库设计原则" data-v-b57cc07c>5.1 数据库设计原则</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_5-2-性能优化策略" class="sidebar-link reco-side-_5-2-性能优化策略" data-v-b57cc07c>5.2 性能优化策略</a></li><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_6-实际应用案例" class="sidebar-link reco-side-_6-实际应用案例" data-v-b57cc07c>6. 实际应用案例</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_6-1-用户管理系统" class="sidebar-link reco-side-_6-1-用户管理系统" data-v-b57cc07c>6.1 用户管理系统</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_6-2-数据分析系统" class="sidebar-link reco-side-_6-2-数据分析系统" data-v-b57cc07c>6.2 数据分析系统</a></li><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_7-最佳实践和安全" class="sidebar-link reco-side-_7-最佳实践和安全" data-v-b57cc07c>7. 最佳实践和安全</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_7-1-数据库安全最佳实践" class="sidebar-link reco-side-_7-1-数据库安全最佳实践" data-v-b57cc07c>7.1 数据库安全最佳实践</a></li><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_8-学习建议和总结" class="sidebar-link reco-side-_8-学习建议和总结" data-v-b57cc07c>8. 学习建议和总结</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_8-1-学习路径" class="sidebar-link reco-side-_8-1-学习路径" data-v-b57cc07c>8.1 学习路径</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_8-2-最佳实践总结" class="sidebar-link reco-side-_8-2-最佳实践总结" data-v-b57cc07c>8.2 最佳实践总结</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_8-3-常见陷阱和解决方案" class="sidebar-link reco-side-_8-3-常见陷阱和解决方案" data-v-b57cc07c>8.3 常见陷阱和解决方案</a></li><li class="level-3" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#_8-4-本章总结" class="sidebar-link reco-side-_8-4-本章总结" data-v-b57cc07c>8.4 本章总结</a></li><li class="level-2" data-v-b57cc07c><a href="/JavaPlusDoc/Python/20.html#总结" class="sidebar-link reco-side-总结" data-v-b57cc07c>总结</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----><div></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 Jeskson-微服务分布式
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="260" class="live2d" style="width:100px;position:fixed;right:0px;bottom:0px;opacity:0.9;z-index:99999;object-fit:cover;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div></div></div>
    <script src="/JavaPlusDoc/assets/js/app.ff4b1912.js" defer></script><script src="/JavaPlusDoc/assets/js/7.dfc0397a.js" defer></script><script src="/JavaPlusDoc/assets/js/2.cfbace72.js" defer></script><script src="/JavaPlusDoc/assets/js/1.d59a348b.js" defer></script><script src="/JavaPlusDoc/assets/js/137.7afd61da.js" defer></script>
  </body>
</html>
