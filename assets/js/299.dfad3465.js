(window.webpackJsonp=window.webpackJsonp||[]).push([[299],{1116:function(a,s,t){"use strict";t.r(s);var e=t(1),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"docker容器管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker容器管理"}},[a._v("#")]),a._v(" Docker容器管理")]),a._v(" "),s("h2",{attrs:{id:"什么是docker容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是docker容器"}},[a._v("#")]),a._v(" 什么是Docker容器")]),a._v(" "),s("p",[a._v("Docker容器是Docker镜像的运行实例，是一个可执行的软件包，包含运行应用程序所需的一切：代码、运行时环境、系统工具、系统库和设置。容器将应用程序与其环境隔离开来，确保它可以在任何地方以相同的方式工作。")]),a._v(" "),s("h2",{attrs:{id:"容器与虚拟机的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器与虚拟机的区别"}},[a._v("#")]),a._v(" 容器与虚拟机的区别")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("特性")]),a._v(" "),s("th",[a._v("容器")]),a._v(" "),s("th",[a._v("虚拟机")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("启动时间")]),a._v(" "),s("td",[a._v("秒级")]),a._v(" "),s("td",[a._v("分钟级")])]),a._v(" "),s("tr",[s("td",[a._v("占用资源")]),a._v(" "),s("td",[a._v("轻量级（MB）")]),a._v(" "),s("td",[a._v("重量级（GB）")])]),a._v(" "),s("tr",[s("td",[a._v("隔离级别")]),a._v(" "),s("td",[a._v("进程级隔离")]),a._v(" "),s("td",[a._v("硬件级隔离")])]),a._v(" "),s("tr",[s("td",[a._v("操作系统")]),a._v(" "),s("td",[a._v("共享宿主机内核")]),a._v(" "),s("td",[a._v("独立操作系统")])]),a._v(" "),s("tr",[s("td",[a._v("数量")]),a._v(" "),s("td",[a._v("单机可运行数千个")]),a._v(" "),s("td",[a._v("单机通常几十个")])]),a._v(" "),s("tr",[s("td",[a._v("性能")]),a._v(" "),s("td",[a._v("接近原生")]),a._v(" "),s("td",[a._v("有一定损耗")])])])]),a._v(" "),s("h2",{attrs:{id:"容器生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器生命周期"}},[a._v("#")]),a._v(" 容器生命周期")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://docs.docker.com/engine/images/architecture.svg",alt:"容器生命周期"}})]),a._v(" "),s("p",[a._v("Docker容器的生命周期包括以下状态：")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("created")]),a._v("：已创建但未启动")]),a._v(" "),s("li",[s("strong",[a._v("running")]),a._v("：正在运行")]),a._v(" "),s("li",[s("strong",[a._v("paused")]),a._v("：暂停运行")]),a._v(" "),s("li",[s("strong",[a._v("stopped")]),a._v("：已停止运行")]),a._v(" "),s("li",[s("strong",[a._v("deleted")]),a._v("：已删除")])]),a._v(" "),s("h2",{attrs:{id:"容器基本操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器基本操作"}},[a._v("#")]),a._v(" 容器基本操作")]),a._v(" "),s("h3",{attrs:{id:"创建和运行容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建和运行容器"}},[a._v("#")]),a._v(" 创建和运行容器")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建并启动容器（前台运行）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建并启动容器（后台运行）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定容器名称")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" webserver nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 端口映射")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":80 nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 环境变量")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("password mysql\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 挂载卷")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /host/path:/container/path nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" my-network nginx\n")])])]),s("h3",{attrs:{id:"查看容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看容器"}},[a._v("#")]),a._v(" 查看容器")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看运行中的容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看所有容器（包括已停止的）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看最近创建的容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 只显示容器ID")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器详细信息")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" inspect container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 实时查看日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器内进程")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("top")]),a._v(" container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器资源使用情况")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stats container_id\n")])])]),s("h3",{attrs:{id:"容器控制操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器控制操作"}},[a._v("#")]),a._v(" 容器控制操作")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重启容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" restart container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 暂停容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pause container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 恢复容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" unpause container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 强制停止容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" container_id\n")])])]),s("h3",{attrs:{id:"容器交互操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器交互操作"}},[a._v("#")]),a._v(" 容器交互操作")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在运行中的容器内执行命令")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" container_id /bin/bash\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在新容器中启动交互式shell")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" ubuntu /bin/bash\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将文件从主机复制到容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /host/path/file container_id:/container/path/\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将文件从容器复制到主机")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" container_id:/container/path/file /host/path/\n")])])]),s("h3",{attrs:{id:"容器清理操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器清理操作"}},[a._v("#")]),a._v(" 容器清理操作")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 强制删除运行中的容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除所有已停止的容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container prune\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除所有容器（包括运行中的）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-aq")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])])]),s("h2",{attrs:{id:"容器资源管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器资源管理"}},[a._v("#")]),a._v(" 容器资源管理")]),a._v(" "),s("h3",{attrs:{id:"限制cpu资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#限制cpu资源"}},[a._v("#")]),a._v(" 限制CPU资源")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 限制CPU使用率（最多使用2个CPU核心）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--cpus")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定CPU核心使用权重")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" --cpu-shares"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("512")]),a._v(" nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定使用特定的CPU核心")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" --cpuset-cpus"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0,1")]),a._v(" nginx\n")])])]),s("h3",{attrs:{id:"限制内存资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#限制内存资源"}},[a._v("#")]),a._v(" 限制内存资源")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 限制内存使用（最多使用512MB）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("512m nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 限制内存和交换空间")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("512m --memory-swap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1g nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置内存预留")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("512m --memory-reservation"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("256m nginx\n")])])]),s("h3",{attrs:{id:"限制io资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#限制io资源"}},[a._v("#")]),a._v(" 限制IO资源")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 限制读写速度")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" --device-read-bps"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/sda:1mb --device-write-bps"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/sda:1mb nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 限制读写IOPS")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" --device-read-iops"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/sda:1000 --device-write-iops"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/sda:1000 nginx\n")])])]),s("h2",{attrs:{id:"容器网络配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器网络配置"}},[a._v("#")]),a._v(" 容器网络配置")]),a._v(" "),s("h3",{attrs:{id:"网络模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络模式"}},[a._v("#")]),a._v(" 网络模式")]),a._v(" "),s("p",[a._v("Docker提供了多种网络模式：")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("bridge")]),a._v("：默认网络模式，容器通过网桥连接")]),a._v(" "),s("li",[s("strong",[a._v("host")]),a._v("：容器共享宿主机网络命名空间")]),a._v(" "),s("li",[s("strong",[a._v("none")]),a._v("：容器没有网络连接")]),a._v(" "),s("li",[s("strong",[a._v("container")]),a._v("：容器共享其他容器的网络命名空间")]),a._v(" "),s("li",[s("strong",[a._v("自定义网络")]),a._v("：用户创建的网络")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用桥接网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" bridge nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用主机网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 不使用网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" none nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 共享其他容器的网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" container:container_id nginx\n")])])]),s("h3",{attrs:{id:"创建自定义网络"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建自定义网络"}},[a._v("#")]),a._v(" 创建自定义网络")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建桥接网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create my-network\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建具有特定子网和网关的网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--subnet")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.18")]),a._v(".0.0/16 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gateway")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.18")]),a._v(".0.1 my-network\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建使用特定驱动的网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--driver")]),a._v(" overlay my-network\n")])])]),s("h3",{attrs:{id:"网络管理命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络管理命令"}},[a._v("#")]),a._v(" 网络管理命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出所有网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看网络详情")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network inspect my-network\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将容器连接到网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network connect my-network container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 断开容器与网络的连接")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network disconnect my-network container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" my-network\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除所有未使用的网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network prune\n")])])]),s("h2",{attrs:{id:"容器数据管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器数据管理"}},[a._v("#")]),a._v(" 容器数据管理")]),a._v(" "),s("h3",{attrs:{id:"数据卷-volumes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据卷-volumes"}},[a._v("#")]),a._v(" 数据卷（Volumes）")]),a._v(" "),s("p",[a._v("数据卷是Docker管理的宿主机文件系统的一部分，由Docker管理。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建数据卷")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume create my-volume\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用数据卷运行容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" my-volume:/container/path nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看所有数据卷")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看数据卷详情")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume inspect my-volume\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除数据卷")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" my-volume\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除所有未使用的数据卷")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume prune\n")])])]),s("h3",{attrs:{id:"绑定挂载-bind-mounts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#绑定挂载-bind-mounts"}},[a._v("#")]),a._v(" 绑定挂载（Bind Mounts）")]),a._v(" "),s("p",[a._v("绑定挂载是将宿主机上的文件或目录挂载到容器中。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用绑定挂载运行容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /host/path:/container/path nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用只读绑定挂载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /host/path:/container/path:ro nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用新语法进行绑定挂载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--mount")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bind,source"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/host/path,target"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/container/path nginx\n")])])]),s("h3",{attrs:{id:"tmpfs挂载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tmpfs挂载"}},[a._v("#")]),a._v(" tmpfs挂载")]),a._v(" "),s("p",[a._v("tmpfs挂载在容器内存中创建临时文件系统。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用tmpfs挂载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--tmpfs")]),a._v(" /container/path nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定tmpfs选项")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--tmpfs")]),a._v(" /container/path:rw,noexec,nosuid,size"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("100m nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用新语法进行tmpfs挂载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--mount")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("tmpfs,destination"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/container/path nginx\n")])])]),s("h2",{attrs:{id:"容器编排与扩展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器编排与扩展"}},[a._v("#")]),a._v(" 容器编排与扩展")]),a._v(" "),s("h3",{attrs:{id:"docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[a._v("#")]),a._v(" Docker Compose")]),a._v(" "),s("p",[a._v("Docker Compose是用于定义和运行多容器Docker应用程序的工具。")]),a._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker-compose.yml示例")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'3'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("web")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" nginx\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"80:80"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" ./html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("/usr/share/nginx/html\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("depends_on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" db\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" mysql\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" example\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动所有服务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止所有服务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" down\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看服务状态")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看服务日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" logs\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 扩展服务实例数量")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--scale")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("web")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n")])])]),s("h3",{attrs:{id:"docker-swarm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-swarm"}},[a._v("#")]),a._v(" Docker Swarm")]),a._v(" "),s("p",[a._v("Docker Swarm是Docker的原生集群管理工具。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 初始化Swarm集群")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" swarm init --advertise-addr "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("MANAGER-IP"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建服务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--replicas")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" web nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看服务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看服务详情")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" inspect web\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看服务任务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" web\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 扩展服务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" scale "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("web")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更新服务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" update "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--image")]),a._v(" nginx:1.19 web\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除服务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" web\n")])])]),s("h2",{attrs:{id:"容器监控与日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器监控与日志"}},[a._v("#")]),a._v(" 容器监控与日志")]),a._v(" "),s("h3",{attrs:{id:"监控容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监控容器"}},[a._v("#")]),a._v(" 监控容器")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器资源使用情况")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stats\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看特定容器的资源使用情况")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stats container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用cAdvisor监控容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("cadvisor "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":8080 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/:/rootfs:ro "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/run:/var/run:ro "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/sys:/sys:ro "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/lib/docker/:/var/lib/docker:ro "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/dev/disk/:/dev/disk:ro "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  google/cadvisor:latest\n")])])]),s("h3",{attrs:{id:"容器日志管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器日志管理"}},[a._v("#")]),a._v(" 容器日志管理")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看最近的日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--tail")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 实时查看日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看带时间戳的日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 限制日志大小和文件数量")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" --log-driver json-file --log-opt max-size"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("10m --log-opt max-file"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" nginx\n")])])]),s("h2",{attrs:{id:"容器安全最佳实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器安全最佳实践"}},[a._v("#")]),a._v(" 容器安全最佳实践")]),a._v(" "),s("ol",[s("li",[s("strong",[a._v("使用非root用户运行容器")])])]),a._v(" "),s("div",{staticClass:"language-dockerfile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" nginx:latest")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RUN")]),a._v(" groupadd -r appgroup && useradd -r -g appgroup appuser")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("USER")]),a._v(" appuser")]),a._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("strong",[a._v("限制容器资源")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--cpus")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.5")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("512m nginx\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[s("strong",[a._v("使用只读文件系统")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" --read-only nginx\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[s("strong",[a._v("使用安全计算模式（seccomp）")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" --security-opt "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("seccomp")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/path/to/seccomp/profile.json nginx\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[s("strong",[a._v("禁用特权模式")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 不要使用")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--privileged")]),a._v(" nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果需要特定权限，使用cap-add")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --cap-add NET_ADMIN nginx\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[s("strong",[a._v("定期更新镜像")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull nginx:latest\n")])])]),s("ol",{attrs:{start:"7"}},[s("li",[s("strong",[a._v("使用内容信任")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DOCKER_CONTENT_TRUST")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull nginx:latest\n")])])]),s("h2",{attrs:{id:"容器故障排查"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器故障排查"}},[a._v("#")]),a._v(" 容器故障排查")]),a._v(" "),s("h3",{attrs:{id:"常见问题与解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题与解决方案"}},[a._v("#")]),a._v(" 常见问题与解决方案")]),a._v(" "),s("ol",[s("li",[s("p",[s("strong",[a._v("容器无法启动")])]),a._v(" "),s("ul",[s("li",[a._v("检查日志："),s("code",[a._v("docker logs container_id")])]),a._v(" "),s("li",[a._v("检查配置："),s("code",[a._v("docker inspect container_id")])]),a._v(" "),s("li",[a._v("检查资源限制：确保有足够的CPU、内存资源")])])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("容器网络问题")])]),a._v(" "),s("ul",[s("li",[a._v("检查网络配置："),s("code",[a._v("docker network inspect network_name")])]),a._v(" "),s("li",[a._v("检查端口映射："),s("code",[a._v("docker port container_id")])]),a._v(" "),s("li",[a._v("使用网络调试工具："),s("code",[a._v("docker run --net container:container_id nicolaka/netshoot")])])])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("容器性能问题")])]),a._v(" "),s("ul",[s("li",[a._v("监控资源使用："),s("code",[a._v("docker stats container_id")])]),a._v(" "),s("li",[a._v("检查日志是否有错误")]),a._v(" "),s("li",[a._v("考虑增加资源限制或优化应用")])])])]),a._v(" "),s("h3",{attrs:{id:"调试技巧"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调试技巧"}},[a._v("#")]),a._v(" 调试技巧")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在运行中的容器内执行命令")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" container_id /bin/bash\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器内进程")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("top")]),a._v(" container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器事件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" events "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--filter")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("container")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("container_id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 导出容器文件系统")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" container_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" container.tar\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器差异")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("diff")]),a._v(" container_id\n")])])]),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),s("p",[a._v("Docker容器是轻量级、可移植的应用运行环境，通过合理管理容器，可以显著提高应用的部署效率和可靠性。掌握容器的基本操作、资源管理、网络配置和数据管理等方面的知识，对于高效使用Docker至关重要。")]),a._v(" "),s("h2",{attrs:{id:"下一步学习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下一步学习"}},[a._v("#")]),a._v(" 下一步学习")]),a._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/docker/docker-network.html"}},[a._v("Docker网络配置")])],1),a._v(" "),s("li",[s("RouterLink",{attrs:{to:"/docker/docker-volumes.html"}},[a._v("Docker数据卷管理")])],1),a._v(" "),s("li",[s("RouterLink",{attrs:{to:"/docker/docker-compose.html"}},[a._v("Docker Compose详解")])],1),a._v(" "),s("li",[s("RouterLink",{attrs:{to:"/docker/docker-swarm.html"}},[a._v("Docker Swarm集群")])],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);