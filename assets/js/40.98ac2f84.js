(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1391:function(t,s,a){"use strict";a.r(s);var r=a(1),_=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("点击勘误"),s("a",{attrs:{href:"https://github.com/webVueBlog/JavaPlusDoc/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("issues"),s("OutboundLink")],1),t._v("，哪吒感谢大家的阅读")])]),t._v(" "),s("img",{attrs:{align:"right",width:"100",src:"https://cdn.jsdelivr.net/gh/YunYouJun/yun/images/yun-alpha-compressed.png"}}),t._v(" "),s("h2",{attrs:{id:"滚动部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#滚动部署"}},[t._v("#")]),t._v(" 滚动部署")]),t._v(" "),s("h3",{attrs:{id:"滚动部署-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#滚动部署-2"}},[t._v("#")]),t._v(" 滚动部署")]),t._v(" "),s("p",[t._v("在滚动部署中，应用新版本逐步替换旧版。实际发布过程中会有新旧版本共存的情况，不影响功能和用户体验。")]),t._v(" "),s("p",[t._v("一下图片中 蓝色表示旧版本，绿色表示新版本")]),t._v(" "),s("p",[s("img",{attrs:{src:a(741),alt:"img.png"}})]),t._v(" "),s("p",[t._v("滚动部署有一个比较严重的问题，在滚动发布后，新版本就开始接收请求，这个时候服务不一定可用，我们需要做流量的控制")]),t._v(" "),s("h3",{attrs:{id:"蓝绿部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#蓝绿部署"}},[t._v("#")]),t._v(" 蓝绿部署")]),t._v(" "),s("p",[t._v("零宕机模式，不停老版本，确认OK将流量更新到新版本，生产环境会一直有两个版本存在，随时可以切换版本")]),t._v(" "),s("p",[s("img",{attrs:{src:a(742),alt:"蓝绿部署"}})]),t._v(" "),s("p",[t._v("这种方式需要2倍的资源，比如正常提供服务的是10台服务，需要20服务器")]),t._v(" "),s("h3",{attrs:{id:"蓝绿部署的优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#蓝绿部署的优点"}},[t._v("#")]),t._v(" 蓝绿部署的优点")]),t._v(" "),s("ol",[s("li",[t._v("当发现问题可以快速切换回原来的版本")]),t._v(" "),s("li",[t._v("所有节点全部发布才切流量过来，新集群规模与原先规模一致，能扛大流量")]),t._v(" "),s("li",[t._v("不存在中间状态时接收请求，减少了很多不确定性")])]),t._v(" "),s("h3",{attrs:{id:"金丝雀发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#金丝雀发布"}},[t._v("#")]),t._v(" 金丝雀发布")]),t._v(" "),s("p",[t._v("为什么叫金丝雀发布？ 金丝雀对毒气比较敏感，在矿上开工之前，一般工人会用金丝雀对矿井测试是否有毒气存在，这便是金丝雀部署的由来。")]),t._v(" "),s("p",[t._v("金丝雀发布的特点 : 在线上运行的服务中，加入少量的新版本服务快速获取反馈，根据反绝对最后的交付形态")]),t._v(" "),s("p",[t._v("华为云的发布界面")]),t._v(" "),s("p",[s("img",{attrs:{src:a(743),alt:"img_2.png"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(744),alt:"img_3.png"}})]),t._v(" "),s("h3",{attrs:{id:"金丝雀的步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#金丝雀的步骤"}},[t._v("#")]),t._v(" 金丝雀的步骤")]),t._v(" "),s("ol",[s("li",[t._v("摘除流量，将节点更新为新版本代码，该节点成为金丝雀节点")]),t._v(" "),s("li",[t._v("选择不同的策略，将流量引入金丝雀节点")]),t._v(" "),s("li",[t._v("验证通过后，重发 步骤1，步骤2 ，直到所有节点为金丝雀节点。 金丝雀部署与蓝绿部署方式类似，但是更能规避风险，不用一次性更新所以节点。")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(745),alt:"img_4.png"}})]),t._v(" "),s("h3",{attrs:{id:"灰度发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#灰度发布"}},[t._v("#")]),t._v(" 灰度发布")]),t._v(" "),s("p",[s("img",{attrs:{src:a(746),alt:"img_5.png"}})]),t._v(" "),s("h3",{attrs:{id:"ab-test"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ab-test"}},[t._v("#")]),t._v(" AB TEST")]),t._v(" "),s("p",[t._v("A/B测试时效果测试，同一时间有多个版本对外提供服务 根据用户对多个版本的反馈给产品运营提供决策方案，选择用户反馈最好的方案。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(747),alt:"img_6.png"}})])])}),[],!1,null,null,null);s.default=_.exports},741:function(t,s,a){t.exports=a.p+"assets/img/img.31438ce3.png"},742:function(t,s,a){t.exports=a.p+"assets/img/1.fb62d583.gif"},743:function(t,s,a){t.exports=a.p+"assets/img/img_2.babce2f8.png"},744:function(t,s,a){t.exports=a.p+"assets/img/img_3.4bc8aed7.png"},745:function(t,s,a){t.exports=a.p+"assets/img/img_4.ae082fac.png"},746:function(t,s,a){t.exports=a.p+"assets/img/img_5.2d019326.png"},747:function(t,s,a){t.exports=a.p+"assets/img/img_6.0b4bd2ed.png"}}]);