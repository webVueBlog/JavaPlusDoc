(window.webpackJsonp=window.webpackJsonp||[]).push([[540],{1411:function(t,s,a){"use strict";a.r(s);var r=a(1),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"强制更新功能说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#强制更新功能说明"}},[t._v("#")]),t._v(" 强制更新功能说明")]),t._v(" "),s("h2",{attrs:{id:"功能概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#功能概述"}},[t._v("#")]),t._v(" 功能概述")]),t._v(" "),s("p",[t._v("本文档网站已集成强制更新功能，基于 PWA (Progressive Web App) 技术实现，确保用户始终能够获取到最新的内容和功能。")]),t._v(" "),s("h2",{attrs:{id:"主要特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要特性"}},[t._v("#")]),t._v(" 主要特性")]),t._v(" "),s("h3",{attrs:{id:"🔄-自动检测更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🔄-自动检测更新"}},[t._v("#")]),t._v(" 🔄 自动检测更新")]),t._v(" "),s("ul",[s("li",[t._v("每30分钟自动检查一次新版本")]),t._v(" "),s("li",[t._v("页面加载时自动检测是否有更新")]),t._v(" "),s("li",[t._v("Service Worker 后台监控文件变化")])]),t._v(" "),s("h3",{attrs:{id:"📱-智能更新提示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#📱-智能更新提示"}},[t._v("#")]),t._v(" 📱 智能更新提示")]),t._v(" "),s("ul",[s("li",[t._v("美观的更新提示弹窗")]),t._v(" "),s("li",[t._v("支持立即更新或稍后提醒")]),t._v(" "),s("li",[t._v("移动端友好的响应式设计")])]),t._v(" "),s("h3",{attrs:{id:"💾-离线缓存管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#💾-离线缓存管理"}},[t._v("#")]),t._v(" 💾 离线缓存管理")]),t._v(" "),s("ul",[s("li",[t._v("智能缓存策略，提升加载速度")]),t._v(" "),s("li",[t._v("自动清理过期缓存")]),t._v(" "),s("li",[t._v("支持离线浏览")])]),t._v(" "),s("h3",{attrs:{id:"🎯-版本管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🎯-版本管理"}},[t._v("#")]),t._v(" 🎯 版本管理")]),t._v(" "),s("ul",[s("li",[t._v("实时版本信息显示")]),t._v(" "),s("li",[t._v("更新历史记录")]),t._v(" "),s("li",[t._v("版本对比功能")])]),t._v(" "),s("h2",{attrs:{id:"技术实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术实现"}},[t._v("#")]),t._v(" 技术实现")]),t._v(" "),s("h3",{attrs:{id:"核心文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心文件"}},[t._v("#")]),t._v(" 核心文件")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("Service Worker")]),t._v(" ("),s("code",[t._v("/public/sw.js")]),t._v(")")]),t._v(" "),s("ul",[s("li",[t._v("缓存管理")]),t._v(" "),s("li",[t._v("更新检测")]),t._v(" "),s("li",[t._v("离线支持")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("强制更新脚本")]),t._v(" ("),s("code",[t._v("/public/js/force-update.js")]),t._v(")")]),t._v(" "),s("ul",[s("li",[t._v("用户界面交互")]),t._v(" "),s("li",[t._v("更新提示显示")]),t._v(" "),s("li",[t._v("用户操作处理")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("版本管理器")]),t._v(" ("),s("code",[t._v("/public/js/version-manager.js")]),t._v(")")]),t._v(" "),s("ul",[s("li",[t._v("版本信息管理")]),t._v(" "),s("li",[t._v("更新通知")]),t._v(" "),s("li",[t._v("本地存储管理")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("更新状态组件")]),t._v(" ("),s("code",[t._v("/components/UpdateStatus.vue")]),t._v(")")]),t._v(" "),s("ul",[s("li",[t._v("Vue 组件形式的状态显示")]),t._v(" "),s("li",[t._v("实时更新状态")]),t._v(" "),s("li",[t._v("手动操作界面")])])])]),t._v(" "),s("h3",{attrs:{id:"配置说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明"}},[t._v("#")]),t._v(" 配置说明")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("config.js")]),t._v(" 中的 PWA 配置：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vuepress/plugin-pwa"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("serviceWorker")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("updatePopup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 禁用默认弹窗，使用自定义更新提示")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("generateSWConfig")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("skipWaiting")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不自动跳过等待，由用户手动触发")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("clientsClaim")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不自动声明客户端控制权")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("runtimeCaching")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字体缓存策略")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("urlPattern")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^https:\\/\\/fonts\\.googleapis\\.com\\/")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("handler")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'StaleWhileRevalidate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cacheName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'google-fonts-stylesheets'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("urlPattern")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^https:\\/\\/fonts\\.gstatic\\.com\\/")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("handler")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CacheFirst'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cacheName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'google-fonts-webfonts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("expiration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("maxEntries")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("maxAgeSeconds")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("365")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1年")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"用户体验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户体验"}},[t._v("#")]),t._v(" 用户体验")]),t._v(" "),s("h3",{attrs:{id:"更新流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新流程"}},[t._v("#")]),t._v(" 更新流程")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("检测阶段")])]),t._v(" "),s("ul",[s("li",[t._v("系统自动检测新版本")]),t._v(" "),s("li",[t._v("后台下载更新内容")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("提示阶段")])]),t._v(" "),s("ul",[s("li",[t._v("显示更新提示弹窗")]),t._v(" "),s("li",[t._v("用户可选择立即更新或稍后")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("更新阶段")])]),t._v(" "),s("ul",[s("li",[t._v("激活新的 Service Worker")]),t._v(" "),s("li",[t._v("清理旧缓存")]),t._v(" "),s("li",[t._v("刷新页面内容")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("完成阶段")])]),t._v(" "),s("ul",[s("li",[t._v("显示更新成功提示")]),t._v(" "),s("li",[t._v("展示新版本特性")])])])]),t._v(" "),s("h3",{attrs:{id:"界面元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#界面元素"}},[t._v("#")]),t._v(" 界面元素")]),t._v(" "),s("h4",{attrs:{id:"更新提示弹窗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新提示弹窗"}},[t._v("#")]),t._v(" 更新提示弹窗")]),t._v(" "),s("ul",[s("li",[t._v("位置：页面顶部居中")]),t._v(" "),s("li",[t._v("样式：现代化卡片设计")]),t._v(" "),s("li",[t._v("操作：立即更新 / 稍后提醒")]),t._v(" "),s("li",[t._v("动画：平滑的滑入滑出效果")])]),t._v(" "),s("h4",{attrs:{id:"状态指示器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#状态指示器"}},[t._v("#")]),t._v(" 状态指示器")]),t._v(" "),s("ul",[s("li",[t._v("位置：页面右下角")]),t._v(" "),s("li",[t._v("功能：显示当前版本和更新状态")]),t._v(" "),s("li",[t._v("交互：点击展开详细信息")])]),t._v(" "),s("h2",{attrs:{id:"开发者指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发者指南"}},[t._v("#")]),t._v(" 开发者指南")]),t._v(" "),s("h3",{attrs:{id:"自定义配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义配置"}},[t._v("#")]),t._v(" 自定义配置")]),t._v(" "),s("h4",{attrs:{id:"修改检查间隔"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改检查间隔"}},[t._v("#")]),t._v(" 修改检查间隔")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("version-manager.js")]),t._v(" 中修改：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CHECK_INTERVAL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 30分钟")]),t._v("\n")])])]),s("h4",{attrs:{id:"自定义更新提示样式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义更新提示样式"}},[t._v("#")]),t._v(" 自定义更新提示样式")]),t._v(" "),s("p",[t._v("修改 "),s("code",[t._v("force-update.js")]),t._v(" 中的 CSS 样式：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" styles "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n  .force-update-modal {\n    /* 自定义样式 */\n  }\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"版本信息配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#版本信息配置"}},[t._v("#")]),t._v(" 版本信息配置")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("version-manager.js")]),t._v(" 中更新版本信息：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" currentVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.0.0'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("buildTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toISOString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("features")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'新功能1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'新功能2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'修复的问题'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"调试工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调试工具"}},[t._v("#")]),t._v(" 调试工具")]),t._v(" "),s("h4",{attrs:{id:"浏览器控制台命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器控制台命令"}},[t._v("#")]),t._v(" 浏览器控制台命令")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取版本信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getVersionInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清除版本缓存")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearVersionCache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手动触发更新检查")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkForUpdates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 强制更新")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forceUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"service-worker-调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-worker-调试"}},[t._v("#")]),t._v(" Service Worker 调试")]),t._v(" "),s("ol",[s("li",[t._v("打开浏览器开发者工具")]),t._v(" "),s("li",[t._v("进入 Application 标签")]),t._v(" "),s("li",[t._v("查看 Service Workers 部分")]),t._v(" "),s("li",[t._v("可以手动更新或卸载 Service Worker")])]),t._v(" "),s("h2",{attrs:{id:"最佳实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最佳实践"}},[t._v("#")]),t._v(" 最佳实践")]),t._v(" "),s("h3",{attrs:{id:"部署建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署建议"}},[t._v("#")]),t._v(" 部署建议")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("版本号管理")])]),t._v(" "),s("ul",[s("li",[t._v("每次发布更新版本号")]),t._v(" "),s("li",[t._v("使用语义化版本控制")]),t._v(" "),s("li",[t._v("记录更新日志")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("缓存策略")])]),t._v(" "),s("ul",[s("li",[t._v("静态资源使用长期缓存")]),t._v(" "),s("li",[t._v("HTML 文件使用网络优先策略")]),t._v(" "),s("li",[t._v("图片资源使用缓存优先策略")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("用户体验")])]),t._v(" "),s("ul",[s("li",[t._v("避免强制立即更新")]),t._v(" "),s("li",[t._v("提供清晰的更新说明")]),t._v(" "),s("li",[t._v("保持更新提示的一致性")])])])]),t._v(" "),s("h3",{attrs:{id:"性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[t._v("#")]),t._v(" 性能优化")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("减少检查频率")])]),t._v(" "),s("ul",[s("li",[t._v("根据内容更新频率调整检查间隔")]),t._v(" "),s("li",[t._v("避免在用户活跃时频繁检查")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("缓存优化")])]),t._v(" "),s("ul",[s("li",[t._v("合理设置缓存过期时间")]),t._v(" "),s("li",[t._v("定期清理无用缓存")]),t._v(" "),s("li",[t._v("压缩静态资源")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("网络优化")])]),t._v(" "),s("ul",[s("li",[t._v("使用 CDN 加速")]),t._v(" "),s("li",[t._v("启用 Gzip 压缩")]),t._v(" "),s("li",[t._v("优化图片格式")])])])]),t._v(" "),s("h2",{attrs:{id:"故障排除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#故障排除"}},[t._v("#")]),t._v(" 故障排除")]),t._v(" "),s("h3",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("h4",{attrs:{id:"更新检测不工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新检测不工作"}},[t._v("#")]),t._v(" 更新检测不工作")]),t._v(" "),s("p",[s("strong",[t._v("可能原因：")])]),t._v(" "),s("ul",[s("li",[t._v("Service Worker 未正确注册")]),t._v(" "),s("li",[t._v("浏览器不支持 Service Worker")]),t._v(" "),s("li",[t._v("网络连接问题")])]),t._v(" "),s("p",[s("strong",[t._v("解决方案：")])]),t._v(" "),s("ol",[s("li",[t._v("检查浏览器控制台错误信息")]),t._v(" "),s("li",[t._v("确认 Service Worker 注册状态")]),t._v(" "),s("li",[t._v("清除浏览器缓存重试")])]),t._v(" "),s("h4",{attrs:{id:"更新提示不显示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新提示不显示"}},[t._v("#")]),t._v(" 更新提示不显示")]),t._v(" "),s("p",[s("strong",[t._v("可能原因：")])]),t._v(" "),s("ul",[s("li",[t._v("CSS 样式冲突")]),t._v(" "),s("li",[t._v("JavaScript 错误")]),t._v(" "),s("li",[t._v("权限问题")])]),t._v(" "),s("p",[s("strong",[t._v("解决方案：")])]),t._v(" "),s("ol",[s("li",[t._v("检查控制台错误")]),t._v(" "),s("li",[t._v("确认脚本加载顺序")]),t._v(" "),s("li",[t._v("验证 DOM 结构")])]),t._v(" "),s("h4",{attrs:{id:"离线功能异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#离线功能异常"}},[t._v("#")]),t._v(" 离线功能异常")]),t._v(" "),s("p",[s("strong",[t._v("可能原因：")])]),t._v(" "),s("ul",[s("li",[t._v("缓存策略配置错误")]),t._v(" "),s("li",[t._v("Service Worker 更新失败")]),t._v(" "),s("li",[t._v("存储空间不足")])]),t._v(" "),s("p",[s("strong",[t._v("解决方案：")])]),t._v(" "),s("ol",[s("li",[t._v("检查缓存配置")]),t._v(" "),s("li",[t._v("手动更新 Service Worker")]),t._v(" "),s("li",[t._v("清理浏览器存储")])]),t._v(" "),s("h2",{attrs:{id:"更新日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新日志"}},[t._v("#")]),t._v(" 更新日志")]),t._v(" "),s("h3",{attrs:{id:"v1-0-0-当前版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v1-0-0-当前版本"}},[t._v("#")]),t._v(" v1.0.0 (当前版本)")]),t._v(" "),s("p",[s("strong",[t._v("新增功能：")])]),t._v(" "),s("ul",[s("li",[t._v("✨ 强制更新功能")]),t._v(" "),s("li",[t._v("📱 PWA 离线支持")]),t._v(" "),s("li",[t._v("🔄 自动版本检测")]),t._v(" "),s("li",[t._v("💾 智能缓存管理")]),t._v(" "),s("li",[t._v("🎯 版本状态显示")]),t._v(" "),s("li",[t._v("📊 更新统计功能")])]),t._v(" "),s("p",[s("strong",[t._v("技术改进：")])]),t._v(" "),s("ul",[s("li",[t._v("🚀 优化加载性能")]),t._v(" "),s("li",[t._v("🛡️ 增强安全性")]),t._v(" "),s("li",[t._v("📐 响应式设计优化")]),t._v(" "),s("li",[t._v("🎨 界面美化升级")])]),t._v(" "),s("p",[s("strong",[t._v("修复问题：")])]),t._v(" "),s("ul",[s("li",[t._v("🐛 修复缓存清理问题")]),t._v(" "),s("li",[t._v("🔧 优化内存使用")]),t._v(" "),s("li",[t._v("📱 修复移动端兼容性")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"技术支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术支持"}},[t._v("#")]),t._v(" 技术支持")]),t._v(" "),s("p",[t._v("如果在使用过程中遇到问题，请：")]),t._v(" "),s("ol",[s("li",[t._v("查看浏览器控制台错误信息")]),t._v(" "),s("li",[t._v("检查网络连接状态")]),t._v(" "),s("li",[t._v("尝试清除浏览器缓存")]),t._v(" "),s("li",[t._v("联系技术支持团队")])]),t._v(" "),s("p",[s("strong",[t._v("注意：")]),t._v(" 强制更新功能需要现代浏览器支持，建议使用 Chrome 60+、Firefox 55+、Safari 11+ 或 Edge 17+ 版本。")])])}),[],!1,null,null,null);s.default=e.exports}}]);