(window.webpackJsonp=window.webpackJsonp||[]).push([[406],{1240:function(t,v,_){"use strict";_.r(v);var a=_(1),s=Object(a.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("blockquote",[v("p",[t._v("ç‚¹å‡»å‹˜è¯¯"),v("a",{attrs:{href:"https://github.com/webVueBlog/JavaPlusDoc/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("issues"),v("OutboundLink")],1),t._v("ï¼Œå“ªå’æ„Ÿè°¢å¤§å®¶çš„é˜…è¯»")])]),t._v(" "),v("img",{attrs:{align:"right",width:"100",src:"https://cdn.jsdelivr.net/gh/YunYouJun/yun/images/yun-alpha-compressed.png"}}),t._v(" "),v("h2",{attrs:{id:"é¢è¯•äº†ä¸€ä½ä¸­å…´çš„è¿ç»´ç¨‹åºå‘˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#é¢è¯•äº†ä¸€ä½ä¸­å…´çš„è¿ç»´ç¨‹åºå‘˜"}},[t._v("#")]),t._v(" é¢è¯•äº†ä¸€ä½ä¸­å…´çš„è¿ç»´ç¨‹åºå‘˜")]),t._v(" "),v("p",[t._v("åŠ ç¾¤è”ç³»ä½œè€…vxï¼šxiaoda0423")]),t._v(" "),v("p",[t._v("ä»“åº“åœ°å€ï¼š"),v("a",{attrs:{href:"https://webvueblog.github.io/JavaPlusDoc/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://webvueblog.github.io/JavaPlusDoc/"),v("OutboundLink")],1)]),t._v(" "),v("p",[v("a",{attrs:{href:"https://1024bat.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://1024bat.cn/"),v("OutboundLink")],1)]),t._v(" "),v("p",[v("a",{attrs:{href:"https://github.com/webVueBlog/fastapi_plus",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/webVueBlog/fastapi_plus"),v("OutboundLink")],1)]),t._v(" "),v("p",[v("a",{attrs:{href:"https://webvueblog.github.io/JavaPlusDoc/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://webvueblog.github.io/JavaPlusDoc/"),v("OutboundLink")],1)]),t._v(" "),v("p",[v("img",{attrs:{src:"https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/910a42c0866944828050590a08aa1c0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5ZOq5ZCS:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTQ1MTAxMTA4MTI0OTE3NSJ9&rk3s=f64ab15b&x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&x-orig-expires=1748148707&x-orig-sign=jveq0WxoseZhD2sMzrbMz6e%2FIKY%3D",alt:"1747398531175.png"}})]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-ä¸€ã€cpu-æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-ä¸€ã€cpu-æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[t._v("#")]),t._v(" âœ… ä¸€ã€CPU æ’æŸ¥å‘½ä»¤ç¤ºä¾‹")]),t._v(" "),v("h3",{attrs:{id:"_1ï¸âƒ£-å®æ—¶æŸ¥çœ‹-cpu-ä½¿ç”¨"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1ï¸âƒ£-å®æ—¶æŸ¥çœ‹-cpu-ä½¿ç”¨"}},[t._v("#")]),t._v(" 1ï¸âƒ£ å®æ—¶æŸ¥çœ‹ CPU ä½¿ç”¨ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("top\n")])])]),v("h3",{attrs:{id:"_2ï¸âƒ£-æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹æœ€è€—-cpu"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2ï¸âƒ£-æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹æœ€è€—-cpu"}},[t._v("#")]),t._v(" 2ï¸âƒ£ æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹æœ€è€— CPUï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("ps aux --sort=-%cpu | head -10\n")])])]),v("h3",{attrs:{id:"_3ï¸âƒ£-æŸ¥çœ‹å¤šæ ¸-cpu-åˆ†å¸ƒæƒ…å†µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3ï¸âƒ£-æŸ¥çœ‹å¤šæ ¸-cpu-åˆ†å¸ƒæƒ…å†µ"}},[t._v("#")]),t._v(" 3ï¸âƒ£ æŸ¥çœ‹å¤šæ ¸ CPU åˆ†å¸ƒæƒ…å†µï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("mpstat -P ALL 1\n")])])]),v("h3",{attrs:{id:"_4ï¸âƒ£-æŸ¥çœ‹è¿›ç¨‹-pid-çš„çº¿ç¨‹ä½¿ç”¨æƒ…å†µ-java-æ ˆåˆ†æ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4ï¸âƒ£-æŸ¥çœ‹è¿›ç¨‹-pid-çš„çº¿ç¨‹ä½¿ç”¨æƒ…å†µ-java-æ ˆåˆ†æ"}},[t._v("#")]),t._v(" 4ï¸âƒ£ æŸ¥çœ‹è¿›ç¨‹ PID çš„çº¿ç¨‹ä½¿ç”¨æƒ…å†µï¼ˆJava æ ˆåˆ†æï¼‰ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("jstack <pid> | less\n")])])]),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-äºŒã€å†…å­˜æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-äºŒã€å†…å­˜æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[t._v("#")]),t._v(" âœ… äºŒã€å†…å­˜æ’æŸ¥å‘½ä»¤ç¤ºä¾‹")]),t._v(" "),v("h3",{attrs:{id:"_1ï¸âƒ£-æ€»ä½“å†…å­˜å ç”¨æƒ…å†µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1ï¸âƒ£-æ€»ä½“å†…å­˜å ç”¨æƒ…å†µ"}},[t._v("#")]),t._v(" 1ï¸âƒ£ æ€»ä½“å†…å­˜å ç”¨æƒ…å†µï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("free -h\n")])])]),v("h3",{attrs:{id:"_2ï¸âƒ£-æŒ‰å†…å­˜æ’åºçš„è¿›ç¨‹åˆ—è¡¨"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2ï¸âƒ£-æŒ‰å†…å­˜æ’åºçš„è¿›ç¨‹åˆ—è¡¨"}},[t._v("#")]),t._v(" 2ï¸âƒ£ æŒ‰å†…å­˜æ’åºçš„è¿›ç¨‹åˆ—è¡¨ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("ps aux --sort=-%mem | head -10\n")])])]),v("h3",{attrs:{id:"_3ï¸âƒ£-swap-ä½¿ç”¨æƒ…å†µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3ï¸âƒ£-swap-ä½¿ç”¨æƒ…å†µ"}},[t._v("#")]),t._v(" 3ï¸âƒ£ Swap ä½¿ç”¨æƒ…å†µï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("vmstat 1\n")])])]),v("h3",{attrs:{id:"_4ï¸âƒ£-æŸ¥çœ‹è¢«-oom-killer-æ€æ‰çš„è¿›ç¨‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4ï¸âƒ£-æŸ¥çœ‹è¢«-oom-killer-æ€æ‰çš„è¿›ç¨‹"}},[t._v("#")]),t._v(" 4ï¸âƒ£ æŸ¥çœ‹è¢« OOM Killer æ€æ‰çš„è¿›ç¨‹ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("dmesg | grep -i oom\n")])])]),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-ä¸‰ã€ç£ç›˜ç©ºé—´æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-ä¸‰ã€ç£ç›˜ç©ºé—´æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[t._v("#")]),t._v(" âœ… ä¸‰ã€ç£ç›˜ç©ºé—´æ’æŸ¥å‘½ä»¤ç¤ºä¾‹")]),t._v(" "),v("h3",{attrs:{id:"_1ï¸âƒ£-æŸ¥çœ‹æ‰€æœ‰ç£ç›˜åˆ†åŒºä½¿ç”¨"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1ï¸âƒ£-æŸ¥çœ‹æ‰€æœ‰ç£ç›˜åˆ†åŒºä½¿ç”¨"}},[t._v("#")]),t._v(" 1ï¸âƒ£ æŸ¥çœ‹æ‰€æœ‰ç£ç›˜åˆ†åŒºä½¿ç”¨ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("df -h\n")])])]),v("h3",{attrs:{id:"_2ï¸âƒ£-æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ç›®å½•å¤§å°"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2ï¸âƒ£-æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ç›®å½•å¤§å°"}},[t._v("#")]),t._v(" 2ï¸âƒ£ æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ç›®å½•å¤§å°ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("du -sh *\n")])])]),v("h3",{attrs:{id:"_3ï¸âƒ£-å¿«é€Ÿå®šä½å¤§æ–‡ä»¶-top-10"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3ï¸âƒ£-å¿«é€Ÿå®šä½å¤§æ–‡ä»¶-top-10"}},[t._v("#")]),t._v(" 3ï¸âƒ£ å¿«é€Ÿå®šä½å¤§æ–‡ä»¶ï¼ˆTOP 10ï¼‰ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("du -ah / | sort -rh | head -n 10\n")])])]),v("h3",{attrs:{id:"_4ï¸âƒ£-æŸ¥çœ‹å·²è¢«åˆ é™¤ä½†ä»å ç”¨ç£ç›˜çš„æ–‡ä»¶"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4ï¸âƒ£-æŸ¥çœ‹å·²è¢«åˆ é™¤ä½†ä»å ç”¨ç£ç›˜çš„æ–‡ä»¶"}},[t._v("#")]),t._v(" 4ï¸âƒ£ æŸ¥çœ‹å·²è¢«åˆ é™¤ä½†ä»å ç”¨ç£ç›˜çš„æ–‡ä»¶ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("lsof | grep deleted\n")])])]),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-å››ã€ç£ç›˜-io-æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-å››ã€ç£ç›˜-io-æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[t._v("#")]),t._v(" âœ… å››ã€ç£ç›˜ IO æ’æŸ¥å‘½ä»¤ç¤ºä¾‹")]),t._v(" "),v("h3",{attrs:{id:"_1ï¸âƒ£-æŸ¥çœ‹-io-çŠ¶å†µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1ï¸âƒ£-æŸ¥çœ‹-io-çŠ¶å†µ"}},[t._v("#")]),t._v(" 1ï¸âƒ£ æŸ¥çœ‹ IO çŠ¶å†µï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("iostat -x 1\n")])])]),v("h3",{attrs:{id:"_2ï¸âƒ£-æŸ¥çœ‹-io-ç­‰å¾…-wa"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2ï¸âƒ£-æŸ¥çœ‹-io-ç­‰å¾…-wa"}},[t._v("#")]),t._v(" 2ï¸âƒ£ æŸ¥çœ‹ IO ç­‰å¾…ï¼ˆwaï¼‰ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("vmstat 1\n")])])]),v("h3",{attrs:{id:"_3ï¸âƒ£-å®æ—¶æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹è¯»å†™æœ€å¤š"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3ï¸âƒ£-å®æ—¶æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹è¯»å†™æœ€å¤š"}},[t._v("#")]),t._v(" 3ï¸âƒ£ å®æ—¶æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹è¯»å†™æœ€å¤šï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("iotop\n")])])]),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-äº”ã€ç½‘ç»œé—®é¢˜æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-äº”ã€ç½‘ç»œé—®é¢˜æ’æŸ¥å‘½ä»¤ç¤ºä¾‹"}},[t._v("#")]),t._v(" âœ… äº”ã€ç½‘ç»œé—®é¢˜æ’æŸ¥å‘½ä»¤ç¤ºä¾‹")]),t._v(" "),v("h3",{attrs:{id:"_1ï¸âƒ£-æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1ï¸âƒ£-æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬"}},[t._v("#")]),t._v(" 1ï¸âƒ£ æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("ss -lntp  # æˆ– netstat -tulnp\n")])])]),v("h3",{attrs:{id:"_2ï¸âƒ£-æŸ¥çœ‹å®æ—¶è¿æ¥çŠ¶æ€"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2ï¸âƒ£-æŸ¥çœ‹å®æ—¶è¿æ¥çŠ¶æ€"}},[t._v("#")]),t._v(" 2ï¸âƒ£ æŸ¥çœ‹å®æ—¶è¿æ¥çŠ¶æ€ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("ss -s\n")])])]),v("h3",{attrs:{id:"_3ï¸âƒ£-æŸ¥çœ‹-tcp-è¿æ¥æ•°"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3ï¸âƒ£-æŸ¥çœ‹-tcp-è¿æ¥æ•°"}},[t._v("#")]),t._v(" 3ï¸âƒ£ æŸ¥çœ‹ TCP è¿æ¥æ•°ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("netstat -an | grep ESTABLISHED | wc -l\n")])])]),v("h3",{attrs:{id:"_4ï¸âƒ£-æ£€æŸ¥ç½‘ç»œè¿é€šæ€§"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4ï¸âƒ£-æ£€æŸ¥ç½‘ç»œè¿é€šæ€§"}},[t._v("#")]),t._v(" 4ï¸âƒ£ æ£€æŸ¥ç½‘ç»œè¿é€šæ€§ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("ping 8.8.8.8\n")])])]),v("h3",{attrs:{id:"_5ï¸âƒ£-æŠ“åŒ…åˆ†æè¯·æ±‚å†…å®¹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_5ï¸âƒ£-æŠ“åŒ…åˆ†æè¯·æ±‚å†…å®¹"}},[t._v("#")]),t._v(" 5ï¸âƒ£ æŠ“åŒ…åˆ†æè¯·æ±‚å†…å®¹ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("tcpdump -i eth0 port 8080 -nn\n")])])]),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-å…­ã€ä¸€é”®æ€§èƒ½æ€»è§ˆå·¥å…·-æ¨è"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-å…­ã€ä¸€é”®æ€§èƒ½æ€»è§ˆå·¥å…·-æ¨è"}},[t._v("#")]),t._v(" âœ… å…­ã€ä¸€é”®æ€§èƒ½æ€»è§ˆå·¥å…·ï¼ˆæ¨èï¼‰")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("glances  # å®‰è£…ï¼špip install glances\n")])])]),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-ä¸ƒã€ç»¼åˆä¸€é”®æ’æŸ¥è„šæœ¬-å¯é€‰æ‰§è¡Œ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-ä¸ƒã€ç»¼åˆä¸€é”®æ’æŸ¥è„šæœ¬-å¯é€‰æ‰§è¡Œ"}},[t._v("#")]),t._v(" âœ… ä¸ƒã€ç»¼åˆä¸€é”®æ’æŸ¥è„šæœ¬ï¼ˆå¯é€‰æ‰§è¡Œï¼‰")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v('#!/bin/bash\necho "CPU:"\ntop -b -n1 | head -5\n\necho -e "\\nMemory:"\nfree -h\n\necho -e "\\nDisk Usage:"\ndf -h\n\necho -e "\\nIO:"\niostat -x 1 2\n\necho -e "\\nNetwork:"\nss -s\n')])])]),v("hr"),t._v(" "),v("h2",{attrs:{id:"_1-procs-è¿›ç¨‹é˜Ÿåˆ—"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-procs-è¿›ç¨‹é˜Ÿåˆ—"}},[t._v("#")]),t._v(" 1 procsï¼ˆè¿›ç¨‹é˜Ÿåˆ—ï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åˆ—")]),t._v(" "),v("th",[t._v("å«ä¹‰")]),t._v(" "),v("th",[t._v("é€šä¿—è§£é‡Š")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("r")])]),t._v(" "),v("td",[t._v("runnable")]),t._v(" "),v("td",[t._v("æ­£åœ¨ CPU ä¸Šè·‘æˆ–æ’é˜Ÿç­‰è·‘çš„çº¿ç¨‹æ•°ï¼Œâ‰ˆ CPU æ ¸æ•° Ã— 1 å±äºæ­£å¸¸è´Ÿè½½ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("b")])]),t._v(" "),v("td",[t._v("blocked")]),t._v(" "),v("td",[t._v("å›  I/Oï¼ˆç£ç›˜/ç½‘ç»œï¼‰æˆ–é”è€Œç¡çœ çš„çº¿ç¨‹æ•°ã€‚æŒç»­ >0 è¯´æ˜ I/O ç“¶é¢ˆæˆ–é”ç«äº‰ã€‚")])])])]),t._v(" "),v("blockquote",[v("p",[v("strong",[t._v("ç¤ºä¾‹")]),t._v("ï¼š"),v("code",[t._v("r 1â†’0")]),t._v("ã€"),v("code",[t._v("b 0")]),t._v("â€ƒâ†’ CPU å¾ˆç©ºé—²ï¼Œæ²¡æœ‰å µå¡ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"_2-memory-å†…å­˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-memory-å†…å­˜"}},[t._v("#")]),t._v(" 2 memoryï¼ˆå†…å­˜ï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åˆ—")]),t._v(" "),v("th",[t._v("å«ä¹‰")]),t._v(" "),v("th",[t._v("é€šä¿—è§£é‡Š")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("swpd")])]),t._v(" "),v("td",[t._v("swap used")]),t._v(" "),v("td",[t._v("å·²ä½¿ç”¨äº¤æ¢åˆ†åŒºå¤§å°ã€‚â‰ 0 ä»£è¡¨â€œè¢«æ¢åˆ°ç£ç›˜â€ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("free")])]),t._v(" "),v("td",[t._v("free RAM")]),t._v(" "),v("td",[t._v("å®Œå…¨ç©ºé—²å†…å­˜ã€‚Linux ä¼šå°½é‡æŠŠé—²ç½®å†…å­˜åšç¼“å­˜ï¼Œæ‰€ä»¥ free å¾ˆä½ä¸ä»£è¡¨å†…å­˜ä¸å¤Ÿã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("buff")])]),t._v(" "),v("td",[t._v("buffer")]),t._v(" "),v("td",[t._v("å—è®¾å¤‡è¯»å†™ç”¨çš„å…ƒæ•°æ®ç¼“å­˜ï¼ˆé€šå¸¸å‡ ç™¾ MiB å†…ï¼‰ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("cache")])]),t._v(" "),v("td",[t._v("page cache")]),t._v(" "),v("td",[t._v("æ–‡ä»¶æ•°æ®ç¼“å­˜ã€‚è¶Šé«˜è¶Šèƒ½åŠ é€Ÿè¯»æ–‡ä»¶ã€‚")])])])]),t._v(" "),v("blockquote",[v("p",[v("strong",[t._v("ç¤ºä¾‹")]),t._v("ï¼š"),v("code",[t._v("swpd 0")]),t._v("ã€"),v("code",[t._v("free 133 MiB")]),t._v("ã€"),v("code",[t._v("cache 1.2 GiB")]),t._v("â€ƒâ†’ æ²¡æœ‰ç”¨åˆ° swapï¼Œå†…å­˜å¤Ÿç”¨ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"_3-swap-æ¢é¡µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-swap-æ¢é¡µ"}},[t._v("#")]),t._v(" 3 swapï¼ˆæ¢é¡µï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åˆ—")]),t._v(" "),v("th",[t._v("å«ä¹‰")]),t._v(" "),v("th",[t._v("é€šä¿—è§£é‡Š")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("si")])]),t._v(" "),v("td",[t._v("swap-in")]),t._v(" "),v("td",[t._v("æ¯ç§’ä»ç£ç›˜æ¢å…¥å†…å­˜çš„å­—èŠ‚å—æ•°ã€‚é•¿æœŸ >0 æ„å‘³å†…å­˜ä¸è¶³ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("so")])]),t._v(" "),v("td",[t._v("swap-out")]),t._v(" "),v("td",[t._v("æ¯ç§’æ¢å‡ºåˆ°ç£ç›˜çš„å­—èŠ‚å—æ•°ã€‚")])])])]),t._v(" "),v("blockquote",[v("p",[v("strong",[t._v("ç¤ºä¾‹")]),t._v("ï¼š"),v("code",[t._v("si 0")]),t._v("ã€"),v("code",[t._v("so 0")]),t._v("â€ƒâ†’ æœªå‘ç”Ÿæ¢é¡µï¼Œä¸€åˆ‡æ­£å¸¸ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"_4-io-å—è®¾å¤‡-i-o"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-io-å—è®¾å¤‡-i-o"}},[t._v("#")]),t._v(" 4 ioï¼ˆå—è®¾å¤‡ I/Oï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åˆ—")]),t._v(" "),v("th",[t._v("å«ä¹‰")]),t._v(" "),v("th",[t._v("é€šä¿—è§£é‡Š")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("bi")])]),t._v(" "),v("td",[t._v("blocks in")]),t._v(" "),v("td",[t._v("è¯»ç£ç›˜é€Ÿç‡ï¼ˆå—/ç§’ï¼‰ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("bo")])]),t._v(" "),v("td",[t._v("blocks out")]),t._v(" "),v("td",[t._v("å†™ç£ç›˜é€Ÿç‡ï¼ˆå—/ç§’ï¼‰ã€‚")])])])]),t._v(" "),v("blockquote",[v("p",[v("strong",[t._v("ç¤ºä¾‹")]),t._v("ï¼š"),v("code",[t._v("bi 0~2")]),t._v("ã€"),v("code",[t._v("bo 0~388")]),t._v("â€ƒâ†’ ç£ç›˜å‡ ä¹ç©ºé—²ï¼›å¶å°”å†™å…¥ 388 å—â‰ˆ â‰ˆ 2 MiB/sï¼Œä¸ç®—å¤§å‹åŠ›ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"_5-system-ç³»ç»Ÿ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_5-system-ç³»ç»Ÿ"}},[t._v("#")]),t._v(" 5 systemï¼ˆç³»ç»Ÿï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åˆ—")]),t._v(" "),v("th",[t._v("å«ä¹‰")]),t._v(" "),v("th",[t._v("é€šä¿—è§£é‡Š")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("in")])]),t._v(" "),v("td",[t._v("interrupts")]),t._v(" "),v("td",[t._v("æ¯ç§’ç¡¬ä»¶ä¸­æ–­æ¬¡æ•°ï¼Œç½‘ç»œ/ç£ç›˜ç¹å¿™æ—¶ä¼šä¸Šå‡ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("cs")])]),t._v(" "),v("td",[t._v("context switch")]),t._v(" "),v("td",[t._v("æ¯ç§’ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ï¼Œå¹¶å‘çº¿ç¨‹å¤šæˆ–å†…æ ¸è°ƒç”¨é¢‘ç¹æ—¶å˜å¤§ã€‚")])])])]),t._v(" "),v("blockquote",[v("p",[v("strong",[t._v("ç¤ºä¾‹")]),t._v("ï¼š"),v("code",[t._v("in 0~2302")]),t._v("ã€"),v("code",[t._v("cs 0~3834")]),t._v("â€ƒâ†’ ä¸­æ–­å’Œåˆ‡æ¢éƒ½ä¸é«˜ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"_6-cpu-cpu-åˆ©ç”¨ç‡-ç™¾åˆ†æ¯”"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_6-cpu-cpu-åˆ©ç”¨ç‡-ç™¾åˆ†æ¯”"}},[t._v("#")]),t._v(" 6 cpuï¼ˆCPU åˆ©ç”¨ç‡ï¼Œç™¾åˆ†æ¯”ï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åˆ—")]),t._v(" "),v("th",[t._v("å«ä¹‰")]),t._v(" "),v("th",[t._v("é€šä¿—è§£é‡Š")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("us")])]),t._v(" "),v("td",[t._v("user")]),t._v(" "),v("td",[t._v("ç”¨æˆ·æ€ç¨‹åºè€— CPU ç™¾åˆ†æ¯”ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("sy")])]),t._v(" "),v("td",[t._v("system")]),t._v(" "),v("td",[t._v("å†…æ ¸æ€è€— CPU ç™¾åˆ†æ¯”ï¼ˆç³»ç»Ÿè°ƒç”¨ã€è½¯ä¸­æ–­ï¼‰ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("id")])]),t._v(" "),v("td",[t._v("idle")]),t._v(" "),v("td",[t._v("ç©ºé—²ç™¾åˆ†æ¯”ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("wa")])]),t._v(" "),v("td",[t._v("iowait")]),t._v(" "),v("td",[t._v("ç­‰å¾…ç£ç›˜ I/O ç™¾åˆ†æ¯”ï¼ŒæŒç»­é«˜è¯´æ˜ç£ç›˜æ…¢ã€‚")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("st")])]),t._v(" "),v("td",[t._v("steal")]),t._v(" "),v("td",[t._v("è™šæ‹ŸåŒ–è¢«å®¿ä¸»æœºâ€œå·èµ°â€çš„ CPU ç™¾åˆ†æ¯”ã€‚")])])])]),t._v(" "),v("blockquote",[v("p",[v("strong",[t._v("ç¤ºä¾‹")]),t._v("ï¼š"),v("code",[t._v("us 1-2 %")]),t._v("ã€"),v("code",[t._v("sy 1 %")]),t._v("ã€"),v("code",[t._v("id 95-99 %")]),t._v("ã€"),v("code",[t._v("wa 0-2 %")]),t._v("ã€"),v("code",[t._v("st 0 %")]),v("br"),t._v("\nCPU å¤§éƒ¨åˆ†æ—¶é—´å‘å‘†ï¼Œå¶å°”æœ‰æå°‘ I/O ç­‰å¾…ï¼Œç³»ç»Ÿéå¸¸è½»æ¾ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"ä¸€å¥è¯è¯Šæ–­"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€å¥è¯è¯Šæ–­"}},[t._v("#")]),t._v(" ä¸€å¥è¯è¯Šæ–­")]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("CPU")]),t._v(" å‡ ä¹ç©ºé—²")]),t._v(" "),v("li",[v("strong",[t._v("å†…å­˜")]),t._v(" å……è£•ï¼Œæ—  swap")]),t._v(" "),v("li",[v("strong",[t._v("ç£ç›˜/ç½‘ç»œ")]),t._v(" I/O å¾ˆä½ï¼Œæ— é˜»å¡")]),t._v(" "),v("li",[v("strong",[t._v("æ•´ä½“")]),t._v(" ç³»ç»Ÿå¤„äºâ€œå–èŒ¶çŠ¶æ€â€ï¼Œæ— éœ€æ‹…å¿ƒèµ„æºç“¶é¢ˆã€‚")])]),t._v(" "),v("blockquote",[v("p",[t._v("å¦‚æœä»¥åçœ‹åˆ°ï¼š"),v("code",[t._v("r")]),t._v(" æŒç»­ > CPU æ ¸æ•°ã€"),v("code",[t._v("si/so")]),t._v(" ä¸æ–­å¢åŠ ã€"),v("code",[t._v("wa")]),t._v(" é«˜äº 20 %ï¼Œå°±æ˜¯æ€§èƒ½å‘Šè­¦ä¿¡å·ã€‚")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("ç›®å½•")]),t._v(" "),v("th",[t._v("çŠ¶æ€")]),t._v(" "),v("th",[t._v("å»ºè®®")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("/www/server")])]),t._v(" "),v("td",[t._v("âœ… æœ€å¤§å ç”¨è€…")]),t._v(" "),v("td",[t._v("åˆ†æå­ç›®å½•ï¼Œç¡®è®¤æ˜¯å¦æœ‰å†å²æ–‡ä»¶å¯åˆ é™¤")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("/var/lib/docker")])]),t._v(" "),v("td",[t._v("ğŸš¨ å®¹å™¨ä¸´æ—¶å±‚")]),t._v(" "),v("td",[t._v("ä½¿ç”¨ "),v("code",[t._v("docker system prune")]),t._v(" æ¸…ç†")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("/sh")])]),t._v(" "),v("td",[t._v("â“ è‡ªå®šä¹‰ç›®å½•")]),t._v(" "),v("td",[t._v("äººå·¥ç¡®è®¤å†…å®¹æ˜¯å¦æœ‰ä¿ç•™æ„ä¹‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("/var/lib/docker/.../elasticsearch")])]),t._v(" "),v("td",[t._v("ğŸ“Š å®¹å™¨å†… Elasticsearch")]),t._v(" "),v("td",[t._v("æŸ¥çœ‹ç´¢å¼•æ•°æ®æ˜¯å¦çˆ†ç‚¸ï¼Œè®¾ç½®ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç­–ç•¥ï¼ˆILMï¼‰")])])])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("[root@VM-0-14-centos /]# du -ah / | sort -rh | head -n 10  \ndu: cannot access â€˜/proc/21718/task/21718/fd/4â€™: No such file or directory  \ndu: cannot access â€˜/proc/21718/task/21718/fdinfo/4â€™: No such file or directory  \ndu: cannot access â€˜/proc/21718/fd/3â€™: No such file or directory  \ndu: cannot access â€˜/proc/21718/fdinfo/3â€™: No such file or directory  \n13G /  \n5.3G /www  \n4.7G /www/server  \n3.3G /var  \n3.0G /usr  \n1.4G /var/lib  \n1.2G /var/lib/docker/overlay2  \n1.2G /var/lib/docker  \n1.2G /sh  \n1.1G /var/lib/docker/overlay2/d41f20e46c2773c0511a3038827e8edc76ad0b30c1c318a37c460b3ca31c1024/diff/usr/share/elasticsearch\n")])])]),v("h2",{attrs:{id:"âœ…-åŸºç¡€å­—æ®µè¯´æ˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-åŸºç¡€å­—æ®µè¯´æ˜"}},[t._v("#")]),t._v(" âœ… åŸºç¡€å­—æ®µè¯´æ˜")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µå")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("Filesystem")])]),t._v(" "),v("td",[t._v("è®¾å¤‡æˆ–ç½‘ç»œå­˜å‚¨çš„åç§°ï¼ˆä¾‹å¦‚ï¼šæœ¬åœ°ç¡¬ç›˜ã€NFS ç½‘ç»œç£ç›˜ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("Size")])]),t._v(" "),v("td",[t._v("åˆ†åŒºæ€»å®¹é‡")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("Used")])]),t._v(" "),v("td",[t._v("å·²ä½¿ç”¨çš„ç©ºé—´")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("Avail")])]),t._v(" "),v("td",[t._v("å‰©ä½™å¯ç”¨ç©ºé—´")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("Use%")])]),t._v(" "),v("td",[t._v("ä½¿ç”¨ç‡ç™¾åˆ†æ¯”")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("Mounted on")])]),t._v(" "),v("td",[t._v("è¿™ä¸ªè®¾å¤‡æŒ‚è½½åˆ°ç³»ç»Ÿçš„å“ªä¸ªç›®å½•ä¸Š")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ§¾-æ ¸å¿ƒç£ç›˜æŒ‚è½½æƒ…å†µä¸­æ–‡è§£é‡Š"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§¾-æ ¸å¿ƒç£ç›˜æŒ‚è½½æƒ…å†µä¸­æ–‡è§£é‡Š"}},[t._v("#")]),t._v(" ğŸ§¾ æ ¸å¿ƒç£ç›˜æŒ‚è½½æƒ…å†µä¸­æ–‡è§£é‡Š")]),t._v(" "),v("h3",{attrs:{id:"ğŸ“Œ-1-æ ¹ç›®å½•-ç³»ç»Ÿä¸»åˆ†åŒº"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-1-æ ¹ç›®å½•-ç³»ç»Ÿä¸»åˆ†åŒº"}},[t._v("#")]),t._v(" ğŸ“Œ 1. æ ¹ç›®å½•ï¼ˆç³»ç»Ÿä¸»åˆ†åŒºï¼‰ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("/dev/vda1         197G   91G   99G  48% /\n")])])]),v("ul",[v("li",[v("strong",[t._v("è¿™æ˜¯ç³»ç»Ÿä¸»åˆ†åŒº")]),t._v("ï¼Œæ‰€æœ‰ "),v("code",[t._v("/")]),t._v(" å¼€å¤´çš„è·¯å¾„éƒ½åŸºäºå®ƒã€‚")]),t._v(" "),v("li",[t._v("æ€»å®¹é‡ 197Gï¼Œå½“å‰ä½¿ç”¨äº† 91Gï¼ˆå¤§çº¦ä¸€åŠï¼‰ï¼Œå‰© 99Gã€‚")]),t._v(" "),v("li",[v("strong",[t._v("ä½¿ç”¨ç‡ 48%ï¼Œå±äºå¥åº·çŠ¶æ€ã€‚")])])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"ğŸ“Œ-2-docker-å®¹å™¨å±‚-å¤šä¸ª-overlay-åˆ†åŒº"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-2-docker-å®¹å™¨å±‚-å¤šä¸ª-overlay-åˆ†åŒº"}},[t._v("#")]),t._v(" ğŸ“Œ 2. Docker å®¹å™¨å±‚ï¼ˆå¤šä¸ª overlay åˆ†åŒºï¼‰ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("overlay 197G  91G  99G  48% /var/lib/docker/overlay2/xxxxx/merged\n")])])]),v("ul",[v("li",[t._v("Docker ä½¿ç”¨ "),v("strong",[t._v("åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿ overlay2")]),t._v("ï¼Œè¿™äº›æ˜¯å®¹å™¨è¿è¡Œæ—¶çš„æ–‡ä»¶è§†å›¾ã€‚")]),t._v(" "),v("li",[t._v("å®ƒä»¬å…±äº«çš„æ˜¯åŒä¸€ä¸ªä¸»åˆ†åŒºï¼ˆ"),v("code",[t._v("/dev/vda1")]),t._v("ï¼‰ï¼Œæ‰€ä»¥å®¹é‡ä¸€è‡´ã€‚")]),t._v(" "),v("li",[v("strong",[t._v("ä½ è¿è¡Œäº†å¤šä¸ª Docker å®¹å™¨ï¼Œoverlay æ•°é‡è¾ƒå¤šæ˜¯æ­£å¸¸çš„ã€‚")])])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"ğŸ“Œ-3-nfs-ç½‘ç»œå­˜å‚¨æŒ‚è½½-ç”¨äºå®¹å™¨æŒä¹…åŒ–"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-3-nfs-ç½‘ç»œå­˜å‚¨æŒ‚è½½-ç”¨äºå®¹å™¨æŒä¹…åŒ–"}},[t._v("#")]),t._v(" ğŸ“Œ 3. NFS ç½‘ç»œå­˜å‚¨æŒ‚è½½ï¼ˆç”¨äºå®¹å™¨æŒä¹…åŒ–ï¼‰ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("172.18.96.88:/data1/ifs/kubernetes/... 1008G 623G 335G 66% /var/lib/kubelet/...\n")])])]),v("ul",[v("li",[t._v("è¡¨ç¤ºä» IP ä¸º "),v("code",[t._v("172.18.96.88")]),t._v(" çš„æœåŠ¡å™¨æŒ‚è½½äº†è¿œç¨‹ç£ç›˜ï¼ˆé€šè¿‡ NFS åè®®ï¼‰ã€‚")]),t._v(" "),v("li",[t._v("é€šå¸¸æ˜¯ "),v("strong",[t._v("K8s å®¹å™¨çš„æ•°æ®å·ï¼ˆå¦‚ MongoDB / ClickHouse / Cassandra çš„æŒä¹…å·ï¼‰")]),t._v(" ã€‚")]),t._v(" "),v("li",[t._v("å®¹é‡å¾ˆå¤§ï¼ˆ1008Gï¼‰ï¼Œä½¿ç”¨ 623Gï¼Œå‰©ä½™ 335Gï¼Œä½¿ç”¨ç‡ 66%ã€‚")]),t._v(" "),v("li",[v("strong",[t._v("åªè¦ < 80%ï¼Œéƒ½å±æ­£å¸¸èŒƒå›´ã€‚")])])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"ğŸ“Œ-4-tmpfs-æ–‡ä»¶ç³»ç»Ÿ-è™šæ‹Ÿå†…å­˜ç›˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-4-tmpfs-æ–‡ä»¶ç³»ç»Ÿ-è™šæ‹Ÿå†…å­˜ç›˜"}},[t._v("#")]),t._v(" ğŸ“Œ 4. "),v("code",[t._v("tmpfs")]),t._v(" æ–‡ä»¶ç³»ç»Ÿï¼ˆè™šæ‹Ÿå†…å­˜ç›˜ï¼‰ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("tmpfs   7.7G   12K   7.7G   1% /var/lib/kubelet/pods/...\n")])])]),v("ul",[v("li",[v("code",[t._v("tmpfs")]),t._v(" æ˜¯ä¸€ç§ç”¨å†…å­˜åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œ"),v("strong",[t._v("é€Ÿåº¦å¾ˆå¿«")]),t._v("ï¼Œé‡å¯å³æ¸…é™¤ã€‚")]),t._v(" "),v("li",[t._v("ç”¨äº Kubernetes å­˜å‚¨å®¹å™¨ä¸´æ—¶ Secretã€Tokenã€‚")]),t._v(" "),v("li",[t._v("é€šå¸¸ä½¿ç”¨ç‡éå¸¸ä½ï¼ˆå‡  KBï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"ğŸ“Œ-5-shm-å…±äº«å†…å­˜ç›®å½•"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-5-shm-å…±äº«å†…å­˜ç›®å½•"}},[t._v("#")]),t._v(" ğŸ“Œ 5. "),v("code",[t._v("shm")]),t._v(" å…±äº«å†…å­˜ç›®å½•ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("shm  64M  0  64M  0% /var/lib/docker/containers/xxx/mounts/shm\n")])])]),v("ul",[v("li",[t._v("æ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„ "),v("code",[t._v("shm")]),t._v("ï¼Œç”¨äºè¿›ç¨‹é—´å…±äº«å†…å­˜ï¼ˆå¦‚æµè§ˆå™¨/æ•°æ®åº“å…±äº«åŒºï¼‰ã€‚")]),t._v(" "),v("li",[t._v("ä¹Ÿæ˜¯å†…å­˜ä¸­çš„ï¼Œä¸å ç”¨ç¡¬ç›˜ï¼Œ64MB ä¸ºé»˜è®¤é…ç½®ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-æ€»ç»“-å½“å‰ç£ç›˜çŠ¶æ€å¥åº·"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-æ€»ç»“-å½“å‰ç£ç›˜çŠ¶æ€å¥åº·"}},[t._v("#")]),t._v(" âœ… æ€»ç»“ï¼šå½“å‰ç£ç›˜çŠ¶æ€å¥åº·")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åˆ†ç±»")]),t._v(" "),v("th",[t._v("çŠ¶æ€è¯´æ˜")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("ç³»ç»Ÿç›˜ /dev/vda1")])]),t._v(" "),v("td",[t._v("ä½¿ç”¨ç‡ 48%ï¼Œéå¸¸å¥åº·")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("å®¹å™¨ overlay")])]),t._v(" "),v("td",[t._v("éƒ½æŒ‚è½½åœ¨ç³»ç»Ÿç›˜ä¸‹ï¼Œéšå®¹å™¨è€Œå»º")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("NFS ç½‘ç»œç›˜")])]),t._v(" "),v("td",[t._v("ä½¿ç”¨ 66%ï¼Œä¹Ÿåœ¨æ­£å¸¸èŒƒå›´")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("tmpfs / shm")])]),t._v(" "),v("td",[t._v("åŸºäºå†…å­˜çš„ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå ç”¨æä½")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("æ²¡æœ‰åˆ†åŒºè¶…è¿‡ 80%")])]),t._v(" "),v("td",[t._v("âœ… æ²¡æœ‰ç£ç›˜å‘Šè­¦é£é™©")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-å»ºè®®-å¦‚é•¿æœŸè¿è¡Œ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-å»ºè®®-å¦‚é•¿æœŸè¿è¡Œ"}},[t._v("#")]),t._v(" âœ… å»ºè®®ï¼ˆå¦‚é•¿æœŸè¿è¡Œï¼‰ï¼š")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åœºæ™¯")]),t._v(" "),v("th",[t._v("å»ºè®®")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("å®¹å™¨é¢‘ç¹é‡å»º")]),t._v(" "),v("td",[t._v("å®šæœŸæ¸…ç† "),v("code",[t._v("/var/lib/docker/overlay2")]),t._v(" æ®‹ç•™å±‚")])]),t._v(" "),v("tr",[v("td",[t._v("NFS å†™å…¥æ…¢")]),t._v(" "),v("td",[t._v("æ£€æŸ¥ç½‘ç»œå¸¦å®½ä¸æŒ‚è½½å‚æ•°ï¼ˆå¦‚ "),v("code",[t._v("rsize/wsize")]),t._v("ï¼‰")])]),t._v(" "),v("tr",[v("td",[t._v("æœªæ¥å®¹é‡ä¸Šæ¶¨é£é™©")]),t._v(" "),v("td",[t._v("å»ºè®®å¯¹æ ¹åˆ†åŒºæˆ– NFS å®¹é‡åšå®¹é‡ç›‘æ§ï¼Œè¶…è¿‡ 85% æŠ¥è­¦")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ“‹-å­—æ®µä¸­æ–‡è¯´æ˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“‹-å­—æ®µä¸­æ–‡è¯´æ˜"}},[t._v("#")]),t._v(" ğŸ“‹ å­—æ®µä¸­æ–‡è¯´æ˜")]),t._v(" "),v("h3",{attrs:{id:"procs-è¿›ç¨‹é˜Ÿåˆ—"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#procs-è¿›ç¨‹é˜Ÿåˆ—"}},[t._v("#")]),t._v(" "),v("code",[t._v("procsï¼ˆè¿›ç¨‹é˜Ÿåˆ—ï¼‰")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")]),t._v(" "),v("th",[t._v("è§£è¯»")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("r")])]),t._v(" "),v("td",[t._v("å¯è¿è¡Œè¿›ç¨‹æ•°é‡ï¼ˆæ­£åœ¨ç­‰å¾… CPUï¼‰")]),t._v(" "),v("td",[t._v("> æ ¸å¿ƒæ•°æ—¶è¯´æ˜ "),v("strong",[t._v("CPU ç¹å¿™/è°ƒåº¦å µå¡")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("b")])]),t._v(" "),v("td",[t._v("æ­£åœ¨ç­‰å¾… I/O çš„è¿›ç¨‹")]),t._v(" "),v("td",[t._v("æœ‰å€¼è¯´æ˜æœ‰ "),v("strong",[t._v("ç£ç›˜æˆ–ç½‘ç»œ I/O é˜»å¡")])])])])]),t._v(" "),v("h3",{attrs:{id:"memory-å†…å­˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#memory-å†…å­˜"}},[t._v("#")]),t._v(" "),v("code",[t._v("memoryï¼ˆå†…å­˜ï¼‰")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("swpd")])]),t._v(" "),v("td",[t._v("ä½¿ç”¨çš„ swap ç©ºé—´ï¼ˆKBï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("free")])]),t._v(" "),v("td",[t._v("ç©ºé—²å†…å­˜")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("buff")])]),t._v(" "),v("td",[t._v("ç”¨ä½œå—ç¼“å­˜çš„å†…å­˜")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("cache")])]),t._v(" "),v("td",[t._v("ç”¨ä½œæ–‡ä»¶ç¼“å­˜çš„å†…å­˜ï¼ˆå¯å›æ”¶ï¼‰")])])])]),t._v(" "),v("h3",{attrs:{id:"swap-äº¤æ¢åˆ†åŒº"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#swap-äº¤æ¢åˆ†åŒº"}},[t._v("#")]),t._v(" "),v("code",[t._v("swapï¼ˆäº¤æ¢åˆ†åŒºï¼‰")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("si")])]),t._v(" "),v("td",[t._v("ä» swap åˆ†åŒºè¯»å…¥å†…å­˜çš„é€Ÿç‡ï¼ˆKB/sï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("so")])]),t._v(" "),v("td",[t._v("ä»å†…å­˜å†™å…¥ swap çš„é€Ÿç‡ï¼ˆKB/sï¼‰")])])])]),t._v(" "),v("blockquote",[v("p",[t._v("ä¸€æ—¦ "),v("code",[t._v("si/so > 0")]),t._v("ï¼Œè¯´æ˜ "),v("strong",[t._v("å†…å­˜å‹åŠ›å¤§ï¼Œæ­£åœ¨ä½¿ç”¨ swap")])])]),t._v(" "),v("h3",{attrs:{id:"io-ç£ç›˜-i-o"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#io-ç£ç›˜-i-o"}},[t._v("#")]),t._v(" "),v("code",[t._v("ioï¼ˆç£ç›˜ I/Oï¼‰")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("bi")])]),t._v(" "),v("td",[t._v("æ¯ç§’å—è®¾å¤‡è¯»å…¥é€Ÿç‡ï¼ˆKB/sï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("bo")])]),t._v(" "),v("td",[t._v("æ¯ç§’å—è®¾å¤‡å†™å‡ºé€Ÿç‡ï¼ˆKB/sï¼‰")])])])]),t._v(" "),v("h3",{attrs:{id:"system-ç³»ç»Ÿ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#system-ç³»ç»Ÿ"}},[t._v("#")]),t._v(" "),v("code",[t._v("systemï¼ˆç³»ç»Ÿï¼‰")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("in")])]),t._v(" "),v("td",[t._v("æ¯ç§’ä¸­æ–­æ¬¡æ•°ï¼ˆåŒ…æ‹¬æ—¶é’Ÿä¸­æ–­ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("cs")])]),t._v(" "),v("td",[t._v("æ¯ç§’ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ï¼ˆçº¿ç¨‹è°ƒåº¦é¢‘ç¹æ—¶å˜é«˜ï¼‰")])])])]),t._v(" "),v("h3",{attrs:{id:"cpu-cpu-ä½¿ç”¨ç‡"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cpu-cpu-ä½¿ç”¨ç‡"}},[t._v("#")]),t._v(" "),v("code",[t._v("cpuï¼ˆCPU ä½¿ç”¨ç‡ï¼‰")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("us")])]),t._v(" "),v("td",[t._v("ç”¨æˆ·æ€ CPU ä½¿ç”¨ï¼ˆJavaã€ä¸šåŠ¡é€»è¾‘ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sy")])]),t._v(" "),v("td",[t._v("å†…æ ¸æ€ CPU ä½¿ç”¨ï¼ˆç³»ç»Ÿè°ƒç”¨ã€ç½‘ç»œï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("id")])]),t._v(" "),v("td",[t._v("ç©ºé—² CPU æ¯”ä¾‹")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("wa")])]),t._v(" "),v("td",[t._v("ç­‰å¾… I/O æ¯”ä¾‹ï¼ˆç£ç›˜/ç½‘ç»œæ…¢æ—¶å˜é«˜ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("st")])]),t._v(" "),v("td",[t._v("è¢«è™šæ‹ŸåŒ–ç³»ç»ŸæŠ¢å çš„æ—¶é—´ï¼ˆäº‘ä¸»æœºç‰¹æœ‰ï¼‰")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ”-å½“å‰ç³»ç»ŸçŠ¶æ€åˆ†æ-ä»æ¯ç§’å˜åŒ–è¡Œåˆ¤æ–­"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”-å½“å‰ç³»ç»ŸçŠ¶æ€åˆ†æ-ä»æ¯ç§’å˜åŒ–è¡Œåˆ¤æ–­"}},[t._v("#")]),t._v(" ğŸ” å½“å‰ç³»ç»ŸçŠ¶æ€åˆ†æï¼ˆä»æ¯ç§’å˜åŒ–è¡Œåˆ¤æ–­ï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("é¡¹ç›®")]),t._v(" "),v("th",[t._v("è§‚å¯Ÿå€¼")]),t._v(" "),v("th",[t._v("è§£è¯»")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("r")]),t._v(" å¹³å‡ 1~6")]),t._v(" "),v("td",[t._v("æœ‰æ—¶é«˜è¾¾ 6")]),t._v(" "),v("td",[t._v("æœ‰"),v("strong",[t._v("å¹¶å‘è´Ÿè½½")]),t._v("ä½†æ²¡è¿‡è½½ï¼ˆç³»ç»Ÿä¸º 4 æ ¸ï¼‰å±æ­£å¸¸")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("b")]),t._v(" ä¸€ç›´ä¸º 0")]),t._v(" "),v("td",[t._v("æ— è¿›ç¨‹é˜»å¡åœ¨ IO")]),t._v(" "),v("td",[t._v("æ²¡æœ‰æ˜æ˜¾ç£ç›˜ç“¶é¢ˆ")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("si/so")]),t._v(" ä¸º 0")]),t._v(" "),v("td",[t._v("æ²¡ç”¨ swapï¼ˆä¹Ÿç¡®å®æœªå¯ç”¨ï¼‰")]),t._v(" "),v("td",[t._v("âœ…")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("wa")]),t._v(" å¹³å‡ 1~4%")]),t._v(" "),v("td",[t._v("æœ‰å°‘é‡ IO ç­‰å¾…")]),t._v(" "),v("td",[t._v("å°è´Ÿè½½ï¼Œæ— éœ€æ‹…å¿§ï¼ŒæŒç»­è§‚å¯Ÿ")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("cs")]),t._v(" çº¦ 12w æ¬¡/s")]),t._v(" "),v("td",[v("strong",[t._v("çº¿ç¨‹è°ƒåº¦æé¢‘ç¹")]),t._v("ï¼Œå¯èƒ½ Java åº”ç”¨ä¸Šä¸‹æ–‡åˆ‡æ¢æ´»è·ƒ")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[v("code",[t._v("us+sy")]),t._v(" åœ¨ 17~28%")]),t._v(" "),v("td",[t._v("CPU åˆ©ç”¨åˆç†")]),t._v(" "),v("td",[t._v("æœ‰ä¸€å®šä¸šåŠ¡å‹åŠ›ä½†æ²¡æœ‰ç“¶é¢ˆ")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-æ€»ä½“ç»“è®º"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-æ€»ä½“ç»“è®º"}},[t._v("#")]),t._v(" âœ… æ€»ä½“ç»“è®º")]),t._v(" "),v("p",[t._v("å½“å‰ç³»ç»Ÿ "),v("strong",[t._v("è¿è¡Œå¥åº·ï¼Œæš‚æ— ä¸¥é‡ç“¶é¢ˆ")]),t._v("ï¼Œä»…æœ‰ä»¥ä¸‹è½»å¾®è´Ÿè½½ç°è±¡ï¼š")]),t._v(" "),v("ul",[v("li",[v("p",[v("code",[t._v("cs")]),t._v("ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰å¾ˆé«˜ï¼Œè¯´æ˜çº¿ç¨‹è°ƒåº¦é¢‘ç¹ï¼Œå¯èƒ½ä¸ï¼š")]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("RocketMQ / Cassandra å¤šçº¿ç¨‹å¹¶å‘å¤„ç†ä»»åŠ¡æœ‰å…³")])]),t._v(" "),v("li",[t._v("å¯ä»¥é€šè¿‡ "),v("code",[t._v("top -H -p <pid>")]),t._v(" å’Œ "),v("code",[t._v("jstack")]),t._v(" åˆ†æå…·ä½“çº¿ç¨‹æ´»è·ƒæƒ…å†µ")])])]),t._v(" "),v("li",[v("p",[v("code",[t._v("wa")]),t._v(" ç¨æœ‰æå‡ï¼ˆ1~4%ï¼‰ï¼Œè‹¥æŒç»­èµ°é«˜å¯è¿›ä¸€æ­¥åˆ†æ IO å±‚ï¼š")]),t._v(" "),v("ul",[v("li",[t._v("é€šè¿‡ "),v("code",[t._v("iostat -x 1")]),t._v("ã€"),v("code",[t._v("iotop")]),t._v(" æˆ– "),v("code",[t._v("dstat -dny")]),t._v(" æŸ¥çœ‹æ…¢ç›˜ã€IOé«˜è¿›ç¨‹")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ“Œ-åç»­å»ºè®®"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-åç»­å»ºè®®"}},[t._v("#")]),t._v(" ğŸ“Œ åç»­å»ºè®®")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åœºæ™¯")]),t._v(" "),v("th",[t._v("å»ºè®®")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("æŒç»­ cs å¾ˆé«˜")]),t._v(" "),v("td",[v("code",[t._v("perf top")]),t._v(" æˆ– "),v("code",[t._v("jstack")]),t._v(" æŸ¥çƒ­ç‚¹çº¿ç¨‹")])]),t._v(" "),v("tr",[v("td",[t._v("wa æ˜æ˜¾å‡é«˜")]),t._v(" "),v("td",[t._v("æŸ¥çœ‹ "),v("code",[t._v("iotop")]),t._v("ã€åˆ†åŒºæ˜¯å¦çˆ†å†™ã€æ…¢ç£ç›˜")])]),t._v(" "),v("tr",[v("td",[t._v("r > 4 æŒç»­é«˜")]),t._v(" "),v("td",[t._v("æ£€æŸ¥ CPU æ˜¯å¦ç“¶é¢ˆã€æ˜¯å¦éœ€è¦æ‰©å®¹")])]),t._v(" "),v("tr",[v("td",[t._v("swap æœªå¯ç”¨")]),t._v(" "),v("td",[t._v("å·²çŸ¥ä½†å·²å·¡æ£€å®Œæ¯•ï¼ˆä¸Šä¸€æ­¥å·²åˆ›å»ºè„šæœ¬ï¼‰")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ“‹-å‰åå†…å­˜å ç”¨è¿›ç¨‹åˆ†æè¡¨"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“‹-å‰åå†…å­˜å ç”¨è¿›ç¨‹åˆ†æè¡¨"}},[t._v("#")]),t._v(" ğŸ“‹ å‰åå†…å­˜å ç”¨è¿›ç¨‹åˆ†æè¡¨")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("æ’å")]),t._v(" "),v("th",[t._v("åº”ç”¨")]),t._v(" "),v("th",[t._v("%MEM")]),t._v(" "),v("th",[t._v("RSSï¼ˆå¸¸é©»å†…å­˜ï¼‰")]),t._v(" "),v("th",[t._v("Xmxé…ç½®")]),t._v(" "),v("th",[t._v("åˆ†æè¦ç‚¹")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("â‘ ")]),t._v(" "),v("td",[t._v("Elasticsearch")]),t._v(" "),v("td",[t._v("16.4%")]),t._v(" "),v("td",[t._v("~2.6 GB")]),t._v(" "),v("td",[v("code",[t._v("-Xmx2g")])]),t._v(" "),v("td",[t._v("å†…å­˜å·²æ¥è¿‘ä¸Šé™ï¼Œæ­£å¸¸ä½†éœ€ç›‘æ§ GC å’ŒæŸ¥è¯¢è´Ÿè½½")])]),t._v(" "),v("tr",[v("td",[t._v("â‘¡")]),t._v(" "),v("td",[t._v("RocketMQ Broker")]),t._v(" "),v("td",[t._v("8.5%")]),t._v(" "),v("td",[t._v("~1.3 GB")]),t._v(" "),v("td",[v("code",[t._v("-Xmx1g")])]),t._v(" "),v("td",[t._v("è¶…å‡ºé…ç½®å€¼ï¼ˆè¯´æ˜ä½¿ç”¨äº†ç›´æ¥å†…å­˜ / MappedByteBufferï¼‰")])]),t._v(" "),v("tr",[v("td",[t._v("â‘¢")]),t._v(" "),v("td",[t._v("Cassandra")]),t._v(" "),v("td",[t._v("6.0%")]),t._v(" "),v("td",[t._v("~964 MB")]),t._v(" "),v("td",[v("code",[t._v("-Xmx512m")])]),t._v(" "),v("td",[t._v("å†…å­˜æ˜æ˜¾è¶…å‡ºé…ç½®ï¼Œ"),v("strong",[t._v("å¯èƒ½å†…å­˜æ³„æ¼æˆ– jamm ç»Ÿè®¡ä¸å‡†")])])]),t._v(" "),v("tr",[v("td",[t._v("â‘£")]),t._v(" "),v("td",[t._v("Kafka ZK")]),t._v(" "),v("td",[t._v("2.6%")]),t._v(" "),v("td",[t._v("~428 MB")]),t._v(" "),v("td",[v("code",[t._v("-Xmx512m")])]),t._v(" "),v("td",[t._v("å±äº Zookeeperï¼Œä¸ç®—é«˜ï¼Œæ­£å¸¸")])]),t._v(" "),v("tr",[v("td",[t._v("â‘¤")]),t._v(" "),v("td",[t._v("ArgusAgent")]),t._v(" "),v("td",[t._v("1.7%")]),t._v(" "),v("td",[t._v("~283 MB")]),t._v(" "),v("td",[t._v("N/A")]),t._v(" "),v("td",[t._v("äº‘ç›‘æ§ Agentï¼Œè½»é‡æœåŠ¡")])]),t._v(" "),v("tr",[v("td",[t._v("â‘¥")]),t._v(" "),v("td",[t._v("MongoDB")]),t._v(" "),v("td",[t._v("1.7%")]),t._v(" "),v("td",[t._v("~272 MB")]),t._v(" "),v("td",[t._v("N/A")]),t._v(" "),v("td",[t._v("å†…å­˜å æ¯”åˆç†")])]),t._v(" "),v("tr",[v("td",[t._v("â‘¦")]),t._v(" "),v("td",[t._v("MariaDB")]),t._v(" "),v("td",[t._v("1.6%")]),t._v(" "),v("td",[t._v("~270 MB")]),t._v(" "),v("td",[t._v("N/A")]),t._v(" "),v("td",[t._v("å¯ç»“åˆ "),v("code",[t._v("innodb_buffer_pool_size")]),t._v(" ä¼˜åŒ–")])]),t._v(" "),v("tr",[v("td",[t._v("â‘§")]),t._v(" "),v("td",[t._v("RocketMQ NameServer")]),t._v(" "),v("td",[t._v("1.4%")]),t._v(" "),v("td",[t._v("~228 MB")]),t._v(" "),v("td",[v("code",[t._v("-Xmx512m")])]),t._v(" "),v("td",[t._v("å†…å­˜æ­£å¸¸ï¼ŒGC é…ç½®è¾ƒä¿å®ˆ")])]),t._v(" "),v("tr",[v("td",[t._v("â‘¨")]),t._v(" "),v("td",[t._v("ClickHouse")]),t._v(" "),v("td",[t._v("0.8%")]),t._v(" "),v("td",[t._v("~134 MB")]),t._v(" "),v("td",[t._v("N/A")]),t._v(" "),v("td",[t._v("éçƒ­ç‚¹æ—¶ä½å ç”¨åˆç†")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ”-å…³é”®è¯Šæ–­ç»“è®º"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”-å…³é”®è¯Šæ–­ç»“è®º"}},[t._v("#")]),t._v(" ğŸ” å…³é”®è¯Šæ–­ç»“è®º")]),t._v(" "),v("h3",{attrs:{id:"âœ…-æ­£å¸¸æƒ…å†µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-æ­£å¸¸æƒ…å†µ"}},[t._v("#")]),t._v(" âœ… æ­£å¸¸æƒ…å†µï¼š")]),t._v(" "),v("ul",[v("li",[t._v("ESã€RocketMQã€Cassandra éƒ½è¿è¡Œåœ¨è¾ƒé«˜è´Ÿè½½ä¸‹ï¼Œä½†ä»åœ¨ç³»ç»Ÿæ€»å†…å­˜æ‰¿å—èŒƒå›´å†…ã€‚")]),t._v(" "),v("li",[t._v("MongoDBã€MariaDBã€ClickHouse å ç”¨è½»é‡ï¼Œæ— æ€§èƒ½éšæ‚£ã€‚")])]),t._v(" "),v("h3",{attrs:{id:"âš ï¸-å¼‚å¸¸-éœ€å…³æ³¨ç‚¹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âš ï¸-å¼‚å¸¸-éœ€å…³æ³¨ç‚¹"}},[t._v("#")]),t._v(" âš ï¸ å¼‚å¸¸/éœ€å…³æ³¨ç‚¹ï¼š")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("é—®é¢˜")]),t._v(" "),v("th",[t._v("å»ºè®®")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Cassandra ä½¿ç”¨è¶…å‡º "),v("code",[t._v("Xmx512M")]),t._v(" æ˜æ˜¾å¼‚å¸¸")]),t._v(" "),v("td",[t._v("- å¯èƒ½æ˜¯ native memory æ³„æ¼ï¼ˆå¦‚ jemalloc æœªé™åˆ¶ï¼‰ - å»ºè®® "),v("strong",[t._v("å¢åŠ  Xmx åˆ° 1~2G å¹¶é™åˆ¶ jemalloc preload")]),t._v(" æˆ–è§‚å¯Ÿ "),v("code",[t._v("jcmd/jmap")])])]),t._v(" "),v("tr",[v("td",[t._v("RocketMQ Broker è¶…å‡º "),v("code",[t._v("Xmx1G")])]),t._v(" "),v("td",[t._v("- è¯´æ˜ä½¿ç”¨äº†å¤§é‡ off-heapï¼ˆå¦‚ commitlog æ˜ å°„ï¼‰ - æ£€æŸ¥ "),v("code",[t._v("MaxDirectMemorySize")]),t._v("ã€PageCache æ˜¯å¦å‘½ä¸­ç‡ä½")])]),t._v(" "),v("tr",[v("td",[t._v("ES å ç”¨ 2.6G æ¥è¿‘ä¸Šé™")]),t._v(" "),v("td",[t._v("- è‹¥é¢‘ç¹ Full GCï¼Œå¯å¢åŠ  "),v("code",[t._v("Xmx")]),t._v(" æˆ–ä¼˜åŒ–æŸ¥è¯¢ DSL / åˆ†ç‰‡æ•°")])]),t._v(" "),v("tr",[v("td",[t._v("æ—  Swap ç©ºé—´ï¼Œç³»ç»Ÿä¸´ç•ŒçŠ¶æ€é£é™©é«˜")]),t._v(" "),v("td",[t._v("- å»ºè®®ç«‹å³æŒ‚è½½ "),v("code",[t._v("swap")]),t._v("ï¼Œå‚è€ƒå‰è¿°è„šæœ¬ "),v("code",[t._v("enable_swap.sh")])])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ› ï¸-ä¸‹ä¸€æ­¥å»ºè®®æ“ä½œ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ› ï¸-ä¸‹ä¸€æ­¥å»ºè®®æ“ä½œ"}},[t._v("#")]),t._v(" ğŸ› ï¸ ä¸‹ä¸€æ­¥å»ºè®®æ“ä½œ")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("ç›®æ ‡")]),t._v(" "),v("th",[t._v("å»ºè®®æ“ä½œ")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("åˆ†æ Cassandra å†…å­˜ä½¿ç”¨")]),t._v(" "),v("td",[v("code",[t._v("jcmd <pid> VM.native_memory summary")]),t._v(" æˆ– "),v("code",[t._v("jmap -heap <pid>")])])]),t._v(" "),v("tr",[v("td",[t._v("æ£€æŸ¥ RocketMQ æ˜¯å¦ DirectMemory ä½¿ç”¨è¶…é™")]),t._v(" "),v("td",[t._v("æŸ¥çœ‹ "),v("code",[t._v("MaxDirectMemorySize")]),t._v("ã€æ—¥å¿— GC FullGC é¢‘ç‡")])]),t._v(" "),v("tr",[v("td",[t._v("ES ä¼˜åŒ–")]),t._v(" "),v("td",[t._v("- æŸ¥çœ‹ "),v("code",[t._v("/_cat/segments?v")]),t._v(" æ˜¯å¦ç¢ç‰‡å¤š - "),v("code",[t._v("/_nodes/stats/jvm")]),t._v(" çœ‹ GC stats")])]),t._v(" "),v("tr",[v("td",[t._v("å®šæœŸå·¡æ£€è„šæœ¬åŠ å…¥ mem + GC æ£€æµ‹")]),t._v(" "),v("td",[t._v("æ‰©å±•å‰è¿°å·¡æ£€è„šæœ¬ä¸­æ·»åŠ ï¼š"),v("code",[t._v("jstat -gc <pid>")]),t._v(" / "),v("code",[t._v("grep -i gc.log")])])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ“Š-å½“å‰å†…å­˜ä½¿ç”¨æƒ…å†µ-å•ä½-gb"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Š-å½“å‰å†…å­˜ä½¿ç”¨æƒ…å†µ-å•ä½-gb"}},[t._v("#")]),t._v(" ğŸ“Š å½“å‰å†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆå•ä½ï¼šGBï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("é¡¹ç›®")]),t._v(" "),v("th",[t._v("æ•°å€¼")]),t._v(" "),v("th",[t._v("è¯´æ˜")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("total")])]),t._v(" "),v("td",[t._v("15G")]),t._v(" "),v("td",[t._v("æ€»ç‰©ç†å†…å­˜")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("used")])]),t._v(" "),v("td",[t._v("7.1G")]),t._v(" "),v("td",[t._v("å·²ä½¿ç”¨ï¼ˆä¸åŒ…æ‹¬ç¼“å­˜ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("free")])]),t._v(" "),v("td",[t._v("732M")]),t._v(" "),v("td",[t._v("çœŸæ­£æœªè¢«ä½¿ç”¨çš„å†…å­˜ï¼ˆå¾ˆå°‘ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("buff/cache")])]),t._v(" "),v("td",[t._v("7.4G")]),t._v(" "),v("td",[t._v("è¢«æ“ä½œç³»ç»Ÿç”¨äºç¼“å­˜ï¼ˆå¯å›æ”¶ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("available")])]),t._v(" "),v("td",[t._v("7.8G")]),t._v(" "),v("td",[t._v("å®é™…å¯ç”¨ï¼ˆç©ºé—² + å¯å›æ”¶ç¼“å­˜ï¼‰")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ§ -å†…å­˜ä½¿ç”¨è§£è¯»"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§ -å†…å­˜ä½¿ç”¨è§£è¯»"}},[t._v("#")]),t._v(" ğŸ§  å†…å­˜ä½¿ç”¨è§£è¯»ï¼š")]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("ç©ºé—²å†…å­˜ï¼ˆfreeï¼‰ä»… 732MB")]),t._v("ï¼Œçœ‹ä¼¼å¾ˆå°‘ï¼Œä½†è¿™æ˜¯ Linux çš„æ­£å¸¸è¡¨ç°ã€‚")]),t._v(" "),v("li",[v("strong",[t._v("buff/cache é«˜è¾¾ 7.4G")]),t._v("ï¼šLinux ä¼šæŠŠæ²¡è¢«ç”¨çš„å†…å­˜å°½å¯èƒ½ç”¨æ¥ç¼“å­˜ç£ç›˜æ•°æ®ï¼Œä»¥æå‡ç³»ç»Ÿæ•ˆç‡ã€‚")]),t._v(" "),v("li",[v("strong",[t._v("available è¾¾åˆ° 7.8G")]),t._v("ï¼šè¯´æ˜è¿˜æœ‰è¶³å¤Ÿçš„å†…å­˜ä¾›æ–°ç¨‹åºä½¿ç”¨ï¼Œä¸å­˜åœ¨çœŸæ­£çš„å†…å­˜å‹åŠ›ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"â„ï¸-swap-åˆ†åŒºæƒ…å†µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#â„ï¸-swap-åˆ†åŒºæƒ…å†µ"}},[t._v("#")]),t._v(" â„ï¸ Swap åˆ†åŒºæƒ…å†µï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("Swap: 0B total, 0B used\n")])])]),v("blockquote",[v("p",[t._v("ç³»ç»Ÿå½“å‰æ²¡æœ‰å¯ç”¨ Swap åˆ†åŒºï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰äº¤æ¢ç©ºé—´ã€‚")])]),t._v(" "),v("h3",{attrs:{id:"ğŸ“Œ-æœ‰æ— -swap-çš„åŒºåˆ«"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-æœ‰æ— -swap-çš„åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ“Œ æœ‰æ—  Swap çš„åŒºåˆ«ï¼š")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("é¡¹ç›®")]),t._v(" "),v("th",[t._v("æœ‰ Swap")]),t._v(" "),v("th",[t._v("æ—  Swap")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("å†…å­˜æ»¡å")]),t._v(" "),v("td",[t._v("ä¼šæš‚å­˜åˆ°ç¡¬ç›˜ï¼ˆæ…¢ï¼‰")]),t._v(" "),v("td",[t._v("ä¼šç›´æ¥è§¦å‘ OOM æ€æ­»è¿›ç¨‹")])]),t._v(" "),v("tr",[v("td",[t._v("ç¨³å®šæ€§")]),t._v(" "),v("td",[t._v("æ›´ç¨³")]),t._v(" "),v("td",[t._v("æœ‰ OOM é£é™©")])]),t._v(" "),v("tr",[v("td",[t._v("æ€§èƒ½")]),t._v(" "),v("td",[t._v("å¶å°”æ…¢ï¼ˆå¦‚å¤§ GCï¼‰")]),t._v(" "),v("td",[t._v("æ›´é«˜ï¼ˆæ— æ¢é¡µï¼‰")])])])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"âœ…-å»ºè®®æ˜¯å¦å¼€å¯-swap"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-å»ºè®®æ˜¯å¦å¼€å¯-swap"}},[t._v("#")]),t._v(" âœ… å»ºè®®æ˜¯å¦å¼€å¯ Swapï¼Ÿ")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("åœºæ™¯")]),t._v(" "),v("th",[t._v("å»ºè®®")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("åº”ç”¨å¯æ§ã€æœåŠ¡è½»é‡")]),t._v(" "),v("td",[v("strong",[t._v("å¯ä¸å¯ç”¨")]),t._v("ï¼Œé¿å…é¢‘ç¹æ¢é¡µ")])]),t._v(" "),v("tr",[v("td",[t._v("æœ‰ JVMã€å¤§å†…å­˜æœåŠ¡ï¼ˆå¦‚ Cassandraã€Elasticsearchï¼‰")]),t._v(" "),v("td",[t._v("âœ… "),v("strong",[t._v("å»ºè®®å¯ç”¨ 2~4GB swap åˆ†åŒº")]),t._v(" ä½œä¸ºä¿æŠ¤")])]),t._v(" "),v("tr",[v("td",[t._v("äº‘æœåŠ¡å™¨ï¼ˆå¦‚é˜¿é‡Œäº‘ ECSï¼‰")]),t._v(" "),v("td",[t._v("å¯ç”¨ "),v("code",[t._v("swapfile")]),t._v(" å¿«é€ŸæŒ‚è½½ä¸´æ—¶ swap ç©ºé—´")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ› ï¸-å¿«é€Ÿæ·»åŠ -swap-ç¤ºä¾‹-æ— éœ€é‡å¯"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ› ï¸-å¿«é€Ÿæ·»åŠ -swap-ç¤ºä¾‹-æ— éœ€é‡å¯"}},[t._v("#")]),t._v(" ğŸ› ï¸ å¿«é€Ÿæ·»åŠ  Swap ç¤ºä¾‹ï¼ˆæ— éœ€é‡å¯ï¼‰")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("# åˆ›å»ºä¸€ä¸ª 2GB çš„ swap æ–‡ä»¶\nfallocate -l 2G /swapfile\nchmod 600 /swapfile\nmkswap /swapfile\nswapon /swapfile\n\n# æŸ¥çœ‹æ•ˆæœ\nfree -h\n")])])]),v("blockquote",[v("p",[t._v("å¦‚éœ€æ°¸ä¹…ç”Ÿæ•ˆï¼Œè¯·åœ¨ "),v("code",[t._v("/etc/fstab")]),t._v(" ä¸­æ·»åŠ ï¼š")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("/swapfile none swap sw 0 0\n")])])]),v("hr"),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("ğŸ“‹ ç³»ç»Ÿæ€§èƒ½å·¡æ£€æŠ¥å‘Š - Sun May 18 08:45:43     2025\n=========================================\n\nğŸ§  [CPU ä½¿ç”¨æƒ…å†µ]\n./sys_check.sh: line 8: mpstat: command not found\n\nğŸ“ˆ [ç³»ç»Ÿè´Ÿè½½ - load average]\n./sys_check.sh: line 12: uptime: command not found\n\nğŸ”¥ [Top 5 CPU å ç”¨è¿›ç¨‹]\nps: unknown option -- o\nTry `ps --help' for more information.\n\nğŸ’¾ [Top 5 å†…å­˜å ç”¨è¿›ç¨‹]\nps: unknown option -- o\nTry `ps --help' for more information.\n\nğŸ“Š [å†…å­˜ä½¿ç”¨ free -h]\n./sys_check.sh: line 24: free: command not found\n\nğŸ§Š [Swap ä½¿ç”¨æƒ…å†µ]\n./sys_check.sh: line 28: swapon: command not found\næœªå¯ç”¨ swap\n\nğŸ–´ [ç£ç›˜ IO æ€§èƒ½ iostat]\n./sys_check.sh: line 32: iostat: command not found\n\nğŸ’½ [ç£ç›˜ä½¿ç”¨æƒ…å†µ df -h]\nFilesystem       Size  Used Avail Use% Mounted on\nD:/software/Git  621G  334G  288G  54% /\nC:               300G  199G  102G  67% /c\n\nğŸ§± [ç£ç›˜ inode ä½¿ç”¨æƒ…å†µ]\nFilesystem      Inodes IUsed IFree IUse% Mounted on\nD:/software/Git      -     -     -     - /\nC:                   -     -     -     - /c\n\nğŸŒ [ç½‘ç»œè¿æ¥ç»Ÿè®¡ ss -s]\n./sys_check.sh: line 44: ss: command not found\n\nğŸ“¡ [ç½‘ç»œæµé‡]\nâ— æœªå®‰è£… ifstatï¼Œè·³è¿‡ç½‘ç»œæµé‡é‡‡é›†\n\nâš ï¸ [å…³é”®ç³»ç»Ÿæ—¥å¿— (dmesg)]\n./sys_check.sh: line 57: dmesg: command not found\n\nâœ… å·¡æ£€å®Œæˆï¼\n\n")])])]),v("h2",{attrs:{id:"ğŸ“‹-å­—æ®µä¸­æ–‡å«ä¹‰"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“‹-å­—æ®µä¸­æ–‡å«ä¹‰"}},[t._v("#")]),t._v(" ğŸ“‹ å­—æ®µä¸­æ–‡å«ä¹‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("%usr")])]),t._v(" "),v("td",[t._v("ç”¨æˆ·æ€ CPU ä½¿ç”¨ç‡ï¼ˆå¦‚ Javaã€Python ç¨‹åºï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%nice")])]),t._v(" "),v("td",[t._v("æ”¹å˜ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨ç‡ï¼ˆé€šå¸¸ä¸º 0ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%sys")])]),t._v(" "),v("td",[t._v("å†…æ ¸æ€ CPU ä½¿ç”¨ç‡ï¼ˆç³»ç»Ÿè°ƒç”¨ã€é©±åŠ¨ç­‰ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%iowait")])]),t._v(" "),v("td",[t._v("ç­‰å¾… I/O çš„ CPU æ—¶é—´å æ¯”ï¼ˆç£ç›˜æˆ–ç½‘ç»œæ…¢ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%irq")])]),t._v(" "),v("td",[t._v("ç¡¬ä»¶ä¸­æ–­æ—¶é—´å æ¯”ï¼ˆå¦‚ç½‘å¡ä¸­æ–­ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%soft")])]),t._v(" "),v("td",[t._v("è½¯ä»¶ä¸­æ–­ï¼ˆå¦‚å†…æ ¸å®šæ—¶å™¨ã€ç½‘ç»œåè®®æ ˆï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%steal")])]),t._v(" "),v("td",[t._v("è¢«è™šæ‹ŸåŒ–ç¯å¢ƒæŠ¢å çš„ CPU æ—¶é—´ï¼ˆå¦‚äº‘æœåŠ¡å™¨ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%idle")])]),t._v(" "),v("td",[t._v("ç©ºé—²æ—¶é—´")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-å…³é”®æ•°æ®è§£è¯»-æ±‡æ€»è§†è§’"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-å…³é”®æ•°æ®è§£è¯»-æ±‡æ€»è§†è§’"}},[t._v("#")]),t._v(" âœ… å…³é”®æ•°æ®è§£è¯»ï¼ˆæ±‡æ€»è§†è§’ï¼‰")]),t._v(" "),v("h3",{attrs:{id:"ğŸ“ˆ-æ±‡æ€»è¡Œ-cpu-all-æ•´ä½“å¹³å‡"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“ˆ-æ±‡æ€»è¡Œ-cpu-all-æ•´ä½“å¹³å‡"}},[t._v("#")]),t._v(" ğŸ“ˆ æ±‡æ€»è¡Œ "),v("code",[t._v("CPU all")]),t._v("ï¼ˆæ•´ä½“å¹³å‡ï¼‰ï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("%usr:  9.68%\n%sys:  4.30%\n%iowait: 2.15%\n%soft: 2.42%\n%idle: 81.45%\n")])])]),v("h3",{attrs:{id:"ğŸ§ -åˆ†æ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§ -åˆ†æ"}},[t._v("#")]),t._v(" ğŸ§  åˆ†æï¼š")]),t._v(" "),v("ul",[v("li",[t._v("æ•´ä½“ CPU åˆ©ç”¨ç‡ä¸ç®—é«˜ï¼Œ"),v("strong",[t._v("81% ç©ºé—²")])]),t._v(" "),v("li",[t._v("ç”¨æˆ·æ€ä½¿ç”¨ç‡ ~9.68%ï¼Œè¯´æ˜æœ‰æ­£å¸¸çš„ä¸šåŠ¡è´Ÿè½½ï¼ˆå¦‚ Cassandraï¼‰")]),t._v(" "),v("li",[v("code",[t._v("iowait")]),t._v(" ä¸º "),v("strong",[t._v("2.15%")]),t._v(" ï¼Œè½»å¾® I/O ç­‰å¾…ï¼Œ"),v("strong",[t._v("ä¸ä¸¥é‡ä½†å€¼å¾—æŒç»­è§‚å¯Ÿ")])]),t._v(" "),v("li",[v("code",[t._v("soft")]),t._v("ï¼ˆè½¯ä»¶ä¸­æ–­ï¼‰ä¸º "),v("strong",[t._v("2.42%")]),t._v(" ï¼Œè¯´æ˜æœ‰ä¸€äº›ç½‘ç»œã€IO æˆ–å†…æ ¸äº‹ä»¶å‹åŠ›ï¼ˆå¯æ’æŸ¥ç½‘ç»œæµé‡ï¼‰")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ§ -åˆ†æ ¸å¿ƒåˆ†æ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§ -åˆ†æ ¸å¿ƒåˆ†æ"}},[t._v("#")]),t._v(" ğŸ§  åˆ†æ ¸å¿ƒåˆ†æï¼š")]),t._v(" "),v("p",[t._v("| æ ¸å¿ƒ | %usr | %sys | %iowait | %soft | %idle | è¯´æ˜ |"),v("br"),t._v("\n|------|------|------|---------|--------|--------|"),v("br"),t._v("\n| CPU0 | 7.61 | 4.35 | 3.26 | 3.26 | 81.52 | IO/è½¯ä¸­æ–­ç•¥é«˜ï¼Œç¨³å®š |"),v("br"),t._v("\n| CPU1 | 12.77| 3.19 | 2.13 | 1.06 | 80.85 | ä¸»è¦åœ¨å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ Java çº¿ç¨‹ï¼‰ |"),v("br"),t._v("\n| CPU2 | 8.79 | 4.40 | 1.10 | 4.40 | 81.32 | soft è¾ƒé«˜ï¼Œå¯èƒ½æ˜¯ç½‘ç»œæˆ– Cassandra çº¿ç¨‹æ± æŠ¢å  |"),v("br"),t._v("\n| CPU3 | 8.60 | 3.23 | 2.15 | 1.08 | 84.95 | æœ€è½»æ¾çš„æ ¸ä¹‹ä¸€ |")]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ”-åˆæ­¥ç»“è®º"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”-åˆæ­¥ç»“è®º"}},[t._v("#")]),t._v(" ğŸ” åˆæ­¥ç»“è®º")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("å½“å‰ç³»ç»Ÿæ•´ä½“ "),v("strong",[t._v("æ— ä¸¥é‡ CPU ç“¶é¢ˆ")]),t._v("ï¼Œä¸»è¦æ˜¯ï¼š")]),t._v(" "),v("ul",[v("li",[t._v("Cassandraã€RocketMQ è¿›ç¨‹åœ¨åˆç†ä½¿ç”¨èµ„æº")]),t._v(" "),v("li",[v("strong",[t._v("éƒ¨åˆ†æ ¸å¿ƒ "),v("code",[t._v("soft")]),t._v(" è¾ƒé«˜")]),t._v("ï¼Œå¯èƒ½æ˜¯ "),v("strong",[t._v("ç½‘ç»œä¸­æ–­æˆ– Java åº”ç”¨çº¿ç¨‹åˆ‡æ¢é¢‘ç¹")])])])]),t._v(" "),v("li",[v("p",[t._v("å¦‚æœä½ åœ¨æ’æŸ¥æ€§èƒ½ç“¶é¢ˆï¼Œ"),v("strong",[t._v("æ›´å¯èƒ½å‡ºç°åœ¨ JVM å±‚ï¼ˆGCã€çº¿ç¨‹è°ƒåº¦ï¼‰æˆ–ç£ç›˜ IO å±‚")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ“Œ-å»ºè®®ä¸‹ä¸€æ­¥æ’æŸ¥"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-å»ºè®®ä¸‹ä¸€æ­¥æ’æŸ¥"}},[t._v("#")]),t._v(" ğŸ“Œ å»ºè®®ä¸‹ä¸€æ­¥æ’æŸ¥ï¼š")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("æ’æŸ¥é¡¹")]),t._v(" "),v("th",[t._v("å‘½ä»¤/å»ºè®®")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("æŸ¥çœ‹ Cassandra æ˜¯å¦ GC é¢‘ç¹")]),t._v(" "),v("td",[v("code",[t._v("tail -f gc.log")]),t._v(" æˆ–ä½¿ç”¨ "),v("code",[t._v("jstat -gc PID 1s 10")])])]),t._v(" "),v("tr",[v("td",[t._v("æŸ¥çœ‹è½¯ä¸­æ–­æ¥æº")]),t._v(" "),v("td",[v("code",[t._v("cat /proc/softirqs")]),t._v(" è§‚å¯Ÿå“ªä¸€ç±»ä¸­æ–­é¢‘ç¹ï¼ˆå¦‚ NET_RXï¼‰")])]),t._v(" "),v("tr",[v("td",[t._v("ç£ç›˜ IO")]),t._v(" "),v("td",[v("code",[t._v("iostat -x 1")]),t._v(" æˆ– "),v("code",[t._v("iotop")])])]),t._v(" "),v("tr",[v("td",[t._v("ç½‘ç»œæµé‡ç“¶é¢ˆ")]),t._v(" "),v("td",[v("code",[t._v("iftop")]),t._v(" æˆ– "),v("code",[t._v("nload")]),t._v("ï¼Œçœ‹æ˜¯å¦æœ‰å¡é¡¿æˆ–é«˜æµé‡è¿›ç¨‹")])]),t._v(" "),v("tr",[v("td",[t._v("Cassandra å‹åŠ›")]),t._v(" "),v("td",[t._v("æŸ¥è¯¢æ…¢æ—¥å¿—ã€Compaction çŠ¶æ€ã€Pending Tasks")])])])]),t._v(" "),v("hr"),t._v(" "),v("p",[t._v("Linux 3.10.0-1160.76.1.el7.x86_64 (node-6) 05/18/2025 "),v("em",[t._v("x86_64")]),t._v(" (4 CPU)\n08:07:05 AM CPU %usr %nice %sys %iowait %irq %soft %steal %guest %gnice %idle")]),t._v(" "),v("h2",{attrs:{id:"ğŸ“‹-è¡¨å¤´è¯´æ˜-å­—æ®µè§£é‡Š"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“‹-è¡¨å¤´è¯´æ˜-å­—æ®µè§£é‡Š"}},[t._v("#")]),t._v(" ğŸ“‹ è¡¨å¤´è¯´æ˜ï¼ˆå­—æ®µè§£é‡Šï¼‰")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("USER")])]),t._v(" "),v("td",[t._v("å¯åŠ¨è¯¥è¿›ç¨‹çš„ç”¨æˆ·")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("PID")])]),t._v(" "),v("td",[t._v("è¿›ç¨‹ ID")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%CPU")])]),t._v(" "),v("td",[t._v("CPU ä½¿ç”¨ç‡ï¼ˆè¶Šé«˜è¯´æ˜è¯¥è¿›ç¨‹å ç”¨è¶Šå¤š CPUï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%MEM")])]),t._v(" "),v("td",[t._v("å†…å­˜ä½¿ç”¨ç‡")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("VSZ")])]),t._v(" "),v("td",[t._v("è™šæ‹Ÿå†…å­˜å¤§å°ï¼ˆå•ä½ KBï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("RSS")])]),t._v(" "),v("td",[t._v("å¸¸é©»å†…å­˜å¤§å°ï¼ˆå®é™…å ç”¨çš„ç‰©ç†å†…å­˜ï¼Œå•ä½ KBï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("TTY")])]),t._v(" "),v("td",[t._v("ç»ˆç«¯è®¾å¤‡ï¼ˆå¤§å¤šæ•°æœåŠ¡è¿›ç¨‹ä¸º "),v("code",[t._v("?")]),t._v("ï¼Œè¡¨ç¤ºä¸æ˜¯ç”±ç»ˆç«¯å¯åŠ¨ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("STAT")])]),t._v(" "),v("td",[t._v("è¿›ç¨‹çŠ¶æ€ï¼ˆå¦‚ S=ç¡çœ ï¼ŒR=è¿è¡Œï¼ŒZ=åƒµå°¸ï¼ŒSsl=æœ‰æ§åˆ¶ç»ˆç«¯+åå°è¿è¡Œï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("START")])]),t._v(" "),v("td",[t._v("è¿›ç¨‹å¯åŠ¨æ—¶é—´")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("TIME")])]),t._v(" "),v("td",[t._v("ç´¯è®¡å ç”¨ CPU çš„æ—¶é—´ï¼ˆè¶Šå¤§è¶Šå ç”¨èµ„æºï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("COMMAND")])]),t._v(" "),v("td",[t._v("æ‰§è¡Œå‘½ä»¤åŠå…¶å‚æ•°")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ”-æ¯ä¸€è¡Œçš„ä¸­æ–‡é€è¡Œè§£é‡Š"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”-æ¯ä¸€è¡Œçš„ä¸­æ–‡é€è¡Œè§£é‡Š"}},[t._v("#")]),t._v(" ğŸ” æ¯ä¸€è¡Œçš„ä¸­æ–‡é€è¡Œè§£é‡Š")]),t._v(" "),v("h3",{attrs:{id:"_1-cassandra-java-è¿›ç¨‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-cassandra-java-è¿›ç¨‹"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘  Cassandra Java è¿›ç¨‹")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("cassand+ 31037 27.5  5.9 3707904 954832 ? Ssl Apr25 8990:29 java ... CassandraDaemon\n")])])]),v("ul",[v("li",[v("strong",[t._v("CPU å æ¯” 27.5%")]),t._v(" ï¼Œé•¿æœŸè¿è¡Œï¼ˆç´¯è®¡å ç”¨è¿‘ 9000 åˆ†é’Ÿï¼‰")]),t._v(" "),v("li",[t._v("è¯´æ˜ Cassandra æ•°æ®åº“å®ä¾‹é•¿æœŸå ç”¨ CPUï¼Œéå¸¸å¯ç–‘ï¼Œéœ€é‡ç‚¹æ’æŸ¥ã€‚")]),t._v(" "),v("li",[t._v("å‚æ•°æ˜¾ç¤º "),v("code",[t._v("-Xms512M -Xmx512M")]),t._v("ï¼Œå†…å­˜è®¾ç½®å¾ˆä½ï¼Œå¯èƒ½æ˜¯æ€§èƒ½ç“¶é¢ˆã€‚")])]),t._v(" "),v("h3",{attrs:{id:"_2-rocketmq-broker"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-rocketmq-broker"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘¡ RocketMQ Broker")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("xxx 5500  7.0  8.5 7110980 1365700 ? Sl Apr25 2288:02 java ... BrokerStartup\n")])])]),v("ul",[v("li",[v("strong",[t._v("CPU å ç”¨ 7.0%")]),t._v(" ï¼Œå ç”¨å†…å­˜è¾ƒå¤šï¼ˆ~1.3GBï¼‰")]),t._v(" "),v("li",[t._v("æ˜¯ä¸€ä¸ª RocketMQ çš„ broker èŠ‚ç‚¹")]),t._v(" "),v("li",[t._v("è´Ÿè½½æ˜æ˜¾ï¼Œä½†ä¸å¼‚å¸¸ï¼Œå¯èƒ½æ¶ˆæ¯é‡å¤§æ—¶æ‹‰é«˜")])]),t._v(" "),v("h3",{attrs:{id:"_3-clickhouse-æ•°æ®åº“"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-clickhouse-æ•°æ®åº“"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘¢ ClickHouse æ•°æ®åº“")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("101 1873  2.6  0.8 6164148 142632 ? Sl Apr15 1254:38 clickhouse-server\n")])])]),v("ul",[v("li",[v("strong",[t._v("è½»å¾® CPU å ç”¨")]),t._v("ï¼Œå¸¸é©»æœåŠ¡ï¼Œè¯´æ˜æœ‰æ´»è·ƒæŸ¥è¯¢æˆ–èšåˆä»»åŠ¡")])]),t._v(" "),v("h3",{attrs:{id:"_4-elasticsearch"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-elasticsearch"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘£ Elasticsearch")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("cassand+ 7240  2.6 16.3 8373412 2621424 ? Sl May16 54:21 java ... elasticsearch\n")])])]),v("ul",[v("li",[v("strong",[t._v("CPU å ç”¨æ­£å¸¸ï¼Œå†…å­˜å æ¯”æé«˜")]),t._v("ï¼ˆ2.5GBï¼Œ16.3%ï¼‰")]),t._v(" "),v("li",[t._v("å¦‚æœæ²¡æœ‰ç¦ç”¨ swap ä¸”å†…å­˜ç´§å¼ ï¼ŒES å®¹æ˜“å¼•å‘ GC æˆ–å¡é¡¿")])]),t._v(" "),v("h3",{attrs:{id:"_5-kubelet"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_5-kubelet"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘¤ Kubelet")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("root 12693  1.3  0.4 1599980 79768 ? Ssl Apr03 891:25 kubelet ...\n")])])]),v("ul",[v("li",[t._v("Kubernetes ç®¡ç†ç»„ä»¶ï¼Œç”¨äº Node èŠ‚ç‚¹çŠ¶æ€åŒæ­¥")]),t._v(" "),v("li",[t._v("å ç”¨ä¸é«˜ï¼Œå±æ­£å¸¸èŒƒå›´")])]),t._v(" "),v("h3",{attrs:{id:"_6-docker-daemon"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_6-docker-daemon"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘¥ Docker Daemon")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("root 12415  0.9  0.4 1842672 76780 ? Ssl Apr03 613:03 dockerd ...\n")])])]),v("ul",[v("li",[t._v("Docker æœåŠ¡å®ˆæŠ¤è¿›ç¨‹ï¼Œé•¿æœŸè¿è¡Œçš„æ­£å¸¸çŠ¶æ€")])]),t._v(" "),v("h3",{attrs:{id:"_7-é˜¿é‡Œäº‘å®‰å…¨ç›‘æ§è¿›ç¨‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_7-é˜¿é‡Œäº‘å®‰å…¨ç›‘æ§è¿›ç¨‹"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘¦ é˜¿é‡Œäº‘å®‰å…¨ç›‘æ§è¿›ç¨‹")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("root 14943  0.9  0.1 175748 25652 ? Ssl Apr15 445:20 AliYunDunMonitor\n")])])]),v("ul",[v("li",[t._v("é˜¿é‡Œäº‘æœåŠ¡å™¨å®‰å…¨ agentï¼ŒCPU å ç”¨ç¨³å®š")])]),t._v(" "),v("h3",{attrs:{id:"_8-å†…æ ¸å·¥ä½œçº¿ç¨‹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_8-å†…æ ¸å·¥ä½œçº¿ç¨‹"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘§ å†…æ ¸å·¥ä½œçº¿ç¨‹")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("root 12709  0.8  0.0 0 0 ? S< 06:54 0:16 [kworker/2:2H]\n")])])]),v("ul",[v("li",[t._v("åå°ç¡¬ä»¶å¤„ç†çº¿ç¨‹ï¼ˆå†…æ ¸çº§ï¼‰ï¼Œç•¥æœ‰æ´»åŠ¨")])]),t._v(" "),v("h3",{attrs:{id:"_9-äº‘ç›‘æ§-agent"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_9-äº‘ç›‘æ§-agent"}},[t._v("#")]),t._v(" "),v("strong",[t._v("â‘¨ äº‘ç›‘æ§ Agent")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("root 21524  0.3  1.7 2165708 283472 ? Sl 2023 3406:46 argusagent\n")])])]),v("ul",[v("li",[t._v("é˜¿é‡Œäº‘/è…¾è®¯äº‘ç­‰ç›‘æ§ agentï¼Œå ç”¨ç•¥é«˜ä½†å¯ä»¥æ¥å—")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ“Œ-å½“å‰ç³»ç»ŸçŠ¶å†µæ€»ç»“"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-å½“å‰ç³»ç»ŸçŠ¶å†µæ€»ç»“"}},[t._v("#")]),t._v(" ğŸ“Œ å½“å‰ç³»ç»ŸçŠ¶å†µæ€»ç»“")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("é¡¹ç›®")]),t._v(" "),v("th",[t._v("ç»“è®º")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("é«˜ CPU å ç”¨è¿›ç¨‹")])]),t._v(" "),v("td",[t._v("Cassandraã€RocketMQ Broker")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("é«˜å†…å­˜è¿›ç¨‹")])]),t._v(" "),v("td",[t._v("Elasticsearchã€RocketMQ")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("å…³é”®å»ºè®®")])]),t._v(" "),v("td",[t._v("Cassandra å·²é•¿æœŸå ç”¨å¤§é‡ CPUï¼Œåº”æ£€æŸ¥å…¶è´Ÿè½½æ˜¯å¦å¼‚å¸¸")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"âœ…-åç»­æ’æŸ¥å»ºè®®-é‡ç‚¹-cassandra"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-åç»­æ’æŸ¥å»ºè®®-é‡ç‚¹-cassandra"}},[t._v("#")]),t._v(" âœ… åç»­æ’æŸ¥å»ºè®®ï¼ˆé‡ç‚¹ Cassandraï¼‰ï¼š")]),t._v(" "),v("h3",{attrs:{id:"â–¶-1-çº¿ç¨‹å±‚çº§åˆ†æ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#â–¶-1-çº¿ç¨‹å±‚çº§åˆ†æ"}},[t._v("#")]),t._v(" â–¶ 1. çº¿ç¨‹å±‚çº§åˆ†æ")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("top -Hp 31037            # æ‰¾å‡º Cassandra çš„é«˜ CPU çº¿ç¨‹\n")])])]),v("h3",{attrs:{id:"â–¶-2-æ ˆè°ƒç”¨åˆ†æ-æ’æŸ¥æ­»å¾ªç¯æˆ–çƒ­ç‚¹"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#â–¶-2-æ ˆè°ƒç”¨åˆ†æ-æ’æŸ¥æ­»å¾ªç¯æˆ–çƒ­ç‚¹"}},[t._v("#")]),t._v(" â–¶ 2. æ ˆè°ƒç”¨åˆ†æï¼ˆæ’æŸ¥æ­»å¾ªç¯æˆ–çƒ­ç‚¹ï¼‰")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("jstack 31037 > jstack.log\n")])])]),v("h3",{attrs:{id:"â–¶-3-gc-æ—¥å¿—åˆ†æ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#â–¶-3-gc-æ—¥å¿—åˆ†æ"}},[t._v("#")]),t._v(" â–¶ 3. GC æ—¥å¿—åˆ†æ")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("less /usr/local/apache-cassandra-3.11.2/logs/gc.log\n")])])]),v("ul",[v("li",[t._v("æ˜¯å¦é¢‘ç¹ Full GCï¼Ÿ")]),t._v(" "),v("li",[t._v("GC æ—¶é—´æ˜¯å¦è¿‡é•¿ï¼Ÿ")])]),t._v(" "),v("h3",{attrs:{id:"â–¶-4-ç£ç›˜å’Œ-compaction-å‹åŠ›"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#â–¶-4-ç£ç›˜å’Œ-compaction-å‹åŠ›"}},[t._v("#")]),t._v(" â–¶ 4. ç£ç›˜å’Œ compaction å‹åŠ›")]),t._v(" "),v("ul",[v("li",[t._v("æŸ¥çœ‹ "),v("code",[t._v("system.log")]),t._v(" æ˜¯å¦æœ‰ compaction æŒç»­è¿›è¡Œ")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("tail -f /usr/local/apache-cassandra-3.11.2/logs/system.log\n")])])]),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ§¾-ç¬¬ä¸€è¡Œ-ç³»ç»Ÿè¿è¡Œæ—¶é—´ä¸è´Ÿè½½æƒ…å†µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§¾-ç¬¬ä¸€è¡Œ-ç³»ç»Ÿè¿è¡Œæ—¶é—´ä¸è´Ÿè½½æƒ…å†µ"}},[t._v("#")]),t._v(" ğŸ§¾ ç¬¬ä¸€è¡Œï¼šç³»ç»Ÿè¿è¡Œæ—¶é—´ä¸è´Ÿè½½æƒ…å†µ")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("top - 07:02:58 up 919 days, 16:33,  3 users,  load average: 3.19, 2.44, 2.19\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("07:02:58")])]),t._v(" "),v("td",[t._v("å½“å‰ç³»ç»Ÿæ—¶é—´")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("up 919 days, 16:33")])]),t._v(" "),v("td",[t._v("ç³»ç»Ÿå·²ç»è¿è¡Œäº† 919 å¤© 16 å°æ—¶")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("3 users")])]),t._v(" "),v("td",[t._v("å½“å‰æœ‰ 3 ä¸ªç™»å½•ç”¨æˆ·")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("load average: 3.19, 2.44, 2.19")])]),t._v(" "),v("td",[t._v("ç³»ç»Ÿå¹³å‡è´Ÿè½½ï¼ˆè¿‡å» 1ã€5ã€15 åˆ†é’Ÿï¼‰ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ"),v("strong",[t._v("load > CPU æ ¸å¿ƒæ•°")]),t._v(" è¡¨ç¤ºç³»ç»Ÿå¯èƒ½æœ‰å‹åŠ›")])])])]),t._v(" "),v("blockquote",[v("p",[v("strong",[t._v("å»ºè®®ï¼š")]),t._v(" å¦‚æœä½ æ˜¯ 2 æ ¸æˆ– 4 æ ¸æœºå™¨ï¼Œ"),v("code",[t._v("3.19")]),t._v(" å°±è¯´æ˜è´Ÿè½½ç•¥é«˜ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ”§-ç¬¬äºŒè¡Œ-ä»»åŠ¡-è¿›ç¨‹-çŠ¶æ€"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”§-ç¬¬äºŒè¡Œ-ä»»åŠ¡-è¿›ç¨‹-çŠ¶æ€"}},[t._v("#")]),t._v(" ğŸ”§ ç¬¬äºŒè¡Œï¼šä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰çŠ¶æ€")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("Tasks: 165 total,   1 running, 164 sleeping,   0 stopped,   0 zombie\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("çŠ¶æ€")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("165 total")])]),t._v(" "),v("td",[t._v("æ€»å…± 165 ä¸ªè¿›ç¨‹")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("1 running")])]),t._v(" "),v("td",[t._v("å…¶ä¸­ 1 ä¸ªæ­£åœ¨è¿è¡Œï¼ˆå³ä½¿ç”¨ CPUï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("164 sleeping")])]),t._v(" "),v("td",[t._v("å¤§éƒ¨åˆ†åœ¨ç­‰å¾…ï¼ˆsleepï¼‰çŠ¶æ€")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("0 stopped")]),t._v(" / "),v("code",[t._v("0 zombie")])]),t._v(" "),v("td",[t._v("æ²¡æœ‰è¢«æš‚åœæˆ–åƒµå°¸è¿›ç¨‹ï¼ˆæ­£å¸¸ï¼‰")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ§ -ç¬¬ä¸‰è¡Œ-cpu-ä½¿ç”¨æƒ…å†µ-æ‰€æœ‰æ ¸å¿ƒæ€»ä½“å æ¯”"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§ -ç¬¬ä¸‰è¡Œ-cpu-ä½¿ç”¨æƒ…å†µ-æ‰€æœ‰æ ¸å¿ƒæ€»ä½“å æ¯”"}},[t._v("#")]),t._v(" ğŸ§  ç¬¬ä¸‰è¡Œï¼šCPU ä½¿ç”¨æƒ…å†µï¼ˆæ‰€æœ‰æ ¸å¿ƒæ€»ä½“å æ¯”ï¼‰")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("%Cpu(s):  7.0 us,  3.5 sy,  0.0 ni, 87.7 id,  0.0 wa,  0.0 hi,  1.8 si,  0.0 st\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("us")]),t._v(" (7.0%)")]),t._v(" "),v("td",[t._v("ç”¨æˆ·ç©ºé—´å ç”¨ï¼ˆå¦‚ Javaã€Pythonï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sy")]),t._v(" (3.5%)")]),t._v(" "),v("td",[t._v("å†…æ ¸ç©ºé—´ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰å ç”¨")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("id")]),t._v(" (87.7%)")]),t._v(" "),v("td",[t._v("ç©ºé—² CPU æ—¶é—´")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("si")]),t._v(" (1.8%)")]),t._v(" "),v("td",[t._v("è½¯ä»¶ä¸­æ–­ï¼Œä¾‹å¦‚ç½‘ç»œã€I/O ä¸­æ–­")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("wa")]),t._v(" (0.0%)")]),t._v(" "),v("td",[t._v("ç­‰å¾… IOï¼ˆå¦‚æœé«˜è¡¨ç¤ºç£ç›˜æ…¢ï¼‰")])])])]),t._v(" "),v("blockquote",[v("p",[t._v("å½“å‰ CPU æ€»ä½“å‹åŠ›ä¸é«˜ï¼ˆ87.7% ç©ºé—²ï¼‰ï¼Œä½†æŸè¿›ç¨‹å ç”¨é«˜ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ§¬-ç¬¬å››è¡Œ-å†…å­˜ä½¿ç”¨æƒ…å†µ-å•ä½-kib-å³-1024-å­—èŠ‚"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§¬-ç¬¬å››è¡Œ-å†…å­˜ä½¿ç”¨æƒ…å†µ-å•ä½-kib-å³-1024-å­—èŠ‚"}},[t._v("#")]),t._v(" ğŸ§¬ ç¬¬å››è¡Œï¼šå†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆå•ä½ KiBï¼Œå³ 1024 å­—èŠ‚ï¼‰")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("KiB Mem : 15990492 total,  1075056 free,  7387956 used,  7527480 buff/cache\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("total")])]),t._v(" "),v("td",[t._v("æ€»å†…å­˜ 15.9 GB")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("free")])]),t._v(" "),v("td",[t._v("å‰©ä½™ 1 GB å¯ç”¨ï¼ˆè¾ƒå°‘ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("used")])]),t._v(" "),v("td",[t._v("å·²ä½¿ç”¨ 7.3 GB")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("buff/cache")])]),t._v(" "),v("td",[t._v("Linux ç¼“å­˜ 7.5 GBï¼ˆå¯è¢«å›æ”¶ï¼‰")])])])]),t._v(" "),v("blockquote",[v("p",[t._v("å®é™…å¯ç”¨å†…å­˜ï¼š"),v("code",[t._v("free + buff/cache â‰ˆ 8.6G")]),t._v("ï¼Œæš‚æ—¶æ²¡æœ‰å†…å­˜å‹åŠ›ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ’¾-ç¬¬äº”è¡Œ-äº¤æ¢åˆ†åŒº-swap"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¾-ç¬¬äº”è¡Œ-äº¤æ¢åˆ†åŒº-swap"}},[t._v("#")]),t._v(" ğŸ’¾ ç¬¬äº”è¡Œï¼šäº¤æ¢åˆ†åŒºï¼ˆSwapï¼‰")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("KiB Swap:        0 total,        0 free,        0 used.  8258336 avail Mem\n")])])]),v("ul",[v("li",[t._v("å½“å‰ç³»ç»Ÿ "),v("strong",[t._v("æ²¡æœ‰å¼€å¯ swap åˆ†åŒº")]),t._v("ï¼Œè¯´æ˜ä¾èµ–ç‰©ç†å†…å­˜ã€‚")]),t._v(" "),v("li",[v("code",[t._v("avail Mem")]),t._v(": 8.25 GBï¼Œæ˜¯å†…æ ¸é¢„ä¼°å¯ç”¨å†…å­˜ã€‚")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸ”-æœ€ä¸‹æ–¹-è¿›ç¨‹åˆ—è¡¨-æŒ‰-cpu-æ’åº"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”-æœ€ä¸‹æ–¹-è¿›ç¨‹åˆ—è¡¨-æŒ‰-cpu-æ’åº"}},[t._v("#")]),t._v(" ğŸ” æœ€ä¸‹æ–¹ï¼šè¿›ç¨‹åˆ—è¡¨ï¼ˆæŒ‰ CPU æ’åºï¼‰")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",[v("code",[t._v("PID    USER      %CPU %MEM COMMAND\n31037  cassand+  62.5  5.9  java\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("å­—æ®µ")]),t._v(" "),v("th",[t._v("å«ä¹‰")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("PID")])]),t._v(" "),v("td",[t._v("è¿›ç¨‹å·")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("USER")])]),t._v(" "),v("td",[t._v("æ‰€å±ç”¨æˆ· cassandra")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%CPU")])]),t._v(" "),v("td",[t._v("å ç”¨ CPU 62.5%ï¼ˆéå¸¸é«˜ï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%MEM")])]),t._v(" "),v("td",[t._v("å ç”¨å†…å­˜ 5.9%ï¼ˆçº¦ 950MBï¼‰")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("COMMAND")])]),t._v(" "),v("td",[t._v("æ‰§è¡Œç¨‹åºä¸º "),v("code",[t._v("java")]),t._v("ï¼ˆCassandraï¼‰")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ğŸš¨-ç»“è®ºä¸å»ºè®®"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš¨-ç»“è®ºä¸å»ºè®®"}},[t._v("#")]),t._v(" ğŸš¨ ç»“è®ºä¸å»ºè®®ï¼š")]),t._v(" "),v("ul",[v("li",[v("p",[v("strong",[t._v("å½“å‰ Cassandra Java è¿›ç¨‹ CPU å ç”¨è¿‡é«˜ï¼ˆ62.5%ï¼‰")]),t._v(" ï¼Œæ˜¯ä¸»è¦è´Ÿè½½æ¥æºã€‚")])]),t._v(" "),v("li",[v("p",[t._v("å¯èƒ½å­˜åœ¨ï¼š")]),t._v(" "),v("ul",[v("li",[t._v("æŸ¥è¯¢è¿‡å¤šæˆ–çƒ­ç‚¹å†™å…¥")]),t._v(" "),v("li",[t._v("GC é¢‘ç¹ï¼ˆéœ€çœ‹ "),v("code",[t._v("jstat")]),t._v("ï¼‰")]),t._v(" "),v("li",[t._v("é•¿æ—¶é—´è¿è¡Œæœªé‡å¯ï¼Œå†…éƒ¨ç´¯ç§¯æ•°æ®")])])])])])}),[],!1,null,null,null);v.default=s.exports}}]);