(window.webpackJsonp=window.webpackJsonp||[]).push([[351],{1175:function(a,t,s){"use strict";s.r(t);var v=s(1),_=Object(v.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("blockquote",[t("p",[a._v("点击勘误"),t("a",{attrs:{href:"https://github.com/webVueBlog/JavaPlusDoc/issues",target:"_blank",rel:"noopener noreferrer"}},[a._v("issues"),t("OutboundLink")],1),a._v("，哪吒感谢大家的阅读")])]),a._v(" "),t("img",{attrs:{align:"right",width:"100",src:"https://cdn.jsdelivr.net/gh/YunYouJun/yun/images/yun-alpha-compressed.png"}}),a._v(" "),t("h2",{attrs:{id:"物联网cassandra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#物联网cassandra"}},[a._v("#")]),a._v(" 物联网cassandra")]),a._v(" "),t("p",[a._v("cassandraDao 的类，主要用于与 Cassandra 数据库进行交互，特别是与存储 协议相关消息的表进行操作。它实现了插入数据、查询数据、以及表的创建等功能。具体来说，它主要用于处理和存储设备 发送的消息，并将这些消息保存在 Cassandra 数据库中。")]),a._v(" "),t("h2",{attrs:{id:"使用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[a._v("#")]),a._v(" 使用场景：")]),a._v(" "),t("p",[a._v("设备消息存储：该类用于存储设备 发送的消息数据。它将设备 消息内容等信息存储到 Cassandra 数据库中，便于后续查询和分析。")]),a._v(" "),t("p",[a._v("数据备份：除了主表外，还会将数据备份到备用的 Cassandra 数据库中，以确保数据的可靠性。")]),a._v(" "),t("p",[a._v("系统日志：对于存储的每条数据，都会进行日志记录，这有助于后续的调试、分析和监控。")]),a._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结：")]),a._v(" "),t("p",[a._v("Cassandra 数据库交互的 DAO（数据访问对象），它负责存储、查询和管理 协议相关的设备消息数据。它支持自动创建表、分页查询、数据插入、以及备份等功能，确保了数据的高可用性和可查询性。")]),a._v(" "),t("h2",{attrs:{id:"优化建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化建议"}},[a._v("#")]),a._v(" 优化建议：")]),a._v(" "),t("h3",{attrs:{id:"日志记录优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志记录优化"}},[a._v("#")]),a._v(" 日志记录优化：")]),a._v(" "),t("p",[a._v("当前日志记录较为简单，且没有在关键操作和异常处理中进行详细记录。需要更细致的日志记录，尤其是在异常和操作成功时。")]),a._v(" "),t("h3",{attrs:{id:"避免静态集合存储表名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#避免静态集合存储表名"}},[a._v("#")]),a._v(" 避免静态集合存储表名：")]),a._v(" "),t("p",[a._v("checkTableExistSet 和 checkBackupTableExistSet 是静态集合，可能导致不同实例间数据共享。如果每个实例需要独立检查表的创建状态，应将其改为实例变量。")]),a._v(" "),t("h3",{attrs:{id:"时间格式化的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#时间格式化的优化"}},[a._v("#")]),a._v(" 时间格式化的优化：")]),a._v(" "),t("p",[a._v("SimpleDateFormat 在多线程环境下是非线程安全的，可以使用 "),t("code",[a._v("ThreadLocal<SimpleDateFormat>")]),a._v(" 保证线程安全。")]),a._v(" "),t("h3",{attrs:{id:"避免重复的表创建逻辑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#避免重复的表创建逻辑"}},[a._v("#")]),a._v(" 避免重复的表创建逻辑：")]),a._v(" "),t("p",[a._v("checkTableExist 和 checkBackupTableExist 的逻辑重复，且不够灵活。可以提取成一个通用方法来避免重复代码。")]),a._v(" "),t("h3",{attrs:{id:"数据库操作的异常处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库操作的异常处理"}},[a._v("#")]),a._v(" 数据库操作的异常处理：")]),a._v(" "),t("p",[a._v("Cassandra 的操作可能会失败，但当前代码未对数据库操作失败进行详细的异常处理，建议加强异常捕获和日志记录。")]),a._v(" "),t("h3",{attrs:{id:"数据插入方法的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据插入方法的优化"}},[a._v("#")]),a._v(" 数据插入方法的优化：")]),a._v(" "),t("p",[a._v("insertAsync 方法中使用了多个 insertAsync 调用，这会在插入时产生并发请求。可以考虑引入事务或批量插入的方式来优化性能。")]),a._v(" "),t("p",[a._v("状态变化监测")]),a._v(" "),t("p",[a._v("差异对比")]),a._v(" "),t("p",[a._v("优化方案：")]),a._v(" "),t("ul",[t("li",[a._v("使用 Map 或 List 存储字段和值，以减少代码重复。")]),a._v(" "),t("li",[a._v("提取字段对比到一个通用方法中。")]),a._v(" "),t("li",[a._v("使用 StringJoiner 或 StringBuilder 来替代 StringBuffer，并避免每次修改时都重新创建 StringBuffer。")])]),a._v(" "),t("p",[a._v("优化点总结：")]),a._v(" "),t("p",[a._v("避免重复代码和不必要的复杂性：")]),a._v(" "),t("ol",[t("li",[a._v("避免在 handle 方法内部重新创建线程池和任务队列。")]),a._v(" "),t("li",[a._v("优化线程池的创建，避免不必要的线程池重建。")]),a._v(" "),t("li",[a._v("简化异常处理，不需要捕获所有异常，明确处理需要捕获的类型。")])]),a._v(" "),t("p",[a._v("代码优化：")]),a._v(" "),t("ol",[t("li",[a._v("使用 ExecutorService 管理线程池，避免频繁使用 submit 方法。")]),a._v(" "),t("li",[a._v("xxxHandleBlockingQueue 不应该是 static，因为它依赖于实例。")]),a._v(" "),t("li",[a._v("在多线程环境中，要保证线程安全性，尽量避免在多个地方对同一资源进行操作。")]),a._v(" "),t("li",[a._v("可以使用 Optional 或更明确的空值检查来减少不必要的 null 检查。")])]),a._v(" "),t("p",[a._v("日志优化：")]),a._v(" "),t("p",[a._v("减少重复日志的记录，避免日志过多导致性能瓶颈。")]),a._v(" "),t("p",[a._v("性能优化：")]),a._v(" "),t("p",[a._v("增加一个xxx队列的积压阈值限制，避免过度积压导致线程池任务过载。")])])}),[],!1,null,null,null);t.default=_.exports}}]);