(window.webpackJsonp=window.webpackJsonp||[]).push([[419],{1250:function(e,t,n){"use strict";n.r(t);var s=n(1),a=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("blockquote",[t("p",[e._v("点击勘误"),t("a",{attrs:{href:"https://github.com/webVueBlog/JavaPlusDoc/issues",target:"_blank",rel:"noopener noreferrer"}},[e._v("issues"),t("OutboundLink")],1),e._v("，哪吒感谢大家的阅读")])]),e._v(" "),t("img",{attrs:{align:"right",width:"100",src:"https://cdn.jsdelivr.net/gh/YunYouJun/yun/images/yun-alpha-compressed.png"}}),e._v(" "),t("h2",{attrs:{id:"nginx环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx环境配置"}},[e._v("#")]),e._v(" Nginx环境配置")]),e._v(" "),t("ul",[t("li",[e._v("停止：docker stop Nginx")]),e._v(" "),t("li",[e._v("重启：docker restart Nginx")]),e._v(" "),t("li",[e._v("删除服务：docker rm Nginx")]),e._v(" "),t("li",[e._v("删除镜像：docker rmi Nginx")]),e._v(" "),t("li",[e._v("进入服务：docker exec -it Nginx /bin/bash")]),e._v(" "),t("li",[e._v("配置文件：nginx - conf/html/logs/ssl(opens new window)")])]),e._v(" "),t("h1",{attrs:{id:"一、基础安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、基础安装"}},[e._v("#")]),e._v(" 一、基础安装")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker run \\\n--restart always \\\n--name Nginx \\\n-d \\\n-p 80:80 \\\nnginx\n\n")])])]),t("h2",{attrs:{id:"轮询和权值-负载均衡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#轮询和权值-负载均衡"}},[e._v("#")]),e._v(" 轮询和权值 (负载均衡)")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("upstream myserver{\n    server localhost:8088;\n    server localhost:8083;\n}\n\nserver{\n    listen 8004;\n    server_name localhost;\n    location / {\n        proxy_pass http://myserver;\n    }\n}\n\n\n\nupstream myserver{\n    server localhost:8088 weight=10;\n    server localhost:8083 weight=2;\n}\n\nserver{\n    listen 8004;\n    server_name localhost;\n    location / {\n        proxy_pass http://myserver;\n    }\n}\n")])])]),t("p",[e._v("重定向分类：")]),e._v(" "),t("ol",[t("li",[e._v("301 永久性重定向：永久移动到新的URL上，搜索引擎会更新索引。")]),e._v(" "),t("li",[e._v("302 临时性重定向：暂时移动到新的URL上，搜索引擎不会更新索引。")])]),e._v(" "),t("p",[e._v("301 永久性重定向")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("if ($host ~ '^b.com'){\n    return 301 https://b.cn;\n}\n")])])]),t("p",[e._v("302 临时性重定向")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("if ($host ~ '^b.com'){\n    return 302 https://b.cn;\n}\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("location ^~ /api/ {\n    proxy_pass http://127.0.0.1:8080/api/;\n    add_header 'Access-Control-Allow-Origin' $http_origin;\n    add_header 'Access-Control-Allow-Credentials' 'true';\n    add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n    add_header Access-Control-Allow-Headers '*';\n    if ($request_method = 'OPTIONS') {\n        add_header 'Access-Control-Allow-Credentials' 'true';\n        add_header 'Access-Control-Allow-Origin' $http_origin;\n        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';\n        add_header 'Access-Control-Allow-Headers' 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range';\n        add_header 'Access-Control-Max-Age' 1728000;\n        add_header 'Content-Type' 'text/plain; charset=utf-8';\n        add_header 'Content-Length' 0;\n        return 204;\n    }\n}\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);