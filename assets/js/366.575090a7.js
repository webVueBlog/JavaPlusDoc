(window.webpackJsonp=window.webpackJsonp||[]).push([[366],{1187:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ç‰©è”ç½‘æ¦‚è¿°ä¸æ¶æ„è®¾è®¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç‰©è”ç½‘æ¦‚è¿°ä¸æ¶æ„è®¾è®¡"}},[t._v("#")]),t._v(" ç‰©è”ç½‘æ¦‚è¿°ä¸æ¶æ„è®¾è®¡")]),t._v(" "),s("h2",{attrs:{id:"ğŸ“–-ç« èŠ‚æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“–-ç« èŠ‚æ¦‚è¿°"}},[t._v("#")]),t._v(" ğŸ“– ç« èŠ‚æ¦‚è¿°")]),t._v(" "),s("p",[t._v("æœ¬ç« å°†ä¸ºæ‚¨ä»‹ç»ç‰©è”ç½‘çš„åŸºæœ¬æ¦‚å¿µã€æ ¸å¿ƒæ¶æ„å’Œè®¾è®¡åŸåˆ™ï¼Œå¸®åŠ©æ‚¨å»ºç«‹å®Œæ•´çš„ç‰©è”ç½‘ç³»ç»Ÿè®¤çŸ¥æ¡†æ¶ã€‚é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œæ‚¨å°†æŒæ¡ç‰©è”ç½‘ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡æ€è·¯å’ŒæŠ€æœ¯é€‰å‹æ–¹æ³•ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ğŸ¯-å­¦ä¹ ç›®æ ‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å­¦ä¹ ç›®æ ‡"}},[t._v("#")]),t._v(" ğŸ¯ å­¦ä¹ ç›®æ ‡")]),t._v(" "),s("ul",[s("li",[t._v("ç†è§£ç‰©è”ç½‘çš„åŸºæœ¬æ¦‚å¿µå’Œå‘å±•å†ç¨‹")]),t._v(" "),s("li",[t._v("æŒæ¡ç‰©è”ç½‘ç³»ç»Ÿçš„åˆ†å±‚æ¶æ„è®¾è®¡")]),t._v(" "),s("li",[t._v("å­¦ä¼šæŠ€æœ¯é€‰å‹çš„å†³ç­–æ–¹æ³•")]),t._v(" "),s("li",[t._v("äº†è§£æ€§èƒ½ã€å®‰å…¨ã€å¯æ‰©å±•æ€§ç­‰å…³é”®è€ƒè™‘å› ç´ ")])]),t._v(" "),s("h2",{attrs:{id:"_1-ç‰©è”ç½‘åŸºæœ¬æ¦‚å¿µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç‰©è”ç½‘åŸºæœ¬æ¦‚å¿µ"}},[t._v("#")]),t._v(" 1. ç‰©è”ç½‘åŸºæœ¬æ¦‚å¿µ")]),t._v(" "),s("h3",{attrs:{id:"_1-1-ä»€ä¹ˆæ˜¯ç‰©è”ç½‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ä»€ä¹ˆæ˜¯ç‰©è”ç½‘"}},[t._v("#")]),t._v(" 1.1 ä»€ä¹ˆæ˜¯ç‰©è”ç½‘")]),t._v(" "),s("p",[t._v("ç‰©è”ç½‘ï¼ˆInternet of Things, IoTï¼‰æ˜¯æŒ‡é€šè¿‡å„ç§ä¿¡æ¯ä¼ æ„Ÿè®¾å¤‡ï¼ŒæŒ‰çº¦å®šçš„åè®®ï¼Œå°†ä»»ä½•ç‰©ä½“ä¸ç½‘ç»œç›¸è¿æ¥ï¼Œç‰©ä½“é€šè¿‡ä¿¡æ¯ä¼ æ’­åª’ä»‹è¿›è¡Œä¿¡æ¯äº¤æ¢å’Œé€šä¿¡ï¼Œä»¥å®ç°æ™ºèƒ½åŒ–è¯†åˆ«ã€å®šä½ã€è·Ÿè¸ªã€ç›‘ç®¡ç­‰åŠŸèƒ½çš„ä¸€ç§ç½‘ç»œã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-2-ç‰©è”ç½‘çš„æ ¸å¿ƒç‰¹å¾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-ç‰©è”ç½‘çš„æ ¸å¿ƒç‰¹å¾"}},[t._v("#")]),t._v(" 1.2 ç‰©è”ç½‘çš„æ ¸å¿ƒç‰¹å¾")]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[t._v("mindmap\n  root"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("((ç‰©è”ç½‘ç‰¹å¾))")]),t._v("\n    å…¨é¢æ„ŸçŸ¥\n      ä¼ æ„Ÿå™¨ç½‘ç»œ\n      æ•°æ®é‡‡é›†\n      ç¯å¢ƒç›‘æµ‹\n    å¯é ä¼ è¾“\n      ç½‘ç»œé€šä¿¡\n      åè®®æ ˆ\n      æ•°æ®ä¼ è¾“\n    æ™ºèƒ½å¤„ç†\n      æ•°æ®åˆ†æ\n      å†³ç­–æ”¯æŒ\n      è‡ªåŠ¨æ§åˆ¶\n    æ³›åœ¨è¿æ¥\n      éšæ—¶éšåœ°\n      ä»»ä½•è®¾å¤‡\n      ä»»ä½•ç½‘ç»œ\n")])])]),s("h3",{attrs:{id:"_1-3-ç‰©è”ç½‘å‘å±•å†ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-ç‰©è”ç½‘å‘å±•å†ç¨‹"}},[t._v("#")]),t._v(" 1.3 ç‰©è”ç½‘å‘å±•å†ç¨‹")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("é˜¶æ®µ")]),t._v(" "),s("th",[t._v("æ—¶é—´")]),t._v(" "),s("th",[t._v("ç‰¹å¾")]),t._v(" "),s("th",[t._v("ä»£è¡¨æŠ€æœ¯")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("èŒèŠ½æœŸ")]),t._v(" "),s("td",[t._v("1990s")]),t._v(" "),s("td",[t._v("æ¦‚å¿µæå‡º")]),t._v(" "),s("td",[t._v("RFIDã€ä¼ æ„Ÿå™¨ç½‘ç»œ")])]),t._v(" "),s("tr",[s("td",[t._v("å‘å±•æœŸ")]),t._v(" "),s("td",[t._v("2000s")]),t._v(" "),s("td",[t._v("æŠ€æœ¯æˆç†Ÿ")]),t._v(" "),s("td",[t._v("IPv6ã€äº‘è®¡ç®—")])]),t._v(" "),s("tr",[s("td",[t._v("çˆ†å‘æœŸ")]),t._v(" "),s("td",[t._v("2010s")]),t._v(" "),s("td",[t._v("å•†ä¸šåº”ç”¨")]),t._v(" "),s("td",[t._v("ç§»åŠ¨äº’è”ç½‘ã€å¤§æ•°æ®")])]),t._v(" "),s("tr",[s("td",[t._v("æ™ºèƒ½æœŸ")]),t._v(" "),s("td",[t._v("2020s")]),t._v(" "),s("td",[t._v("æ™ºèƒ½åŒ–")]),t._v(" "),s("td",[t._v("5Gã€AIã€è¾¹ç¼˜è®¡ç®—")])])])]),t._v(" "),s("h2",{attrs:{id:"_2-ç‰©è”ç½‘ç³»ç»Ÿæ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç‰©è”ç½‘ç³»ç»Ÿæ¶æ„"}},[t._v("#")]),t._v(" 2. ç‰©è”ç½‘ç³»ç»Ÿæ¶æ„")]),t._v(" "),s("h3",{attrs:{id:"_2-1-ç»å…¸å››å±‚æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ç»å…¸å››å±‚æ¶æ„"}},[t._v("#")]),t._v(" 2.1 ç»å…¸å››å±‚æ¶æ„")]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TB\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åº”ç”¨å±‚ Application Layer"')]),t._v("\n        A1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ™ºèƒ½å®¶å±…]")]),t._v("\n        A2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[å·¥ä¸š4.0]")]),t._v("\n        A3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ™ºæ…§åŸå¸‚]")]),t._v("\n        A4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è½¦è”ç½‘]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å¹³å°å±‚ Platform Layer"')]),t._v("\n        P1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è®¾å¤‡ç®¡ç†]")]),t._v("\n        P2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ•°æ®å¤„ç†]")]),t._v("\n        P3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ä¸šåŠ¡é€»è¾‘]")]),t._v("\n        P4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[APIæœåŠ¡]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç½‘ç»œå±‚ Network Layer"')]),t._v("\n        N1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[WiFi]")]),t._v("\n        N2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[4G/5G]")]),t._v("\n        N3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[LoRa]")]),t._v("\n        N4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[NB-IoT]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ„ŸçŸ¥å±‚ Perception Layer"')]),t._v("\n        S1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ä¼ æ„Ÿå™¨]")]),t._v("\n        S2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[RFID]")]),t._v("\n        S3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ‘„åƒå¤´]")]),t._v("\n        S4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ‰§è¡Œå™¨]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    S1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" N1\n    S2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" N2\n    S3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" N3\n    S4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" N4\n    \n    N1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" P1\n    N2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" P2\n    N3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" P3\n    N4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" P4\n    \n    P1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" A1\n    P2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" A2\n    P3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" A3\n    P4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" A4\n")])])]),s("h3",{attrs:{id:"_2-2-ç°ä»£åŒ–å¾®æœåŠ¡æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ç°ä»£åŒ–å¾®æœåŠ¡æ¶æ„"}},[t._v("#")]),t._v(" 2.2 ç°ä»£åŒ–å¾®æœåŠ¡æ¶æ„")]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TB\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¾¹ç¼˜å±‚ Edge Layer"')]),t._v("\n        E1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è¾¹ç¼˜ç½‘å…³]")]),t._v("\n        E2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è¾¹ç¼˜è®¡ç®—]")]),t._v("\n        E3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æœ¬åœ°å­˜å‚¨]")]),t._v("\n        E4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[åè®®è½¬æ¢]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ¥å…¥å±‚ Access Layer"')]),t._v("\n        AC1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è´Ÿè½½å‡è¡¡]")]),t._v("\n        AC2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[APIç½‘å…³]")]),t._v("\n        AC3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è®¤è¯æˆæƒ]")]),t._v("\n        AC4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[é™æµç†”æ–­]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡å±‚ Service Layer"')]),t._v("\n        SV1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è®¾å¤‡æœåŠ¡]")]),t._v("\n        SV2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ•°æ®æœåŠ¡]")]),t._v("\n        SV3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è§„åˆ™å¼•æ“]")]),t._v("\n        SV4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[é€šçŸ¥æœåŠ¡]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ•°æ®å±‚ Data Layer"')]),t._v("\n        D1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ—¶åºæ•°æ®åº“]")]),t._v("\n        D2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[å…³ç³»æ•°æ®åº“]")]),t._v("\n        D3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ¶ˆæ¯é˜Ÿåˆ—]")]),t._v("\n        D4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ç¼“å­˜ç³»ç»Ÿ]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    E1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" AC1\n    E2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" AC2\n    E3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" AC3\n    E4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" AC4\n    \n    AC1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" SV1\n    AC2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" SV2\n    AC3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" SV3\n    AC4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" SV4\n    \n    SV1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" D1\n    SV2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" D2\n    SV3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" D3\n    SV4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" D4\n")])])]),s("h2",{attrs:{id:"_3-æ¶æ„è®¾è®¡åŸåˆ™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ¶æ„è®¾è®¡åŸåˆ™"}},[t._v("#")]),t._v(" 3. æ¶æ„è®¾è®¡åŸåˆ™")]),t._v(" "),s("h3",{attrs:{id:"_3-1-å¯æ‰©å±•æ€§åŸåˆ™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-å¯æ‰©å±•æ€§åŸåˆ™"}},[t._v("#")]),t._v(" 3.1 å¯æ‰©å±•æ€§åŸåˆ™")]),t._v(" "),s("p",[t._v("æ°´å¹³æ‰©å±•ä¼˜äºå‚ç›´æ‰©å±•")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šå¯æ‰©å±•çš„è®¾å¤‡ç®¡ç†æœåŠ¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceManagementService")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceRepository")]),t._v(" deviceRepository"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageQueue")]),t._v(" messageQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ”¯æŒåˆ†ç‰‡çš„è®¾å¤‡æ³¨å†Œ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerDevice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Device")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¹æ®è®¾å¤‡IDè¿›è¡Œåˆ†ç‰‡")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" shardKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculateShardKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒæ°´å¹³æ‰©å±•")]),t._v("\n        messageQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"device.register."')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" shardKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculateShardKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" deviceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deviceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-2-é«˜å¯ç”¨æ€§åŸåˆ™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-é«˜å¯ç”¨æ€§åŸåˆ™"}},[t._v("#")]),t._v(" 3.2 é«˜å¯ç”¨æ€§åŸåˆ™")]),t._v(" "),s("p",[t._v("æ•…éšœéš”ç¦»ä¸å¿«é€Ÿæ¢å¤")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šå¸¦ç†”æ–­å™¨çš„æ•°æ®å¤„ç†æœåŠ¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataProcessingService")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CircuitBreaker")]),t._v(" circuitBreaker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataProcessingService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("circuitBreaker "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CircuitBreaker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofDefaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dataProcessing"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProcessResult")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("processData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SensorData")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" circuitBreaker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeSupplier")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¸å¿ƒæ•°æ®å¤„ç†é€»è¾‘")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doProcessData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProcessResult")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doProcessData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SensorData")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®é™…çš„æ•°æ®å¤„ç†é€»è¾‘")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè§¦å‘ç†”æ–­å™¨")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProcessResult")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-3-å®‰å…¨æ€§åŸåˆ™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-å®‰å…¨æ€§åŸåˆ™"}},[t._v("#")]),t._v(" 3.3 å®‰å…¨æ€§åŸåˆ™")]),t._v(" "),s("p",[t._v("å¤šå±‚é˜²æŠ¤ä¸é›¶ä¿¡ä»»")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šè®¾å¤‡è®¤è¯ä¸æˆæƒ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/devices"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceAuthService")]),t._v(" authService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("receiveData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-Device-Token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SensorData")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. è®¾å¤‡èº«ä»½éªŒè¯")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Device")]),t._v(" device "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" authService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("device "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UNAUTHORIZED")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Invalid device token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. æƒé™æ£€æŸ¥")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("authService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasPermission")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data.upload"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FORBIDDEN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Permission denied"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. æ•°æ®éªŒè¯")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateDataIntegrity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BAD_REQUEST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Data integrity check failed"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. å¤„ç†æ•°æ®")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("processData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ok")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Data received successfully"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_4-æŠ€æœ¯é€‰å‹æŒ‡å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æŠ€æœ¯é€‰å‹æŒ‡å—"}},[t._v("#")]),t._v(" 4. æŠ€æœ¯é€‰å‹æŒ‡å—")]),t._v(" "),s("h3",{attrs:{id:"_4-1-é€šä¿¡åè®®é€‰æ‹©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-é€šä¿¡åè®®é€‰æ‹©"}},[t._v("#")]),t._v(" 4.1 é€šä¿¡åè®®é€‰æ‹©")]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("flowchart")]),t._v(" TD\n    A"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[å¼€å§‹é€‰æ‹©åè®®]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" B"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("{è®¾å¤‡èµ„æºé™åˆ¶?}")]),t._v("\n    B "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|ä¸¥é‡é™åˆ¶|")]),t._v(" C"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[CoAP]")]),t._v("\n    B "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|ä¸€èˆ¬é™åˆ¶|")]),t._v(" D"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[MQTT]")]),t._v("\n    B "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|èµ„æºå……è¶³|")]),t._v(" E"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("{å®æ—¶æ€§è¦æ±‚?}")]),t._v("\n    \n    E "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|é«˜å®æ—¶æ€§|")]),t._v(" F"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[WebSocket/TCP]")]),t._v("\n    E "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|ä¸€èˆ¬å®æ—¶æ€§|")]),t._v(" G"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[HTTP/HTTPS]")]),t._v("\n    \n    C "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" H"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ç¡®è®¤é€‰æ‹©]")]),t._v("\n    D "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" H\n    F "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" H\n    G "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" H\n    \n    H "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" I"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("{éœ€è¦å¯é æ€§?}")]),t._v("\n    I "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|æ˜¯|")]),t._v(" J"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ·»åŠ QoSæœºåˆ¶]")]),t._v("\n    I "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|å¦|")]),t._v(" K"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ä½¿ç”¨é»˜è®¤é…ç½®]")]),t._v("\n    \n    J "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" L"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[å®Œæˆé€‰å‹]")]),t._v("\n    K "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" L\n")])])]),s("h3",{attrs:{id:"_4-2-æ•°æ®å­˜å‚¨é€‰æ‹©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-æ•°æ®å­˜å‚¨é€‰æ‹©"}},[t._v("#")]),t._v(" 4.2 æ•°æ®å­˜å‚¨é€‰æ‹©")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("æ•°æ®ç±»å‹")]),t._v(" "),s("th",[t._v("æ¨èå­˜å‚¨")]),t._v(" "),s("th",[t._v("ç‰¹ç‚¹")]),t._v(" "),s("th",[t._v("ä½¿ç”¨åœºæ™¯")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("æ—¶åºæ•°æ®")]),t._v(" "),s("td",[t._v("InfluxDB, TimescaleDB")]),t._v(" "),s("td",[t._v("é«˜å†™å…¥æ€§èƒ½")]),t._v(" "),s("td",[t._v("ä¼ æ„Ÿå™¨æ•°æ®")])]),t._v(" "),s("tr",[s("td",[t._v("å…³ç³»æ•°æ®")]),t._v(" "),s("td",[t._v("PostgreSQL, MySQL")]),t._v(" "),s("td",[t._v("ACIDç‰¹æ€§")]),t._v(" "),s("td",[t._v("è®¾å¤‡ä¿¡æ¯")])]),t._v(" "),s("tr",[s("td",[t._v("æ–‡æ¡£æ•°æ®")]),t._v(" "),s("td",[t._v("MongoDB, CouchDB")]),t._v(" "),s("td",[t._v("çµæ´»schema")]),t._v(" "),s("td",[t._v("é…ç½®ä¿¡æ¯")])]),t._v(" "),s("tr",[s("td",[t._v("ç¼“å­˜æ•°æ®")]),t._v(" "),s("td",[t._v("Redis, Memcached")]),t._v(" "),s("td",[t._v("é«˜é€Ÿè®¿é—®")]),t._v(" "),s("td",[t._v("ä¼šè¯çŠ¶æ€")])]),t._v(" "),s("tr",[s("td",[t._v("å¤§æ•°æ®")]),t._v(" "),s("td",[t._v("Cassandra, HBase")]),t._v(" "),s("td",[t._v("åˆ†å¸ƒå¼")]),t._v(" "),s("td",[t._v("å†å²æ•°æ®")])])])]),t._v(" "),s("h3",{attrs:{id:"_4-3-æ¶ˆæ¯é˜Ÿåˆ—é€‰æ‹©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-æ¶ˆæ¯é˜Ÿåˆ—é€‰æ‹©"}},[t._v("#")]),t._v(" 4.3 æ¶ˆæ¯é˜Ÿåˆ—é€‰æ‹©")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šåŸºäºåœºæ™¯çš„æ¶ˆæ¯é˜Ÿåˆ—é€‰æ‹©")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageQueueSelector")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageQueue")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageRequirement")]),t._v(" requirement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requirement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThroughput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é«˜ååé‡åœºæ™¯é€‰æ‹©Kafka")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaMessageQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requirement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReliabilityRequired")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é«˜å¯é æ€§åœºæ™¯é€‰æ‹©RabbitMQ")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RabbitMQMessageQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requirement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isLowLatencyRequired")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½å»¶è¿Ÿåœºæ™¯é€‰æ‹©NATS")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NATSMessageQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤é€‰æ‹©Redis")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisMessageQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_5-æ€§èƒ½è€ƒè™‘å› ç´ "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ€§èƒ½è€ƒè™‘å› ç´ "}},[t._v("#")]),t._v(" 5. æ€§èƒ½è€ƒè™‘å› ç´ ")]),t._v(" "),s("h3",{attrs:{id:"_5-1-ååé‡è®¾è®¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-ååé‡è®¾è®¡"}},[t._v("#")]),t._v(" 5.1 ååé‡è®¾è®¡")]),t._v(" "),s("p",[s("strong",[t._v("è®¾å¤‡è¿æ¥æ•°è§„åˆ’")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šè¿æ¥æ± ç®¡ç†")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConnectionPoolConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConnectionPool")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deviceConnectionPool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConnectionPool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("maxConnections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€å¤§è¿æ¥æ•°")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("minConnections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€å°è¿æ¥æ•°")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connectionTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofSeconds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("idleTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofMinutes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("maxLifetime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofHours")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_5-2-å»¶è¿Ÿä¼˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-å»¶è¿Ÿä¼˜åŒ–"}},[t._v("#")]),t._v(" 5.2 å»¶è¿Ÿä¼˜åŒ–")]),t._v(" "),s("p",[s("strong",[t._v("æ•°æ®å¤„ç†ç®¡é“ä¼˜åŒ–")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šå¼‚æ­¥æ•°æ®å¤„ç†ç®¡é“")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataPipeline")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutorService")]),t._v(" executorService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockingQueue")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SensorData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" dataQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataPipeline")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("executorService "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFixedThreadPool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataQueue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBlockingQueue")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯åŠ¨æ•°æ®å¤„ç†çº¿ç¨‹")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startProcessingThreads")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("submitData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SensorData")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éé˜»å¡æäº¤")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("dataQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é˜Ÿåˆ—æ»¡æ—¶çš„å¤„ç†ç­–ç•¥")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleQueueFull")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startProcessingThreads")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            executorService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isInterrupted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SensorData")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("take")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("processDataAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interrupt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_6-å®‰å…¨æ¶æ„è®¾è®¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-å®‰å…¨æ¶æ„è®¾è®¡"}},[t._v("#")]),t._v(" 6. å®‰å…¨æ¶æ„è®¾è®¡")]),t._v(" "),s("h3",{attrs:{id:"_6-1-ç«¯åˆ°ç«¯å®‰å…¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-ç«¯åˆ°ç«¯å®‰å…¨"}},[t._v("#")]),t._v(" 6.1 ç«¯åˆ°ç«¯å®‰å…¨")]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sequenceDiagram")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("participant")]),t._v(" D as è®¾å¤‡\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("participant")]),t._v(" G as ç½‘å…³\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("participant")]),t._v(" S as æœåŠ¡å™¨\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("participant")]),t._v(" DB as æ•°æ®åº“\n    \n    D"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("G"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 1. TLSæ¡æ‰‹\n    G"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("D"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 2. è¯ä¹¦éªŒè¯\n    D"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("G"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 3. åŠ å¯†æ•°æ®ä¼ è¾“\n    G"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("S"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 4. JWTä»¤ç‰Œè®¤è¯\n    S"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("DB"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 5. åŠ å¯†å­˜å‚¨\n    DB"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("S"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 6. åŠ å¯†æ•°æ®è¿”å›\n    S"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("G"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 7. å“åº”æ•°æ®\n    G"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("D"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 8. åŠ å¯†å“åº”\n")])])]),s("h3",{attrs:{id:"_6-2-è®¾å¤‡èº«ä»½ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-è®¾å¤‡èº«ä»½ç®¡ç†"}},[t._v("#")]),t._v(" 6.2 è®¾å¤‡èº«ä»½ç®¡ç†")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šè®¾å¤‡è¯ä¹¦ç®¡ç†")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceCertificateService")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CertificateAuthority")]),t._v(" ca"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceCertificate")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("issueDeviceCertificate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceInfo")]),t._v(" deviceInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. éªŒè¯è®¾å¤‡ä¿¡æ¯")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateDeviceInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deviceInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. ç”Ÿæˆè®¾å¤‡å¯†é’¥å¯¹")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KeyPair")]),t._v(" keyPair "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateKeyPair")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. åˆ›å»ºè¯ä¹¦è¯·æ±‚")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CertificateRequest")]),t._v(" request "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createCertificateRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            deviceInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" keyPair"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPublic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. CAç­¾å‘è¯ä¹¦")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("X509Certificate")]),t._v(" certificate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ca"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("signCertificate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5. è¿”å›è®¾å¤‡è¯ä¹¦")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeviceCertificate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            certificate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            keyPair"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPrivate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculateExpiryDate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateCertificate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("X509Certificate")]),t._v(" certificate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§")]),t._v("\n            certificate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkValidity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éªŒè¯è¯ä¹¦é“¾")]),t._v("\n            certificate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ca"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPublicKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ£€æŸ¥æ’¤é”€åˆ—è¡¨")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRevoked")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("certificate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_7-ç›‘æ§ä¸è¿ç»´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-ç›‘æ§ä¸è¿ç»´"}},[t._v("#")]),t._v(" 7. ç›‘æ§ä¸è¿ç»´")]),t._v(" "),s("h3",{attrs:{id:"_7-1-ç³»ç»Ÿç›‘æ§æŒ‡æ ‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-ç³»ç»Ÿç›‘æ§æŒ‡æ ‡"}},[t._v("#")]),t._v(" 7.1 ç³»ç»Ÿç›‘æ§æŒ‡æ ‡")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IoTMetrics")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MeterRegistry")]),t._v(" meterRegistry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),t._v(" deviceConnections"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Timer")]),t._v(" dataProcessingTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Gauge")]),t._v(" activeDevices"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IoTMetrics")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MeterRegistry")]),t._v(" meterRegistry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meterRegistry "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" meterRegistry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deviceConnections "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iot.device.connections"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Total device connections"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("meterRegistry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataProcessingTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Timer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iot.data.processing.time"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Data processing time"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("meterRegistry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("activeDevices "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Gauge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iot.devices.active"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Number of active devices"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("meterRegistry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IoTMetrics")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getActiveDeviceCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("recordDeviceConnection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        deviceConnections"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("recordDataProcessingTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" duration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        dataProcessingTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("duration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getActiveDeviceCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®é™…è·å–æ´»è·ƒè®¾å¤‡æ•°é‡çš„é€»è¾‘")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" deviceService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getActiveDeviceCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_7-2-æ—¥å¿—ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-æ—¥å¿—ç®¡ç†"}},[t._v("#")]),t._v(" 7.2 æ—¥å¿—ç®¡ç†")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¤ºä¾‹ï¼šç»“æ„åŒ–æ—¥å¿—è®°å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IoTLogger")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" logger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IoTLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectMapper")]),t._v(" objectMapper "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectMapper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logDeviceEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" deviceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" logEntry "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("of")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"timestamp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instant")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deviceId"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"event"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"source"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iot-platform"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" jsonLog "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" objectMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeValueAsString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logEntry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonLog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Failed to log device event"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logSystemMetric")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" metric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" logEntry "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("of")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"timestamp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instant")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"metric"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"metric"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" metric"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tags"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tags\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" jsonLog "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" objectMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeValueAsString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logEntry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonLog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Failed to log system metric"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_8-å®è·µæ¡ˆä¾‹åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-å®è·µæ¡ˆä¾‹åˆ†æ"}},[t._v("#")]),t._v(" 8. å®è·µæ¡ˆä¾‹åˆ†æ")]),t._v(" "),s("h3",{attrs:{id:"_8-1-æ™ºèƒ½å·¥å‚ç›‘æ§ç³»ç»Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-æ™ºèƒ½å·¥å‚ç›‘æ§ç³»ç»Ÿ"}},[t._v("#")]),t._v(" 8.1 æ™ºèƒ½å·¥å‚ç›‘æ§ç³»ç»Ÿ")]),t._v(" "),s("p",[s("strong",[t._v("éœ€æ±‚åˆ†æ")])]),t._v(" "),s("ul",[s("li",[t._v("1000+è®¾å¤‡åŒæ—¶åœ¨çº¿")]),t._v(" "),s("li",[t._v("æ¯«ç§’çº§æ•°æ®é‡‡é›†")]),t._v(" "),s("li",[t._v("99.9%å¯ç”¨æ€§è¦æ±‚")]),t._v(" "),s("li",[t._v("å®æ—¶å‘Šè­¦å“åº”")])]),t._v(" "),s("p",[s("strong",[t._v("æ¶æ„è®¾è®¡")])]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TB\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è®¾å¤‡å±‚"')]),t._v("\n        D1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ¸©åº¦ä¼ æ„Ÿå™¨]")]),t._v("\n        D2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[å‹åŠ›ä¼ æ„Ÿå™¨]")]),t._v("\n        D3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æŒ¯åŠ¨ä¼ æ„Ÿå™¨]")]),t._v("\n        D4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[PLCæ§åˆ¶å™¨]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¾¹ç¼˜å±‚"')]),t._v("\n        E1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è¾¹ç¼˜ç½‘å…³]")]),t._v("\n        E2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æœ¬åœ°ç¼“å­˜]")]),t._v("\n        E3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[åè®®è½¬æ¢]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å¹³å°å±‚"')]),t._v("\n        P1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è´Ÿè½½å‡è¡¡]")]),t._v("\n        P2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[MQTTé›†ç¾¤]")]),t._v("\n        P3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æ•°æ®å¤„ç†]")]),t._v("\n        P4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[è§„åˆ™å¼•æ“]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å­˜å‚¨å±‚"')]),t._v("\n        S1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[InfluxDB]")]),t._v("\n        S2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[Redis]")]),t._v("\n        S3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[PostgreSQL]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    D1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" E1\n    D2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" E1\n    D3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" E1\n    D4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" E1\n    \n    E1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" P1\n    E2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" P2\n    E3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" P3\n    \n    P1 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" S1\n    P2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" S2\n    P3 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" S3\n    P4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" S1\n")])])]),s("p",[s("strong",[t._v("æŠ€æœ¯é€‰å‹å†³ç­–")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç»„ä»¶")]),t._v(" "),s("th",[t._v("é€‰æ‹©")]),t._v(" "),s("th",[t._v("ç†ç”±")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("é€šä¿¡åè®®")]),t._v(" "),s("td",[t._v("MQTT")]),t._v(" "),s("td",[t._v("è½»é‡çº§ï¼Œæ”¯æŒQoS")])]),t._v(" "),s("tr",[s("td",[t._v("æ¶ˆæ¯é˜Ÿåˆ—")]),t._v(" "),s("td",[t._v("Kafka")]),t._v(" "),s("td",[t._v("é«˜ååé‡ï¼ŒæŒä¹…åŒ–")])]),t._v(" "),s("tr",[s("td",[t._v("æ—¶åºæ•°æ®åº“")]),t._v(" "),s("td",[t._v("InfluxDB")]),t._v(" "),s("td",[t._v("ä¸“ä¸ºæ—¶åºæ•°æ®ä¼˜åŒ–")])]),t._v(" "),s("tr",[s("td",[t._v("ç¼“å­˜")]),t._v(" "),s("td",[t._v("Redis")]),t._v(" "),s("td",[t._v("é«˜æ€§èƒ½ï¼Œæ”¯æŒé›†ç¾¤")])]),t._v(" "),s("tr",[s("td",[t._v("ç›‘æ§")]),t._v(" "),s("td",[t._v("Prometheus+Grafana")]),t._v(" "),s("td",[t._v("å¼€æºï¼Œç”Ÿæ€å®Œå–„")])])])]),t._v(" "),s("h2",{attrs:{id:"_9-æœ€ä½³å®è·µæ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-æœ€ä½³å®è·µæ€»ç»“"}},[t._v("#")]),t._v(" 9. æœ€ä½³å®è·µæ€»ç»“")]),t._v(" "),s("h3",{attrs:{id:"_9-1-è®¾è®¡åŸåˆ™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-è®¾è®¡åŸåˆ™"}},[t._v("#")]),t._v(" 9.1 è®¾è®¡åŸåˆ™")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("åˆ†å±‚è§£è€¦")]),t._v(": å„å±‚èŒè´£æ˜ç¡®ï¼Œé™ä½è€¦åˆåº¦")]),t._v(" "),s("li",[s("strong",[t._v("å¼‚æ­¥ä¼˜å…ˆ")]),t._v(": ä½¿ç”¨å¼‚æ­¥å¤„ç†æé«˜ç³»ç»Ÿååé‡")]),t._v(" "),s("li",[s("strong",[t._v("æ•…éšœéš”ç¦»")]),t._v(": é¿å…å•ç‚¹æ•…éšœå½±å“æ•´ä¸ªç³»ç»Ÿ")]),t._v(" "),s("li",[s("strong",[t._v("æ°´å¹³æ‰©å±•")]),t._v(": è®¾è®¡æ”¯æŒæ°´å¹³æ‰©å±•çš„æ¶æ„")]),t._v(" "),s("li",[s("strong",[t._v("å®‰å…¨ç¬¬ä¸€")]),t._v(": ä»è®¾è®¡é˜¶æ®µå°±è€ƒè™‘å®‰å…¨é—®é¢˜")])]),t._v(" "),s("h3",{attrs:{id:"_9-2-å¼€å‘å»ºè®®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-å¼€å‘å»ºè®®"}},[t._v("#")]),t._v(" 9.2 å¼€å‘å»ºè®®")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("æ¸è¿›å¼å¼€å‘")]),t._v(": ä»ç®€å•åœºæ™¯å¼€å§‹ï¼Œé€æ­¥å®Œå–„")]),t._v(" "),s("li",[s("strong",[t._v("æµ‹è¯•é©±åŠ¨")]),t._v(": ç¼–å†™å……åˆ†çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•")]),t._v(" "),s("li",[s("strong",[t._v("æ–‡æ¡£å…ˆè¡Œ")]),t._v(": ç»´æŠ¤å®Œæ•´çš„APIæ–‡æ¡£å’Œæ¶æ„æ–‡æ¡£")]),t._v(" "),s("li",[s("strong",[t._v("ç›‘æ§å®Œå–„")]),t._v(": å»ºç«‹å®Œæ•´çš„ç›‘æ§å’Œå‘Šè­¦ä½“ç³»")]),t._v(" "),s("li",[s("strong",[t._v("æŒç»­ä¼˜åŒ–")]),t._v(": æ ¹æ®å®é™…è¿è¡Œæƒ…å†µæŒç»­ä¼˜åŒ–")])]),t._v(" "),s("h2",{attrs:{id:"_10-ä¸‹ä¸€æ­¥å­¦ä¹ "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-ä¸‹ä¸€æ­¥å­¦ä¹ "}},[t._v("#")]),t._v(" 10. ä¸‹ä¸€æ­¥å­¦ä¹ ")]),t._v(" "),s("p",[t._v("å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºç»§ç»­ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[s("RouterLink",{attrs:{to:"/iot/device-layer.html"}},[t._v("è®¾å¤‡å±‚æ¶æ„")])],1),t._v(" - æ·±å…¥äº†è§£è®¾å¤‡ç«¯è®¾è®¡")]),t._v(" "),s("li",[s("strong",[s("RouterLink",{attrs:{to:"/iot/mqtt-access-layer.html"}},[t._v("MQTTåè®®ä¸å®ç°")])],1),t._v(" - æŒæ¡æœ€å¸¸ç”¨çš„IoTåè®®")]),t._v(" "),s("li",[s("strong",[s("RouterLink",{attrs:{to:"/iot/device-access.html"}},[t._v("è®¾å¤‡æ¥å…¥ä¸è®¤è¯")])],1),t._v(" - å­¦ä¹ è®¾å¤‡ç®¡ç†åŸºç¡€")])]),t._v(" "),s("h2",{attrs:{id:"ğŸ“š-å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“š-å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" ğŸ“š å‚è€ƒèµ„æ–™")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://example.com/iot-architecture",target:"_blank",rel:"noopener noreferrer"}},[t._v("IoT Architecture Guide"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://mqtt.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MQTT Specification"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://example.com/iiot-practices",target:"_blank",rel:"noopener noreferrer"}},[t._v("Industrial IoT Best Practices"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://example.com/iot-security",target:"_blank",rel:"noopener noreferrer"}},[t._v("IoT Security Framework"),s("OutboundLink")],1)])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("æ­å–œæ‚¨å®Œæˆäº†ç‰©è”ç½‘æ¶æ„åŸºç¡€å­¦ä¹ ï¼")]),t._v(" ğŸ‰")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ’¡ "),s("strong",[t._v("ä¸‹ä¸€æ­¥")]),t._v(": ç»§ç»­å­¦ä¹ "),s("RouterLink",{attrs:{to:"/iot/device-layer.html"}},[t._v("è®¾å¤‡å±‚æ¶æ„")]),t._v("ï¼Œæ·±å…¥äº†è§£ç‰©è”ç½‘è®¾å¤‡ç«¯çš„è®¾è®¡ä¸å®ç°ã€‚")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);