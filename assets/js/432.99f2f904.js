(window.webpackJsonp=window.webpackJsonp||[]).push([[432],{1265:function(e,t,n){"use strict";n.r(t);var s=n(1),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("blockquote",[t("p",[e._v("点击勘误"),t("a",{attrs:{href:"https://github.com/webVueBlog/JavaPlusDoc/issues",target:"_blank",rel:"noopener noreferrer"}},[e._v("issues"),t("OutboundLink")],1),e._v("，哪吒感谢大家的阅读")])]),e._v(" "),t("img",{attrs:{align:"right",width:"100",src:"https://cdn.jsdelivr.net/gh/YunYouJun/yun/images/yun-alpha-compressed.png"}}),e._v(" "),t("h2",{attrs:{id:"mysql和redis的数据一致性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql和redis的数据一致性"}},[e._v("#")]),e._v(" MySQL和Redis的数据一致性")]),e._v(" "),t("p",[e._v("实时一致性方案：采用“先写 MySQL，再删除 Redis”的策略，这种情况虽然也会存在两者不一致，但是需要满足的条件有点苛刻，所以是满足实时性条件下，能尽量满足一致性的最优解。")]),e._v(" "),t("p",[e._v("最终一致性方案：采用“先写 MySQL，通过 Binlog，异步更新 Redis”，可以通过 Binlog，结合消息队列异步更新 Redis，是最终一致性的最优解。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('spring:\n  datasource:    \n    type: com.alibaba.druid.pool.DruidDataSource\n    druid:\n      #初始化连接池大小\n      initial-size: 5\n      #配置最小连接数\n      min-idle: 5\n      #配置最大连接数\n      max-active: 200\n      #配置连接等待超时时间\n      max-wait: 60000\n      #配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒\n      time-between-eviction-runs-millis: 60000\n      #配置一个连接在池中最小生存的时间，单位是毫秒\n      min-evictable-idle-time-millis: 300000\n      #测试连接\n      validation-query: SELECT 1 FROM DUAL\n      #申请连接的时候检测，建议配置为true，不影响性能，并且保证安全\n      test-while-idle: true\n      #获取连接时执行检测，建议关闭，影响性能\n      test-on-borrow: false\n      #归还连接时执行检测，建议关闭，影响性能\n      test-on-return: false\n      #是否开启PSCache，PSCache对支持游标的数据库性能提升巨大，oracle建议开启，mysql下建议关闭\n      pool-prepared-statements: false\n      #开启poolPreparedStatements后生效\n      max-pool-prepared-statement-per-connection-size: 20\n      #配置扩展插件，常用的插件有=>stat:监控统计  log4j:日志  wall:防御sql注入\n      filters: stat,wall,slf4j\n      #打开mergeSql功能；慢SQL记录\n      connection-properties: druid.stat.mergeSql\\=true;druid.stat.slowSqlMillis\\=5000\n      #配置DruidStatFilter\n      web-stat-filter:\n        enabled: true\n        url-pattern: "/*"\n        exclusions: "*.js,*.gif,*.jpg,*.bmp,*.png,*.css,*.ico,/druid/*"\n      #配置DruidStatViewServlet\n      stat-view-servlet:\n        url-pattern: "/druid/*"\n        #登录名\n        login-username: root\n        #登录密码\n        login-password: root\n')])])])])}),[],!1,null,null,null);t.default=r.exports}}]);