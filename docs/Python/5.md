---
title: ç¬¬5å¤©-å‡½æ•°
author: å“ªå’
date: '2023-06-15'
---

# ç¬¬5å¤©-Pythonå‡½æ•°

ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ Pythonä¸­æœ€é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ï¼š**å‡½æ•°ï¼ˆFunctionï¼‰**ã€‚å‡½æ•°æ˜¯ç¼–ç¨‹çš„æ ¸å¿ƒï¼ŒæŒæ¡äº†å‡½æ•°ï¼Œä½ å°±æŒæ¡äº†ç¼–ç¨‹çš„ç²¾é«“ï¼

## å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ

æƒ³è±¡ä¸€ä¸‹ç”Ÿæ´»ä¸­çš„åœºæ™¯ï¼š
- ğŸ³ **åšé¥­**ï¼šä½ ç»™å¨å¸ˆé£Ÿæï¼ˆè¾“å…¥ï¼‰ï¼Œå¨å¸ˆåšå‡ºç¾é£Ÿï¼ˆè¾“å‡ºï¼‰
- ğŸ§® **è®¡ç®—å™¨**ï¼šä½ è¾“å…¥æ•°å­—å’Œè¿ç®—ç¬¦ï¼Œè®¡ç®—å™¨ç»™å‡ºç»“æœ
- ğŸ­ **å·¥å‚**ï¼šè¾“å…¥åŸææ–™ï¼Œè¾“å‡ºæˆå“

Pythonçš„å‡½æ•°å°±æ˜¯è¿™æ ·çš„"åŠ å·¥å‚"ï¼

> **å‡½æ•°å®šä¹‰**ï¼šå‡½æ•°æ˜¯ä¸€æ®µ**å¯é‡å¤ä½¿ç”¨çš„ä»£ç å—**ï¼Œå®ƒæ¥æ”¶è¾“å…¥ï¼ˆå‚æ•°ï¼‰ï¼Œæ‰§è¡Œç‰¹å®šä»»åŠ¡ï¼Œå¹¶å¯èƒ½è¿”å›ç»“æœã€‚

---

## ä¸€ã€å‡½æ•°çš„åŸºæœ¬è¯­æ³•

### 1.1 å®šä¹‰å‡½æ•°çš„è¯­æ³•

```python
def å‡½æ•°å(å‚æ•°1, å‚æ•°2, ...):
    """å‡½æ•°è¯´æ˜æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰"""
    # å‡½æ•°ä½“ï¼šè¦æ‰§è¡Œçš„ä»£ç 
    return è¿”å›å€¼  # å¯é€‰
```

**è¯­æ³•è¦ç‚¹**ï¼š
- `def`ï¼šå®šä¹‰å‡½æ•°çš„å…³é”®å­—
- `å‡½æ•°å`ï¼šéµå¾ªå˜é‡å‘½åè§„åˆ™
- `å‚æ•°`ï¼šå‡½æ•°çš„è¾“å…¥ï¼Œå¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ª
- `:`ï¼šä¸è¦å¿˜è®°å†’å·
- **ç¼©è¿›**ï¼šå‡½æ•°ä½“å¿…é¡»ç¼©è¿›
- `return`ï¼šè¿”å›ç»“æœï¼ˆå¯é€‰ï¼‰

### 1.2 æœ€ç®€å•çš„å‡½æ•°

```python
# å®šä¹‰ä¸€ä¸ªæœ€ç®€å•çš„å‡½æ•°
def say_hello():
    print("ä½ å¥½ï¼Œæ¬¢è¿å­¦ä¹ Pythonï¼")

# è°ƒç”¨å‡½æ•°
say_hello()  # è¾“å‡ºï¼šä½ å¥½ï¼Œæ¬¢è¿å­¦ä¹ Pythonï¼
```

> **å°ç™½æç¤º**ï¼šå®šä¹‰å‡½æ•°åªæ˜¯"åˆ¶ä½œæ¨¡æ¿"ï¼Œè°ƒç”¨å‡½æ•°æ‰æ˜¯"ä½¿ç”¨æ¨¡æ¿"ï¼

### 1.3 å¸¦å‚æ•°çš„å‡½æ•°

```python
# å¸¦ä¸€ä¸ªå‚æ•°çš„å‡½æ•°
def greet(name):
    print(f"ä½ å¥½ï¼Œ{name}ï¼")

# è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥å‚æ•°
greet("å°æ˜")    # è¾“å‡ºï¼šä½ å¥½ï¼Œå°æ˜ï¼
greet("Alice")  # è¾“å‡ºï¼šä½ å¥½ï¼ŒAliceï¼

# å¸¦å¤šä¸ªå‚æ•°çš„å‡½æ•°
def introduce(name, age, city):
    print(f"æˆ‘å«{name}ï¼Œä»Šå¹´{age}å²ï¼Œæ¥è‡ª{city}")

introduce("å¼ ä¸‰", 25, "åŒ—äº¬")
# è¾“å‡ºï¼šæˆ‘å«å¼ ä¸‰ï¼Œä»Šå¹´25å²ï¼Œæ¥è‡ªåŒ—äº¬
```

### 1.4 å¸¦è¿”å›å€¼çš„å‡½æ•°

```python
# è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ
def add(a, b):
    result = a + b
    return result  # è¿”å›è®¡ç®—ç»“æœ

# ä½¿ç”¨è¿”å›å€¼
sum_result = add(3, 5)
print(f"3 + 5 = {sum_result}")  # è¾“å‡ºï¼š3 + 5 = 8

# å¯ä»¥ç›´æ¥åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨
print(f"10 + 20 = {add(10, 20)}")  # è¾“å‡ºï¼š10 + 20 = 30
```

> **é‡è¦æ¦‚å¿µ**ï¼š
> - æœ‰`return`çš„å‡½æ•°ä¼šè¿”å›å€¼ï¼Œå¯ä»¥èµ‹å€¼ç»™å˜é‡
> - æ²¡æœ‰`return`çš„å‡½æ•°è¿”å›`None`
> - `return`åé¢çš„ä»£ç ä¸ä¼šæ‰§è¡Œ

---

## äºŒã€å‡½æ•°å‚æ•°è¯¦è§£

### 2.1 ä½ç½®å‚æ•°ï¼ˆå¿…éœ€å‚æ•°ï¼‰

ä½ç½®å‚æ•°æ˜¯æœ€åŸºæœ¬çš„å‚æ•°ç±»å‹ï¼Œè°ƒç”¨æ—¶å¿…é¡»æŒ‰é¡ºåºä¼ å…¥ï¼š

```python
def calculate_rectangle_area(length, width):
    """è®¡ç®—çŸ©å½¢é¢ç§¯"""
    area = length * width
    return area

# æŒ‰ä½ç½®ä¼ å‚ï¼šç¬¬ä¸€ä¸ªæ˜¯lengthï¼Œç¬¬äºŒä¸ªæ˜¯width
area1 = calculate_rectangle_area(5, 3)  # length=5, width=3
print(f"çŸ©å½¢é¢ç§¯ï¼š{area1}")  # è¾“å‡ºï¼šçŸ©å½¢é¢ç§¯ï¼š15

# ä½ç½®ä¸èƒ½æé”™ï¼
area2 = calculate_rectangle_area(3, 5)  # length=3, width=5
print(f"çŸ©å½¢é¢ç§¯ï¼š{area2}")  # è¾“å‡ºï¼šçŸ©å½¢é¢ç§¯ï¼š15ï¼ˆç»“æœç›¸åŒï¼Œä½†æ¦‚å¿µä¸åŒï¼‰
```

### 2.2 å…³é”®å­—å‚æ•°

å¯ä»¥é€šè¿‡å‚æ•°åæŒ‡å®šå€¼ï¼Œä¸ç”¨è€ƒè™‘é¡ºåºï¼š

```python
def create_user_profile(name, age, city, job):
    return f"å§“åï¼š{name}ï¼Œå¹´é¾„ï¼š{age}ï¼ŒåŸå¸‚ï¼š{city}ï¼ŒèŒä¸šï¼š{job}"

# ä½¿ç”¨å…³é”®å­—å‚æ•°ï¼Œé¡ºåºå¯ä»¥ä»»æ„
profile1 = create_user_profile(name="å¼ ä¸‰", age=28, city="ä¸Šæµ·", job="ç¨‹åºå‘˜")
profile2 = create_user_profile(job="è®¾è®¡å¸ˆ", city="æ·±åœ³", name="æå››", age=26)

print(profile1)
print(profile2)

# ä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°å¯ä»¥æ··ç”¨ï¼Œä½†ä½ç½®å‚æ•°å¿…é¡»åœ¨å‰é¢
profile3 = create_user_profile("ç‹äº”", 30, city="å¹¿å·", job="è€å¸ˆ")
print(profile3)
```

### 2.3 é»˜è®¤å‚æ•°

ä¸ºå‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œè°ƒç”¨æ—¶å¯ä»¥ä¸ä¼ è¯¥å‚æ•°ï¼š

```python
def greet_user(name, greeting="ä½ å¥½", punctuation="ï¼"):
    return f"{greeting}ï¼Œ{name}{punctuation}"

# ä½¿ç”¨é»˜è®¤å‚æ•°
print(greet_user("å°æ˜"))  # è¾“å‡ºï¼šä½ å¥½ï¼Œå°æ˜ï¼

# è¦†ç›–éƒ¨åˆ†é»˜è®¤å‚æ•°
print(greet_user("å°çº¢", "æ—©ä¸Šå¥½"))  # è¾“å‡ºï¼šæ—©ä¸Šå¥½ï¼Œå°çº¢ï¼

# è¦†ç›–æ‰€æœ‰é»˜è®¤å‚æ•°
print(greet_user("å°æ", "æ™šå®‰", "ã€‚"))  # è¾“å‡ºï¼šæ™šå®‰ï¼Œå°æã€‚

# ä½¿ç”¨å…³é”®å­—å‚æ•°è·³è¿‡æŸäº›é»˜è®¤å‚æ•°
print(greet_user("å°ç‹", punctuation="ï¼Ÿï¼Ÿï¼Ÿ"))  # è¾“å‡ºï¼šä½ å¥½ï¼Œå°ç‹ï¼Ÿï¼Ÿï¼Ÿ
```

> **é»˜è®¤å‚æ•°æ³¨æ„äº‹é¡¹**ï¼š
> - é»˜è®¤å‚æ•°å¿…é¡»æ”¾åœ¨ä½ç½®å‚æ•°åé¢
> - ä¸è¦ä½¿ç”¨å¯å˜å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ï¼‰ä½œä¸ºé»˜è®¤å‚æ•°

### 2.4 å¯å˜å‚æ•°ï¼ˆ*argsï¼‰

å½“ä¸çŸ¥é“ä¼šä¼ å…¥å¤šå°‘ä¸ªå‚æ•°æ—¶ï¼Œä½¿ç”¨`*args`ï¼š

```python
def calculate_sum(*numbers):
    """è®¡ç®—ä»»æ„æ•°é‡æ•°å­—çš„å’Œ"""
    total = 0
    for num in numbers:
        total += num
    return total

# ä¼ å…¥ä¸åŒæ•°é‡çš„å‚æ•°
print(calculate_sum(1, 2, 3))           # è¾“å‡ºï¼š6
print(calculate_sum(10, 20, 30, 40))    # è¾“å‡ºï¼š100
print(calculate_sum(5))                 # è¾“å‡ºï¼š5
print(calculate_sum())                  # è¾“å‡ºï¼š0

# æ›´ç®€æ´çš„å†™æ³•
def calculate_sum_v2(*numbers):
    return sum(numbers)

print(calculate_sum_v2(1, 2, 3, 4, 5))  # è¾“å‡ºï¼š15
```

### 2.5 å…³é”®å­—å¯å˜å‚æ•°ï¼ˆ**kwargsï¼‰

å½“éœ€è¦æ¥æ”¶ä»»æ„æ•°é‡çš„å…³é”®å­—å‚æ•°æ—¶ï¼Œä½¿ç”¨`**kwargs`ï¼š

```python
def create_student_info(name, **other_info):
    """åˆ›å»ºå­¦ç”Ÿä¿¡æ¯"""
    info = f"å­¦ç”Ÿå§“åï¼š{name}\n"
    for key, value in other_info.items():
        info += f"{key}ï¼š{value}\n"
    return info

# ä¼ å…¥ä¸åŒçš„å…³é”®å­—å‚æ•°
student1 = create_student_info(
    "å¼ ä¸‰", 
    age=20, 
    major="è®¡ç®—æœºç§‘å­¦", 
    grade="å¤§äºŒ",
    gpa=3.8
)
print(student1)

student2 = create_student_info(
    "æå››",
    age=19,
    hobby="ç¯®çƒ",
    hometown="åŒ—äº¬"
)
print(student2)
```

### 2.6 å‚æ•°ç»„åˆä½¿ç”¨

```python
def complex_function(required_arg, default_arg="é»˜è®¤å€¼", *args, **kwargs):
    """æ¼”ç¤ºå„ç§å‚æ•°ç±»å‹çš„ç»„åˆä½¿ç”¨"""
    print(f"å¿…éœ€å‚æ•°ï¼š{required_arg}")
    print(f"é»˜è®¤å‚æ•°ï¼š{default_arg}")
    print(f"å¯å˜å‚æ•°ï¼š{args}")
    print(f"å…³é”®å­—å‚æ•°ï¼š{kwargs}")
    print("-" * 30)

# å„ç§è°ƒç”¨æ–¹å¼
complex_function("å¿…é¡»çš„")
complex_function("å¿…é¡»çš„", "ä¿®æ”¹é»˜è®¤å€¼")
complex_function("å¿…é¡»çš„", "ä¿®æ”¹é»˜è®¤å€¼", 1, 2, 3)
complex_function("å¿…é¡»çš„", "ä¿®æ”¹é»˜è®¤å€¼", 1, 2, 3, name="å¼ ä¸‰", age=25)
```

---

## ä¸‰ã€å‡½æ•°çš„è¿”å›å€¼

### 3.1 å•ä¸ªè¿”å›å€¼

```python
def get_circle_area(radius):
    """è®¡ç®—åœ†çš„é¢ç§¯"""
    import math
    area = math.pi * radius ** 2
    return area

area = get_circle_area(5)
print(f"åŠå¾„ä¸º5çš„åœ†çš„é¢ç§¯ï¼š{area:.2f}")  # è¾“å‡ºï¼šåŠå¾„ä¸º5çš„åœ†çš„é¢ç§¯ï¼š78.54
```

### 3.2 å¤šä¸ªè¿”å›å€¼

```python
def get_rectangle_info(length, width):
    """è®¡ç®—çŸ©å½¢çš„é¢ç§¯å’Œå‘¨é•¿"""
    area = length * width
    perimeter = 2 * (length + width)
    return area, perimeter  # è¿”å›å…ƒç»„

# æ¥æ”¶å¤šä¸ªè¿”å›å€¼
area, perimeter = get_rectangle_info(5, 3)
print(f"é¢ç§¯ï¼š{area}ï¼Œå‘¨é•¿ï¼š{perimeter}")

# ä¹Ÿå¯ä»¥ä½œä¸ºå…ƒç»„æ¥æ”¶
result = get_rectangle_info(4, 6)
print(f"ç»“æœå…ƒç»„ï¼š{result}")  # è¾“å‡ºï¼šç»“æœå…ƒç»„ï¼š(24, 20)
print(f"é¢ç§¯ï¼š{result[0]}ï¼Œå‘¨é•¿ï¼š{result[1]}")
```

### 3.3 æ¡ä»¶è¿”å›

```python
def check_grade(score):
    """æ ¹æ®åˆ†æ•°è¿”å›ç­‰çº§"""
    if score >= 90:
        return "ä¼˜ç§€"
    elif score >= 80:
        return "è‰¯å¥½"
    elif score >= 70:
        return "ä¸­ç­‰"
    elif score >= 60:
        return "åŠæ ¼"
    else:
        return "ä¸åŠæ ¼"

# æµ‹è¯•ä¸åŒåˆ†æ•°
scores = [95, 85, 75, 65, 55]
for score in scores:
    grade = check_grade(score)
    print(f"åˆ†æ•°{score}ï¼š{grade}")
```

### 3.4 æå‰è¿”å›

```python
def divide_numbers(a, b):
    """å®‰å…¨çš„é™¤æ³•è¿ç®—"""
    if b == 0:
        print("é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸º0")
        return None  # æå‰è¿”å›ï¼Œé¿å…é”™è¯¯
    
    result = a / b
    return result

# æµ‹è¯•
print(divide_numbers(10, 2))  # è¾“å‡ºï¼š5.0
print(divide_numbers(10, 0))  # è¾“å‡ºï¼šé”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸º0ï¼Œç„¶åæ˜¯None
```

---

## å››ã€å‡½æ•°çš„ä½œç”¨åŸŸ

### 4.1 å±€éƒ¨å˜é‡ vs å…¨å±€å˜é‡

```python
# å…¨å±€å˜é‡
global_var = "æˆ‘æ˜¯å…¨å±€å˜é‡"
counter = 0

def demo_scope():
    # å±€éƒ¨å˜é‡
    local_var = "æˆ‘æ˜¯å±€éƒ¨å˜é‡"
    print(f"å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡ï¼š{global_var}")
    print(f"å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼š{local_var}")

demo_scope()
print(f"å‡½æ•°å¤–éƒ¨è®¿é—®å…¨å±€å˜é‡ï¼š{global_var}")
# print(local_var)  # é”™è¯¯ï¼æ— æ³•åœ¨å‡½æ•°å¤–è®¿é—®å±€éƒ¨å˜é‡
```

### 4.2 ä¿®æ”¹å…¨å±€å˜é‡

```python
counter = 0  # å…¨å±€å˜é‡

def increment_counter():
    global counter  # å£°æ˜è¦ä¿®æ”¹å…¨å±€å˜é‡
    counter += 1
    print(f"è®¡æ•°å™¨å¢åŠ åˆ°ï¼š{counter}")

def show_counter():
    print(f"å½“å‰è®¡æ•°å™¨å€¼ï¼š{counter}")

show_counter()        # è¾“å‡ºï¼šå½“å‰è®¡æ•°å™¨å€¼ï¼š0
increment_counter()   # è¾“å‡ºï¼šè®¡æ•°å™¨å¢åŠ åˆ°ï¼š1
increment_counter()   # è¾“å‡ºï¼šè®¡æ•°å™¨å¢åŠ åˆ°ï¼š2
show_counter()        # è¾“å‡ºï¼šå½“å‰è®¡æ•°å™¨å€¼ï¼š2
```

### 4.3 å˜é‡æŸ¥æ‰¾é¡ºåºï¼ˆLEGBè§„åˆ™ï¼‰

```python
x = "å…¨å±€å˜é‡"

def outer_function():
    x = "å¤–å±‚å‡½æ•°å˜é‡"
    
    def inner_function():
        x = "å†…å±‚å‡½æ•°å˜é‡"
        print(f"å†…å±‚å‡½æ•°ä¸­çš„xï¼š{x}")
    
    inner_function()
    print(f"å¤–å±‚å‡½æ•°ä¸­çš„xï¼š{x}")

outer_function()
print(f"å…¨å±€ä½œç”¨åŸŸä¸­çš„xï¼š{x}")

# è¾“å‡ºï¼š
# å†…å±‚å‡½æ•°ä¸­çš„xï¼šå†…å±‚å‡½æ•°å˜é‡
# å¤–å±‚å‡½æ•°ä¸­çš„xï¼šå¤–å±‚å‡½æ•°å˜é‡
# å…¨å±€ä½œç”¨åŸŸä¸­çš„xï¼šå…¨å±€å˜é‡
```

> **LEGBè§„åˆ™**ï¼šPythonæŒ‰ç…§ Local â†’ Enclosing â†’ Global â†’ Built-in çš„é¡ºåºæŸ¥æ‰¾å˜é‡

---

## äº”ã€Lambdaè¡¨è¾¾å¼ï¼ˆåŒ¿åå‡½æ•°ï¼‰

### 5.1 ä»€ä¹ˆæ˜¯Lambdaè¡¨è¾¾å¼ï¼Ÿ

Lambdaè¡¨è¾¾å¼æ˜¯ä¸€ç§åˆ›å»º**ç®€å•å‡½æ•°**çš„å¿«æ·æ–¹å¼ï¼Œé€‚åˆä¸€è¡Œå°±èƒ½å®Œæˆçš„ç®€å•æ“ä½œã€‚

```python
# æ™®é€šå‡½æ•°
def square(x):
    return x ** 2

# Lambdaè¡¨è¾¾å¼ï¼ˆåŒ¿åå‡½æ•°ï¼‰
square_lambda = lambda x: x ** 2

# ä¸¤è€…æ•ˆæœç›¸åŒ
print(square(5))        # è¾“å‡ºï¼š25
print(square_lambda(5)) # è¾“å‡ºï¼š25
```

### 5.2 Lambdaè¯­æ³•

```python
# åŸºæœ¬è¯­æ³•ï¼šlambda å‚æ•°: è¡¨è¾¾å¼

# å•ä¸ªå‚æ•°
double = lambda x: x * 2
print(double(4))  # è¾“å‡ºï¼š8

# å¤šä¸ªå‚æ•°
add = lambda a, b: a + b
print(add(3, 5))  # è¾“å‡ºï¼š8

# æ— å‚æ•°
get_pi = lambda: 3.14159
print(get_pi())  # è¾“å‡ºï¼š3.14159

# æ¡ä»¶è¡¨è¾¾å¼
max_value = lambda a, b: a if a > b else b
print(max_value(10, 20))  # è¾“å‡ºï¼š20
```

### 5.3 Lambdaçš„å®é™…åº”ç”¨

```python
# 1. ä¸å†…ç½®å‡½æ•°é…åˆä½¿ç”¨
numbers = [1, 2, 3, 4, 5]

# ä½¿ç”¨map()ï¼šå¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨å‡½æ•°
squares = list(map(lambda x: x**2, numbers))
print(f"å¹³æ–¹ï¼š{squares}")  # è¾“å‡ºï¼šå¹³æ–¹ï¼š[1, 4, 9, 16, 25]

# ä½¿ç”¨filter()ï¼šè¿‡æ»¤å…ƒç´ 
even_numbers = list(filter(lambda x: x % 2 == 0, numbers))
print(f"å¶æ•°ï¼š{even_numbers}")  # è¾“å‡ºï¼šå¶æ•°ï¼š[2, 4]

# ä½¿ç”¨sorted()ï¼šè‡ªå®šä¹‰æ’åº
students = [('Alice', 85), ('Bob', 90), ('Charlie', 78)]
sorted_by_score = sorted(students, key=lambda student: student[1])
print(f"æŒ‰åˆ†æ•°æ’åºï¼š{sorted_by_score}")
# è¾“å‡ºï¼šæŒ‰åˆ†æ•°æ’åºï¼š[('Charlie', 78), ('Alice', 85), ('Bob', 90)]
```

### 5.4 Lambda vs æ™®é€šå‡½æ•°

| ç‰¹æ€§ | Lambdaè¡¨è¾¾å¼ | æ™®é€šå‡½æ•° |
|------|-------------|----------|
| è¯­æ³• | ç®€æ´ï¼Œä¸€è¡Œ | å®Œæ•´ï¼Œå¤šè¡Œ |
| å‘½å | åŒ¿å | æœ‰åç§° |
| å¤æ‚åº¦ | åªèƒ½æ˜¯è¡¨è¾¾å¼ | å¯ä»¥åŒ…å«è¯­å¥ |
| è°ƒè¯• | éš¾ä»¥è°ƒè¯• | å®¹æ˜“è°ƒè¯• |
| ç”¨é€” | ç®€å•æ“ä½œ | å¤æ‚é€»è¾‘ |

---

## å…­ã€é«˜çº§å‡½æ•°æ¦‚å¿µ

### 6.1 é€’å½’å‡½æ•°

é€’å½’æ˜¯å‡½æ•°è°ƒç”¨è‡ªå·±çš„ç¼–ç¨‹æŠ€å·§ï¼Œé€‚åˆè§£å†³å¯ä»¥åˆ†è§£ä¸ºç›¸ä¼¼å­é—®é¢˜çš„é—®é¢˜ã€‚

```python
# ç»å…¸ä¾‹å­ï¼šè®¡ç®—é˜¶ä¹˜
def factorial(n):
    """è®¡ç®—nçš„é˜¶ä¹˜ï¼šn! = n Ã— (n-1) Ã— ... Ã— 1"""
    # åŸºç¡€æƒ…å†µï¼ˆé€’å½’ç»ˆæ­¢æ¡ä»¶ï¼‰
    if n == 0 or n == 1:
        return 1
    # é€’å½’æƒ…å†µ
    else:
        return n * factorial(n - 1)

# æµ‹è¯•
for i in range(6):
    print(f"{i}! = {factorial(i)}")

# è¾“å‡ºï¼š
# 0! = 1
# 1! = 1
# 2! = 2
# 3! = 6
# 4! = 24
# 5! = 120
```

```python
# æ–æ³¢é‚£å¥‘æ•°åˆ—
def fibonacci(n):
    """è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬né¡¹"""
    if n <= 1:
        return n
    else:
        return fibonacci(n-1) + fibonacci(n-2)

# æ‰“å°å‰10é¡¹æ–æ³¢é‚£å¥‘æ•°åˆ—
print("æ–æ³¢é‚£å¥‘æ•°åˆ—å‰10é¡¹ï¼š")
for i in range(10):
    print(f"F({i}) = {fibonacci(i)}")
```

> **é€’å½’æ³¨æ„äº‹é¡¹**ï¼š
> - å¿…é¡»æœ‰ç»ˆæ­¢æ¡ä»¶ï¼ˆåŸºç¡€æƒ…å†µï¼‰
> - é€’å½’è°ƒç”¨å¿…é¡»å‘ç»ˆæ­¢æ¡ä»¶é è¿‘
> - é€’å½’æ·±åº¦ä¸èƒ½å¤ªå¤§ï¼ˆPythoné»˜è®¤é™åˆ¶1000å±‚ï¼‰

### 6.2 åµŒå¥—å‡½æ•°

åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å¦ä¸€ä¸ªå‡½æ•°ï¼š

```python
def outer_function(x):
    """å¤–å±‚å‡½æ•°"""
    
    def inner_function(y):
        """å†…å±‚å‡½æ•°"""
        return y * 2
    
    # åœ¨å¤–å±‚å‡½æ•°ä¸­è°ƒç”¨å†…å±‚å‡½æ•°
    result = inner_function(x) + 10
    return result

print(outer_function(5))  # è¾“å‡ºï¼š20 (5*2+10)

# inner_function(5)  # é”™è¯¯ï¼å†…å±‚å‡½æ•°åœ¨å¤–éƒ¨ä¸å¯è®¿é—®
```

### 6.3 é—­åŒ…ï¼ˆClosureï¼‰

å†…å±‚å‡½æ•°å¼•ç”¨å¤–å±‚å‡½æ•°çš„å˜é‡ï¼š

```python
def create_multiplier(factor):
    """åˆ›å»ºä¸€ä¸ªä¹˜æ³•å™¨å‡½æ•°"""
    
    def multiplier(number):
        return number * factor  # å¼•ç”¨å¤–å±‚å‡½æ•°çš„å‚æ•°
    
    return multiplier  # è¿”å›å†…å±‚å‡½æ•°

# åˆ›å»ºä¸åŒçš„ä¹˜æ³•å™¨
double = create_multiplier(2)
triple = create_multiplier(3)

print(double(5))   # è¾“å‡ºï¼š10 (5 * 2)
print(triple(5))   # è¾“å‡ºï¼š15 (5 * 3)

# æ¯ä¸ªä¹˜æ³•å™¨éƒ½"è®°ä½"äº†è‡ªå·±çš„factorå€¼
print(double(10))  # è¾“å‡ºï¼š20
print(triple(10))  # è¾“å‡ºï¼š30
```

### 6.4 è£…é¥°å™¨åŸºç¡€

è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œç”¨æ¥ä¿®æ”¹æˆ–å¢å¼ºå…¶ä»–å‡½æ•°çš„åŠŸèƒ½ï¼š

```python
def timer_decorator(func):
    """è®¡æ—¶è£…é¥°å™¨"""
    import time
    
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)  # è°ƒç”¨åŸå‡½æ•°
        end_time = time.time()
        print(f"å‡½æ•° {func.__name__} æ‰§è¡Œæ—¶é—´ï¼š{end_time - start_time:.4f}ç§’")
        return result
    
    return wrapper

# ä½¿ç”¨è£…é¥°å™¨
@timer_decorator
def slow_function():
    """ä¸€ä¸ªæ…¢å‡½æ•°"""
    import time
    time.sleep(1)  # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
    return "ä»»åŠ¡å®Œæˆ"

# è°ƒç”¨è¢«è£…é¥°çš„å‡½æ•°
result = slow_function()
print(result)
# è¾“å‡ºï¼š
# å‡½æ•° slow_function æ‰§è¡Œæ—¶é—´ï¼š1.0012ç§’
# ä»»åŠ¡å®Œæˆ
```

---

## ä¸ƒã€å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€

### 7.1 é«˜é˜¶å‡½æ•°

é«˜é˜¶å‡½æ•°æ˜¯æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å‡½æ•°çš„å‡½æ•°ï¼š

```python
def apply_operation(numbers, operation):
    """å¯¹æ•°å­—åˆ—è¡¨åº”ç”¨æŒ‡å®šæ“ä½œ"""
    result = []
    for num in numbers:
        result.append(operation(num))
    return result

# å®šä¹‰ä¸€äº›æ“ä½œå‡½æ•°
def square(x):
    return x ** 2

def cube(x):
    return x ** 3

numbers = [1, 2, 3, 4, 5]

# ä½¿ç”¨ä¸åŒçš„æ“ä½œ
squares = apply_operation(numbers, square)
cubes = apply_operation(numbers, cube)

print(f"åŸæ•°å­—ï¼š{numbers}")
print(f"å¹³æ–¹ï¼š{squares}")
print(f"ç«‹æ–¹ï¼š{cubes}")
```

### 7.2 å¸¸ç”¨å†…ç½®é«˜é˜¶å‡½æ•°

```python
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# map()ï¼šå¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨å‡½æ•°
squares = list(map(lambda x: x**2, numbers))
print(f"å¹³æ–¹ï¼š{squares}")

# filter()ï¼šè¿‡æ»¤å…ƒç´ 
even_numbers = list(filter(lambda x: x % 2 == 0, numbers))
print(f"å¶æ•°ï¼š{even_numbers}")

# reduce()ï¼šç´¯ç§¯æ“ä½œ
from functools import reduce
sum_all = reduce(lambda x, y: x + y, numbers)
print(f"æ‰€æœ‰æ•°å­—çš„å’Œï¼š{sum_all}")

# any()ï¼šä»»æ„ä¸€ä¸ªä¸ºTrue
has_even = any(x % 2 == 0 for x in numbers)
print(f"æ˜¯å¦åŒ…å«å¶æ•°ï¼š{has_even}")

# all()ï¼šæ‰€æœ‰éƒ½ä¸ºTrue
all_positive = all(x > 0 for x in numbers)
print(f"æ˜¯å¦éƒ½æ˜¯æ­£æ•°ï¼š{all_positive}")
```

---

## å…«ã€å®æˆ˜ç»ƒä¹ 

### 8.1 ç»ƒä¹ 1ï¼šæ¸©åº¦è½¬æ¢å™¨

```python
def celsius_to_fahrenheit(celsius):
    """æ‘„æ°åº¦è½¬åæ°åº¦"""
    fahrenheit = (celsius * 9/5) + 32
    return fahrenheit

def fahrenheit_to_celsius(fahrenheit):
    """åæ°åº¦è½¬æ‘„æ°åº¦"""
    celsius = (fahrenheit - 32) * 5/9
    return celsius

def temperature_converter():
    """æ¸©åº¦è½¬æ¢ä¸»ç¨‹åº"""
    print("æ¸©åº¦è½¬æ¢å™¨")
    print("1. æ‘„æ°åº¦è½¬åæ°åº¦")
    print("2. åæ°åº¦è½¬æ‘„æ°åº¦")
    
    choice = input("è¯·é€‰æ‹©è½¬æ¢ç±»å‹ (1/2): ")
    
    if choice == '1':
        celsius = float(input("è¯·è¾“å…¥æ‘„æ°åº¦: "))
        fahrenheit = celsius_to_fahrenheit(celsius)
        print(f"{celsius}Â°C = {fahrenheit:.2f}Â°F")
    elif choice == '2':
        fahrenheit = float(input("è¯·è¾“å…¥åæ°åº¦: "))
        celsius = fahrenheit_to_celsius(fahrenheit)
        print(f"{fahrenheit}Â°F = {celsius:.2f}Â°C")
    else:
        print("æ— æ•ˆé€‰æ‹©")

# è¿è¡Œç¨‹åº
# temperature_converter()
```

### 8.2 ç»ƒä¹ 2ï¼šå­¦ç”Ÿæˆç»©ç®¡ç†

```python
def calculate_average(scores):
    """è®¡ç®—å¹³å‡åˆ†"""
    if not scores:
        return 0
    return sum(scores) / len(scores)

def get_grade(score):
    """æ ¹æ®åˆ†æ•°è·å–ç­‰çº§"""
    if score >= 90:
        return 'A'
    elif score >= 80:
        return 'B'
    elif score >= 70:
        return 'C'
    elif score >= 60:
        return 'D'
    else:
        return 'F'

def analyze_scores(student_scores):
    """åˆ†æå­¦ç”Ÿæˆç»©"""
    print("å­¦ç”Ÿæˆç»©åˆ†ææŠ¥å‘Š")
    print("=" * 30)
    
    for name, scores in student_scores.items():
        avg_score = calculate_average(scores)
        grade = get_grade(avg_score)
        
        print(f"å­¦ç”Ÿï¼š{name}")
        print(f"  å„ç§‘æˆç»©ï¼š{scores}")
        print(f"  å¹³å‡åˆ†ï¼š{avg_score:.2f}")
        print(f"  ç­‰çº§ï¼š{grade}")
        print("-" * 20)

# æµ‹è¯•æ•°æ®
student_data = {
    "å¼ ä¸‰": [85, 92, 78, 96],
    "æå››": [76, 88, 82, 79],
    "ç‹äº”": [95, 87, 91, 93]
}

analyze_scores(student_data)
```

### 8.3 ç»ƒä¹ 3ï¼šç®€å•è®¡ç®—å™¨

```python
def add(a, b):
    """åŠ æ³•"""
    return a + b

def subtract(a, b):
    """å‡æ³•"""
    return a - b

def multiply(a, b):
    """ä¹˜æ³•"""
    return a * b

def divide(a, b):
    """é™¤æ³•"""
    if b == 0:
        return "é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸º0"
    return a / b

def calculator():
    """ç®€å•è®¡ç®—å™¨"""
    operations = {
        '+': add,
        '-': subtract,
        '*': multiply,
        '/': divide
    }
    
    print("ç®€å•è®¡ç®—å™¨")
    print("æ”¯æŒçš„æ“ä½œï¼š+, -, *, /")
    print("è¾“å…¥ 'quit' é€€å‡º")
    
    while True:
        try:
            expression = input("è¯·è¾“å…¥è®¡ç®—è¡¨è¾¾å¼ (å¦‚: 5 + 3): ")
            
            if expression.lower() == 'quit':
                print("å†è§ï¼")
                break
            
            # è§£æè¾“å…¥
            parts = expression.split()
            if len(parts) != 3:
                print("æ ¼å¼é”™è¯¯ï¼Œè¯·ä½¿ç”¨æ ¼å¼ï¼šæ•°å­— æ“ä½œç¬¦ æ•°å­—")
                continue
            
            num1, operator, num2 = parts
            num1, num2 = float(num1), float(num2)
            
            if operator in operations:
                result = operations[operator](num1, num2)
                print(f"ç»“æœï¼š{num1} {operator} {num2} = {result}")
            else:
                print("ä¸æ”¯æŒçš„æ“ä½œç¬¦")
                
        except ValueError:
            print("è¾“å…¥é”™è¯¯ï¼Œè¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—")
        except Exception as e:
            print(f"å‘ç”Ÿé”™è¯¯ï¼š{e}")

# è¿è¡Œè®¡ç®—å™¨
# calculator()
```

---

## ä¹ã€å‡½æ•°æœ€ä½³å®è·µ

### 9.1 å‡½æ•°è®¾è®¡åŸåˆ™

```python
# âœ… å¥½çš„å‡½æ•°è®¾è®¡
def calculate_circle_area(radius):
    """è®¡ç®—åœ†çš„é¢ç§¯
    
    Args:
        radius (float): åœ†çš„åŠå¾„
    
    Returns:
        float: åœ†çš„é¢ç§¯
    
    Raises:
        ValueError: å½“åŠå¾„ä¸ºè´Ÿæ•°æ—¶
    """
    if radius < 0:
        raise ValueError("åŠå¾„ä¸èƒ½ä¸ºè´Ÿæ•°")
    
    import math
    return math.pi * radius ** 2

# âŒ ä¸å¥½çš„å‡½æ•°è®¾è®¡
def calc(r):
    # æ²¡æœ‰æ–‡æ¡£è¯´æ˜
    # å˜é‡åä¸æ¸…æ™°
    # æ²¡æœ‰é”™è¯¯å¤„ç†
    return 3.14 * r * r
```

### 9.2 å‡½æ•°å‘½åè§„èŒƒ

```python
# âœ… å¥½çš„å‡½æ•°å‘½å
def get_user_age(user_id):
    """è·å–ç”¨æˆ·å¹´é¾„"""
    pass

def is_valid_email(email):
    """æ£€æŸ¥é‚®ç®±æ˜¯å¦æœ‰æ•ˆ"""
    pass

def calculate_total_price(items):
    """è®¡ç®—æ€»ä»·æ ¼"""
    pass

# âŒ ä¸å¥½çš„å‡½æ•°å‘½å
def func1(x):  # åç§°ä¸æ˜ç¡®
    pass

def getData():  # ä¸ç¬¦åˆPythonå‘½åè§„èŒƒ
    pass

def do_everything():  # åŠŸèƒ½ä¸å•ä¸€
    pass
```

### 9.3 å‡½æ•°é•¿åº¦å’Œå¤æ‚åº¦

```python
# âœ… å•ä¸€èŒè´£ï¼Œç®€æ´æ˜äº†
def validate_password(password):
    """éªŒè¯å¯†ç å¼ºåº¦"""
    if len(password) < 8:
        return False, "å¯†ç é•¿åº¦è‡³å°‘8ä½"
    
    if not any(c.isupper() for c in password):
        return False, "å¯†ç å¿…é¡»åŒ…å«å¤§å†™å­—æ¯"
    
    if not any(c.islower() for c in password):
        return False, "å¯†ç å¿…é¡»åŒ…å«å°å†™å­—æ¯"
    
    if not any(c.isdigit() for c in password):
        return False, "å¯†ç å¿…é¡»åŒ…å«æ•°å­—"
    
    return True, "å¯†ç å¼ºåº¦åˆæ ¼"

# æµ‹è¯•
passwords = ["123456", "Password", "Password123"]
for pwd in passwords:
    is_valid, message = validate_password(pwd)
    print(f"å¯†ç  '{pwd}': {message}")
```

---

## åã€æ€»ç»“

### 10.1 å‡½æ•°çŸ¥è¯†ç‚¹æ€»ç»“

| æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| å‡½æ•°å®šä¹‰ | ä½¿ç”¨`def`å…³é”®å­— | `def func_name():` |
| å‚æ•°ç±»å‹ | ä½ç½®ã€å…³é”®å­—ã€é»˜è®¤ã€å¯å˜ | `def func(a, b=1, *args, **kwargs):` |
| è¿”å›å€¼ | ä½¿ç”¨`return`è¿”å›ç»“æœ | `return result` |
| ä½œç”¨åŸŸ | å±€éƒ¨å˜é‡vså…¨å±€å˜é‡ | `global variable_name` |
| Lambda | åŒ¿åå‡½æ•°ï¼Œç®€æ´è¯­æ³• | `lambda x: x * 2` |
| é€’å½’ | å‡½æ•°è°ƒç”¨è‡ªå·± | é˜¶ä¹˜ã€æ–æ³¢é‚£å¥‘ |
| è£…é¥°å™¨ | å¢å¼ºå‡½æ•°åŠŸèƒ½ | `@decorator` |

### 10.2 å‡½æ•°ä½¿ç”¨å»ºè®®

1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹
2. **å‘½åæ¸…æ™°**ï¼šå‡½æ•°åè¦èƒ½è¡¨è¾¾å…¶åŠŸèƒ½
3. **å‚æ•°åˆç†**ï¼šå‚æ•°ä¸è¦å¤ªå¤šï¼ˆå»ºè®®ä¸è¶…è¿‡5ä¸ªï¼‰
4. **æ–‡æ¡£å®Œæ•´**ï¼šå†™å¥½å‡½æ•°è¯´æ˜æ–‡æ¡£
5. **é”™è¯¯å¤„ç†**ï¼šè€ƒè™‘å¼‚å¸¸æƒ…å†µ
6. **æµ‹è¯•å……åˆ†**ï¼šç¼–å†™æµ‹è¯•ç”¨ä¾‹

### 10.3 ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘

æŒæ¡äº†å‡½æ•°åï¼Œä½ å¯ä»¥ç»§ç»­å­¦ä¹ ï¼š
- **æ¨¡å—å’ŒåŒ…**ï¼šä»£ç ç»„ç»‡å’Œå¤ç”¨
- **é¢å‘å¯¹è±¡ç¼–ç¨‹**ï¼šç±»å’Œå¯¹è±¡
- **å¼‚å¸¸å¤„ç†**ï¼šé”™è¯¯å¤„ç†æœºåˆ¶
- **æ–‡ä»¶æ“ä½œ**ï¼šè¯»å†™æ–‡ä»¶
- **é«˜çº§ç‰¹æ€§**ï¼šç”Ÿæˆå™¨ã€è£…é¥°å™¨ç­‰

æ­å–œä½ ï¼å‡½æ•°æ˜¯ç¼–ç¨‹çš„æ ¸å¿ƒï¼ŒæŒæ¡äº†å‡½æ•°ï¼Œä½ å·²ç»å…·å¤‡äº†ç¼–å†™å¤æ‚ç¨‹åºçš„åŸºç¡€èƒ½åŠ›ã€‚ç»§ç»­åŠ æ²¹ï¼ğŸš€

---

**ç»ƒä¹ å»ºè®®**ï¼š
1. å°è¯•é‡å†™ä¹‹å‰å­¦è¿‡çš„ä»£ç ï¼Œä½¿ç”¨å‡½æ•°æ¥ç»„ç»‡
2. ç¼–å†™ä¸€äº›å®ç”¨çš„å°å·¥å…·å‡½æ•°
3. ç»ƒä¹ ä½¿ç”¨ä¸åŒç±»å‹çš„å‚æ•°
4. å°è¯•ç¼–å†™é€’å½’å‡½æ•°è§£å†³é—®é¢˜
5. å­¦ä¼šé˜…è¯»å’Œä½¿ç”¨ä»–äººç¼–å†™çš„å‡½æ•°




