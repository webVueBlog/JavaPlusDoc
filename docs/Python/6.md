---
title: ç¬¬6å¤©-é«˜çº§ç‰¹æ€§
author: å“ªå’
date: '2023-06-15'
---

# ç¬¬6å¤©-Pythoné«˜çº§ç‰¹æ€§

æ­å–œä½ ï¼ç»è¿‡å‰5å¤©çš„å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº†Pythonçš„åŸºç¡€è¯­æ³•ã€‚ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ Pythonçš„**é«˜çº§ç‰¹æ€§**ï¼Œè¿™äº›ç‰¹æ€§è®©Pythonå˜å¾—æ›´åŠ å¼ºå¤§å’Œä¼˜é›…ï¼

## ä¸ºä»€ä¹ˆè¦å­¦ä¹ é«˜çº§ç‰¹æ€§ï¼Ÿ

æƒ³è±¡ä¸€ä¸‹ï¼š
- ğŸš— **æ™®é€šå¼€è½¦**ï¼šåªä¼šå¼€è½¦ï¼Œä½†ä¸çŸ¥é“GPSã€è‡ªåŠ¨æ³Šè½¦ç­‰é«˜çº§åŠŸèƒ½
- ğŸï¸ **é«˜çº§é©¾é©¶**ï¼šç†Ÿç»ƒä½¿ç”¨å„ç§è¾…åŠ©åŠŸèƒ½ï¼Œé©¾é©¶æ›´è½»æ¾é«˜æ•ˆ

Pythonçš„é«˜çº§ç‰¹æ€§å°±åƒæ±½è½¦çš„é«˜çº§åŠŸèƒ½ï¼Œè®©ä½ çš„ç¼–ç¨‹æ›´åŠ **ç®€æ´ã€é«˜æ•ˆã€ä¼˜é›…**ï¼

---

## ä¸€ã€åˆ—è¡¨æ¨å¯¼å¼ï¼ˆList Comprehensionï¼‰

### 1.1 ä»€ä¹ˆæ˜¯åˆ—è¡¨æ¨å¯¼å¼ï¼Ÿ

åˆ—è¡¨æ¨å¯¼å¼æ˜¯Pythonåˆ›å»ºåˆ—è¡¨çš„ä¸€ç§**ç®€æ´è€Œå¼ºå¤§**çš„æ–¹æ³•ï¼Œå¯ä»¥ç”¨ä¸€è¡Œä»£ç å®Œæˆå¤æ‚çš„åˆ—è¡¨ç”Ÿæˆã€‚

> **ç”Ÿæ´»ç±»æ¯”**ï¼šå°±åƒå·¥å‚æµæ°´çº¿ï¼Œè¾“å…¥åŸææ–™ï¼Œç»è¿‡åŠ å·¥ï¼Œè¾“å‡ºæˆå“åˆ—è¡¨ã€‚

### 1.2 åŸºæœ¬è¯­æ³•

```python
# åŸºæœ¬è¯­æ³•ï¼š[è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡]
new_list = [expression for item in iterable]

# å¸¦æ¡ä»¶çš„è¯­æ³•ï¼š[è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡ if æ¡ä»¶]
new_list = [expression for item in iterable if condition]
```

### 1.3 ä»ä¼ ç»Ÿæ–¹æ³•åˆ°åˆ—è¡¨æ¨å¯¼å¼

```python
# ä¼ ç»Ÿæ–¹æ³•ï¼šç”Ÿæˆ1åˆ°10çš„å¹³æ–¹
squares_traditional = []
for i in range(1, 11):
    squares_traditional.append(i ** 2)
print(squares_traditional)
# è¾“å‡ºï¼š[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]

# åˆ—è¡¨æ¨å¯¼å¼ï¼šä¸€è¡Œæå®šï¼
squares_comprehension = [i ** 2 for i in range(1, 11)]
print(squares_comprehension)
# è¾“å‡ºï¼š[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]

# æ•ˆæœç›¸åŒï¼Œä½†åˆ—è¡¨æ¨å¯¼å¼æ›´ç®€æ´ï¼
```

### 1.4 å¸¦æ¡ä»¶çš„åˆ—è¡¨æ¨å¯¼å¼

```python
# ç­›é€‰å¶æ•°å¹¶æ±‚å¹³æ–¹
numbers = range(1, 11)
even_squares = [x ** 2 for x in numbers if x % 2 == 0]
print(even_squares)  # è¾“å‡ºï¼š[4, 16, 36, 64, 100]

# å¤„ç†å­—ç¬¦ä¸²åˆ—è¡¨
words = ['hello', 'world', 'python', 'programming']
# ç­›é€‰é•¿åº¦å¤§äº5çš„å•è¯å¹¶è½¬ä¸ºå¤§å†™
long_words = [word.upper() for word in words if len(word) > 5]
print(long_words)  # è¾“å‡ºï¼š['PYTHON', 'PROGRAMMING']

# å¤„ç†åµŒå¥—æ•°æ®
students = [('Alice', 85), ('Bob', 92), ('Charlie', 78), ('Diana', 96)]
# ç­›é€‰åˆ†æ•°å¤§äº80çš„å­¦ç”Ÿå§“å
high_scorers = [name for name, score in students if score > 80]
print(high_scorers)  # è¾“å‡ºï¼š['Alice', 'Bob', 'Diana']
```

### 1.5 åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼

```python
# åˆ›å»ºäºŒç»´åˆ—è¡¨ï¼ˆçŸ©é˜µï¼‰
matrix = [[i * j for j in range(1, 4)] for i in range(1, 4)]
print(matrix)
# è¾“å‡ºï¼š[[1, 2, 3], [2, 4, 6], [3, 6, 9]]

# å±•å¹³äºŒç»´åˆ—è¡¨
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
flattened = [num for row in matrix for num in row]
print(flattened)  # è¾“å‡ºï¼š[1, 2, 3, 4, 5, 6, 7, 8, 9]
```

> **å°ç™½æç¤º**ï¼šåµŒå¥—åˆ—è¡¨æ¨å¯¼å¼ä»å·¦åˆ°å³è¯»ï¼šå…ˆå¤–å±‚å¾ªç¯ï¼Œå†å†…å±‚å¾ªç¯ã€‚

---

## äºŒã€å­—å…¸æ¨å¯¼å¼ï¼ˆDict Comprehensionï¼‰

### 2.1 åŸºæœ¬è¯­æ³•

```python
# åŸºæœ¬è¯­æ³•ï¼š{é”®è¡¨è¾¾å¼: å€¼è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡}
new_dict = {key_expr: value_expr for item in iterable}

# å¸¦æ¡ä»¶ï¼š{é”®è¡¨è¾¾å¼: å€¼è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡ if æ¡ä»¶}
new_dict = {key_expr: value_expr for item in iterable if condition}
```

### 2.2 å®é™…åº”ç”¨ç¤ºä¾‹

```python
# åˆ›å»ºæ•°å­—åˆ°å¹³æ–¹çš„æ˜ å°„
square_dict = {x: x**2 for x in range(1, 6)}
print(square_dict)  # è¾“å‡ºï¼š{1: 1, 2: 4, 3: 9, 4: 16, 5: 25}

# å­—ç¬¦ä¸²é•¿åº¦æ˜ å°„
words = ['apple', 'banana', 'cherry', 'date']
word_lengths = {word: len(word) for word in words}
print(word_lengths)
# è¾“å‡ºï¼š{'apple': 5, 'banana': 6, 'cherry': 6, 'date': 4}

# ç­›é€‰å¹¶è½¬æ¢å­—å…¸
original_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4}
# åªä¿ç•™å€¼ä¸ºå¶æ•°çš„é¡¹ï¼Œå¹¶å°†å€¼ç¿»å€
even_doubled = {k: v*2 for k, v in original_dict.items() if v % 2 == 0}
print(even_doubled)  # è¾“å‡ºï¼š{'b': 4, 'd': 8}

# äº¤æ¢é”®å€¼å¯¹
original = {'name': 'Alice', 'age': '25', 'city': 'Beijing'}
swapped = {v: k for k, v in original.items()}
print(swapped)  # è¾“å‡ºï¼š{'Alice': 'name', '25': 'age', 'Beijing': 'city'}
```

---

## ä¸‰ã€é›†åˆæ¨å¯¼å¼ï¼ˆSet Comprehensionï¼‰

### 3.1 åŸºæœ¬ç”¨æ³•

```python
# åŸºæœ¬è¯­æ³•ï¼š{è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡}
new_set = {expression for item in iterable}

# åˆ›å»ºå¹³æ–¹æ•°é›†åˆ
squares_set = {x**2 for x in range(1, 6)}
print(squares_set)  # è¾“å‡ºï¼š{1, 4, 9, 16, 25}

# å»é‡åŠŸèƒ½
numbers = [1, 2, 2, 3, 3, 4, 5, 5]
unique_squares = {x**2 for x in numbers}
print(unique_squares)  # è¾“å‡ºï¼š{1, 4, 9, 16, 25}

# å­—ç¬¦ä¸²å¤„ç†
text = "Hello World"
unique_chars = {char.lower() for char in text if char.isalpha()}
print(unique_chars)  # è¾“å‡ºï¼š{'h', 'e', 'l', 'o', 'w', 'r', 'd'}
```

---

## å››ã€ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰

### 4.1 ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨ï¼Ÿ

ç”Ÿæˆå™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨ï¼Œå®ƒ**æŒ‰éœ€ç”Ÿæˆæ•°æ®**ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰æ•°æ®ã€‚

> **ç”Ÿæ´»ç±»æ¯”**ï¼š
> - **åˆ—è¡¨**ï¼šåƒä¸€æ¬¡æ€§ä¹°ä¸€ç®±è‹¹æœï¼Œå ç”¨å¾ˆå¤šå†°ç®±ç©ºé—´
> - **ç”Ÿæˆå™¨**ï¼šåƒæœå›­ï¼Œéœ€è¦æ—¶æ‰æ‘˜ä¸€ä¸ªè‹¹æœï¼ŒèŠ‚çœç©ºé—´

### 4.2 ç”Ÿæˆå™¨è¡¨è¾¾å¼

```python
# ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼šç”¨åœ†æ‹¬å·ä»£æ›¿æ–¹æ‹¬å·
squares_gen = (x**2 for x in range(1, 6))
print(type(squares_gen))  # è¾“å‡ºï¼š<class 'generator'>

# é€ä¸ªè·å–å€¼
print(next(squares_gen))  # è¾“å‡ºï¼š1
print(next(squares_gen))  # è¾“å‡ºï¼š4
print(next(squares_gen))  # è¾“å‡ºï¼š9

# æˆ–è€…ç”¨forå¾ªç¯éå†
squares_gen = (x**2 for x in range(1, 6))
for square in squares_gen:
    print(square)
# è¾“å‡ºï¼š1 4 9 16 25
```

### 4.3 yieldå…³é”®å­—

```python
def fibonacci_generator(n):
    """ç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰né¡¹"""
    a, b = 0, 1
    count = 0
    while count < n:
        yield a  # è¿”å›å½“å‰å€¼ï¼Œä½†å‡½æ•°ä¸ç»“æŸ
        a, b = b, a + b
        count += 1

# ä½¿ç”¨ç”Ÿæˆå™¨
fib_gen = fibonacci_generator(10)
for num in fib_gen:
    print(num, end=' ')
# è¾“å‡ºï¼š0 1 1 2 3 5 8 13 21 34

print()  # æ¢è¡Œ

# ç”Ÿæˆå™¨çš„å†…å­˜ä¼˜åŠ¿
def large_range_list(n):
    """ä¼ ç»Ÿæ–¹æ³•ï¼šåˆ›å»ºå¤§åˆ—è¡¨"""
    return [i for i in range(n)]

def large_range_generator(n):
    """ç”Ÿæˆå™¨æ–¹æ³•ï¼šæŒ‰éœ€ç”Ÿæˆ"""
    for i in range(n):
        yield i

# å¯¹æ¯”å†…å­˜ä½¿ç”¨ï¼ˆè¿™é‡Œåªæ˜¯æ¼”ç¤ºæ¦‚å¿µï¼‰
import sys

# å°æ•°æ®é‡æ—¶å·®åˆ«ä¸å¤§
small_list = large_range_list(100)
small_gen = large_range_generator(100)

print(f"åˆ—è¡¨å¤§å°ï¼š{sys.getsizeof(small_list)} å­—èŠ‚")
print(f"ç”Ÿæˆå™¨å¤§å°ï¼š{sys.getsizeof(small_gen)} å­—èŠ‚")
```

### 4.4 ç”Ÿæˆå™¨çš„å®é™…åº”ç”¨

```python
def read_large_file(filename):
    """é€è¡Œè¯»å–å¤§æ–‡ä»¶ï¼ŒèŠ‚çœå†…å­˜"""
    with open(filename, 'r', encoding='utf-8') as file:
        for line in file:
            yield line.strip()

def process_data_stream():
    """æ¨¡æ‹Ÿæ•°æ®æµå¤„ç†"""
    data = range(1000000)  # æ¨¡æ‹Ÿå¤§é‡æ•°æ®
    for item in data:
        if item % 2 == 0:  # åªå¤„ç†å¶æ•°
            yield item * 2

# ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¤§é‡æ•°æ®
processed_data = process_data_stream()
# åªå–å‰10ä¸ªç»“æœ
for i, value in enumerate(processed_data):
    if i >= 10:
        break
    print(value, end=' ')
# è¾“å‡ºï¼š0 4 8 12 16 20 24 28 32 36
```

---

## äº”ã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰

### 5.1 ç†è§£è¿­ä»£å™¨

```python
# å¯è¿­ä»£å¯¹è±¡ vs è¿­ä»£å™¨
my_list = [1, 2, 3, 4, 5]  # å¯è¿­ä»£å¯¹è±¡
my_iterator = iter(my_list)  # è¿­ä»£å™¨

print(type(my_list))      # <class 'list'>
print(type(my_iterator))  # <class 'list_iterator'>

# ä½¿ç”¨è¿­ä»£å™¨
print(next(my_iterator))  # 1
print(next(my_iterator))  # 2
print(next(my_iterator))  # 3

# è¿­ä»£å™¨åªèƒ½å‘å‰ï¼Œä¸èƒ½åé€€
# print(next(my_iterator))  # 4
# print(next(my_iterator))  # 5
# print(next(my_iterator))  # StopIteration å¼‚å¸¸
```

### 5.2 è‡ªå®šä¹‰è¿­ä»£å™¨

```python
class CountDown:
    """å€’è®¡æ—¶è¿­ä»£å™¨"""
    
    def __init__(self, start):
        self.start = start
    
    def __iter__(self):
        return self
    
    def __next__(self):
        if self.start <= 0:
            raise StopIteration
        self.start -= 1
        return self.start + 1

# ä½¿ç”¨è‡ªå®šä¹‰è¿­ä»£å™¨
countdown = CountDown(5)
for num in countdown:
    print(f"å€’è®¡æ—¶ï¼š{num}")
# è¾“å‡ºï¼š
# å€’è®¡æ—¶ï¼š5
# å€’è®¡æ—¶ï¼š4
# å€’è®¡æ—¶ï¼š3
# å€’è®¡æ—¶ï¼š2
# å€’è®¡æ—¶ï¼š1
```

---

## å…­ã€è£…é¥°å™¨è¿›é˜¶

### 6.1 å¸¦å‚æ•°çš„è£…é¥°å™¨

```python
def repeat(times):
    """é‡å¤æ‰§è¡Œè£…é¥°å™¨"""
    def decorator(func):
        def wrapper(*args, **kwargs):
            for i in range(times):
                result = func(*args, **kwargs)
            return result
        return wrapper
    return decorator

@repeat(3)
def greet(name):
    print(f"Hello, {name}!")

greet("Alice")
# è¾“å‡ºï¼š
# Hello, Alice!
# Hello, Alice!
# Hello, Alice!
```

### 6.2 ç±»è£…é¥°å™¨

```python
class Timer:
    """è®¡æ—¶è£…é¥°å™¨ç±»"""
    
    def __init__(self, func):
        self.func = func
    
    def __call__(self, *args, **kwargs):
        import time
        start = time.time()
        result = self.func(*args, **kwargs)
        end = time.time()
        print(f"{self.func.__name__} æ‰§è¡Œæ—¶é—´ï¼š{end - start:.4f}ç§’")
        return result

@Timer
def slow_function():
    import time
    time.sleep(1)
    return "å®Œæˆ"

result = slow_function()
print(result)
```

### 6.3 å¤šä¸ªè£…é¥°å™¨ç»„åˆ

```python
def bold(func):
    def wrapper(*args, **kwargs):
        result = func(*args, **kwargs)
        return f"<b>{result}</b>"
    return wrapper

def italic(func):
    def wrapper(*args, **kwargs):
        result = func(*args, **kwargs)
        return f"<i>{result}</i>"
    return wrapper

@bold
@italic
def say_hello(name):
    return f"Hello, {name}!"

print(say_hello("World"))
# è¾“å‡ºï¼š<b><i>Hello, World!</i></b>
```

---

## ä¸ƒã€é«˜é˜¶å‡½æ•°

### 7.1 map()å‡½æ•°

```python
# map(function, iterable) - å°†å‡½æ•°åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ 
numbers = [1, 2, 3, 4, 5]

# ä½¿ç”¨æ™®é€šå‡½æ•°
def square(x):
    return x ** 2

squared = list(map(square, numbers))
print(squared)  # [1, 4, 9, 16, 25]

# ä½¿ç”¨lambdaå‡½æ•°
squared_lambda = list(map(lambda x: x ** 2, numbers))
print(squared_lambda)  # [1, 4, 9, 16, 25]

# å¤„ç†å­—ç¬¦ä¸²
words = ['hello', 'world', 'python']
uppercase = list(map(str.upper, words))
print(uppercase)  # ['HELLO', 'WORLD', 'PYTHON']

# å¤šä¸ªå¯è¿­ä»£å¯¹è±¡
nums1 = [1, 2, 3]
nums2 = [4, 5, 6]
sums = list(map(lambda x, y: x + y, nums1, nums2))
print(sums)  # [5, 7, 9]
```

### 7.2 filter()å‡½æ•°

```python
# filter(function, iterable) - è¿‡æ»¤å…ƒç´ 
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# ç­›é€‰å¶æ•°
even_numbers = list(filter(lambda x: x % 2 == 0, numbers))
print(even_numbers)  # [2, 4, 6, 8, 10]

# ç­›é€‰å¤§äº5çš„æ•°
greater_than_5 = list(filter(lambda x: x > 5, numbers))
print(greater_than_5)  # [6, 7, 8, 9, 10]

# ç­›é€‰éç©ºå­—ç¬¦ä¸²
words = ['hello', '', 'world', '', 'python']
non_empty = list(filter(None, words))  # Noneä¼šè¿‡æ»¤æ‰å‡å€¼
print(non_empty)  # ['hello', 'world', 'python']

# è‡ªå®šä¹‰è¿‡æ»¤å‡½æ•°
def is_long_word(word):
    return len(word) > 5

words = ['cat', 'elephant', 'dog', 'hippopotamus']
long_words = list(filter(is_long_word, words))
print(long_words)  # ['elephant', 'hippopotamus']
```

### 7.3 reduce()å‡½æ•°

```python
from functools import reduce

# reduce(function, iterable[, initializer]) - ç´¯ç§¯æ“ä½œ
numbers = [1, 2, 3, 4, 5]

# è®¡ç®—æ€»å’Œ
total = reduce(lambda x, y: x + y, numbers)
print(total)  # 15

# è®¡ç®—ä¹˜ç§¯
product = reduce(lambda x, y: x * y, numbers)
print(product)  # 120

# æ‰¾æœ€å¤§å€¼
max_value = reduce(lambda x, y: x if x > y else y, numbers)
print(max_value)  # 5

# å­—ç¬¦ä¸²è¿æ¥
words = ['Hello', ' ', 'World', '!']
sentence = reduce(lambda x, y: x + y, words)
print(sentence)  # "Hello World!"

# å¸¦åˆå§‹å€¼
numbers = [1, 2, 3, 4, 5]
total_with_init = reduce(lambda x, y: x + y, numbers, 100)
print(total_with_init)  # 115 (100 + 15)
```

### 7.4 zip()å‡½æ•°

```python
# zip(*iterables) - æ‰“åŒ…å¤šä¸ªå¯è¿­ä»£å¯¹è±¡
names = ['Alice', 'Bob', 'Charlie']
ages = [25, 30, 35]
cities = ['Beijing', 'Shanghai', 'Guangzhou']

# åŸºæœ¬ç”¨æ³•
combined = list(zip(names, ages))
print(combined)  # [('Alice', 25), ('Bob', 30), ('Charlie', 35)]

# ä¸‰ä¸ªåˆ—è¡¨ç»„åˆ
full_info = list(zip(names, ages, cities))
print(full_info)
# [('Alice', 25, 'Beijing'), ('Bob', 30, 'Shanghai'), ('Charlie', 35, 'Guangzhou')]

# è§£åŒ…zipç»“æœ
for name, age, city in zip(names, ages, cities):
    print(f"{name}, {age}å², æ¥è‡ª{city}")

# zipçš„é€†æ“ä½œï¼šè§£åŒ…
combined = [('Alice', 25), ('Bob', 30), ('Charlie', 35)]
names_unpacked, ages_unpacked = zip(*combined)
print(names_unpacked)  # ('Alice', 'Bob', 'Charlie')
print(ages_unpacked)   # (25, 30, 35)

# ä¸åŒé•¿åº¦çš„åˆ—è¡¨ï¼ˆä»¥æœ€çŸ­ä¸ºå‡†ï¼‰
short_list = [1, 2]
long_list = [10, 20, 30, 40]
result = list(zip(short_list, long_list))
print(result)  # [(1, 10), (2, 20)]
```

---

## å…«ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆwithè¯­å¥ï¼‰

### 8.1 æ–‡ä»¶æ“ä½œçš„æœ€ä½³å®è·µ

```python
# ä¼ ç»Ÿæ–¹æ³•ï¼ˆä¸æ¨èï¼‰
file = open('example.txt', 'w')
file.write('Hello, World!')
file.close()  # å®¹æ˜“å¿˜è®°å…³é—­

# ä½¿ç”¨withè¯­å¥ï¼ˆæ¨èï¼‰
with open('example.txt', 'w') as file:
    file.write('Hello, World!')
# è‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œå³ä½¿å‡ºç°å¼‚å¸¸ä¹Ÿä¼šå…³é—­

# è¯»å–æ–‡ä»¶
with open('example.txt', 'r') as file:
    content = file.read()
    print(content)  # Hello, World!
```

### 8.2 è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨

```python
class Timer:
    """è®¡æ—¶ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""
    
    def __enter__(self):
        import time
        self.start = time.time()
        print("å¼€å§‹è®¡æ—¶...")
        return self
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        import time
        self.end = time.time()
        print(f"æ‰§è¡Œæ—¶é—´ï¼š{self.end - self.start:.4f}ç§’")

# ä½¿ç”¨è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨
with Timer():
    import time
    time.sleep(1)
    print("æ‰§è¡Œä¸€äº›æ“ä½œ...")
# è¾“å‡ºï¼š
# å¼€å§‹è®¡æ—¶...
# æ‰§è¡Œä¸€äº›æ“ä½œ...
# æ‰§è¡Œæ—¶é—´ï¼š1.0012ç§’
```

### 8.3 ä½¿ç”¨contextlibç®€åŒ–

```python
from contextlib import contextmanager

@contextmanager
def timer_context():
    import time
    start = time.time()
    print("å¼€å§‹è®¡æ—¶...")
    try:
        yield
    finally:
        end = time.time()
        print(f"æ‰§è¡Œæ—¶é—´ï¼š{end - start:.4f}ç§’")

# ä½¿ç”¨
with timer_context():
    import time
    time.sleep(0.5)
    print("æ‰§è¡Œæ“ä½œ...")
```

---

## ä¹ã€ç±»å‹æ³¨è§£ï¼ˆType Hintsï¼‰

### 9.1 åŸºæœ¬ç±»å‹æ³¨è§£

```python
# å˜é‡ç±»å‹æ³¨è§£
name: str = "Alice"
age: int = 25
height: float = 1.68
is_student: bool = True

# å‡½æ•°ç±»å‹æ³¨è§£
def greet(name: str, age: int) -> str:
    return f"Hello, {name}! You are {age} years old."

def calculate_area(length: float, width: float) -> float:
    """è®¡ç®—çŸ©å½¢é¢ç§¯"""
    return length * width

# ä½¿ç”¨
result = greet("Bob", 30)
area = calculate_area(5.0, 3.0)
print(result)
print(f"é¢ç§¯ï¼š{area}")
```

### 9.2 å¤æ‚ç±»å‹æ³¨è§£

```python
from typing import List, Dict, Tuple, Optional, Union

# åˆ—è¡¨ç±»å‹
def process_numbers(numbers: List[int]) -> List[int]:
    return [n * 2 for n in numbers]

# å­—å…¸ç±»å‹
def get_student_info() -> Dict[str, Union[str, int]]:
    return {"name": "Alice", "age": 20, "grade": "A"}

# å…ƒç»„ç±»å‹
def get_coordinates() -> Tuple[float, float]:
    return (39.9042, 116.4074)

# å¯é€‰ç±»å‹
def find_user(user_id: int) -> Optional[str]:
    users = {1: "Alice", 2: "Bob"}
    return users.get(user_id)  # å¯èƒ½è¿”å›None

# è”åˆç±»å‹
def process_id(user_id: Union[int, str]) -> str:
    return str(user_id)

# ä½¿ç”¨ç¤ºä¾‹
numbers = [1, 2, 3, 4, 5]
doubled = process_numbers(numbers)
print(doubled)  # [2, 4, 6, 8, 10]

student = get_student_info()
print(student)  # {'name': 'Alice', 'age': 20, 'grade': 'A'}

coords = get_coordinates()
print(coords)  # (39.9042, 116.4074)

user = find_user(1)
print(user)  # Alice

user_id = process_id(123)
print(user_id)  # "123"
```

---

## åã€å®æˆ˜ç»ƒä¹ 

### 10.1 æ•°æ®å¤„ç†ç»¼åˆç»ƒä¹ 

```python
# å­¦ç”Ÿæˆç»©æ•°æ®å¤„ç†
students_data = [
    {'name': 'Alice', 'scores': [85, 92, 78, 96]},
    {'name': 'Bob', 'scores': [76, 88, 82, 79]},
    {'name': 'Charlie', 'scores': [95, 87, 91, 93]},
    {'name': 'Diana', 'scores': [68, 74, 82, 79]}
]

# ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼è®¡ç®—æ¯ä¸ªå­¦ç”Ÿçš„å¹³å‡åˆ†
average_scores = [
    {
        'name': student['name'], 
        'average': sum(student['scores']) / len(student['scores'])
    } 
    for student in students_data
]

print("å¹³å‡åˆ†ï¼š")
for student in average_scores:
    print(f"{student['name']}: {student['average']:.2f}")

# ä½¿ç”¨filterç­›é€‰ä¼˜ç§€å­¦ç”Ÿï¼ˆå¹³å‡åˆ†>85ï¼‰
excellent_students = list(filter(
    lambda s: s['average'] > 85, 
    average_scores
))

print("\nä¼˜ç§€å­¦ç”Ÿï¼š")
for student in excellent_students:
    print(f"{student['name']}: {student['average']:.2f}")

# ä½¿ç”¨mapè½¬æ¢æ•°æ®æ ¼å¼
student_names = list(map(lambda s: s['name'].upper(), excellent_students))
print(f"\nä¼˜ç§€å­¦ç”Ÿå§“åï¼ˆå¤§å†™ï¼‰ï¼š{student_names}")
```

### 10.2 æ–‡ä»¶å¤„ç†ç”Ÿæˆå™¨

```python
def process_log_file(filename: str):
    """å¤„ç†æ—¥å¿—æ–‡ä»¶çš„ç”Ÿæˆå™¨"""
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            for line_num, line in enumerate(file, 1):
                line = line.strip()
                if line and not line.startswith('#'):  # è·³è¿‡ç©ºè¡Œå’Œæ³¨é‡Š
                    yield line_num, line
    except FileNotFoundError:
        print(f"æ–‡ä»¶ {filename} ä¸å­˜åœ¨")

# åˆ›å»ºç¤ºä¾‹æ—¥å¿—æ–‡ä»¶
with open('sample.log', 'w', encoding='utf-8') as f:
    f.write("""# è¿™æ˜¯æ³¨é‡Š
INFO: åº”ç”¨å¯åŠ¨
WARNING: å†…å­˜ä½¿ç”¨ç‡è¾ƒé«˜
ERROR: æ•°æ®åº“è¿æ¥å¤±è´¥
# å¦ä¸€ä¸ªæ³¨é‡Š
INFO: é‡æ–°è¿æ¥æˆåŠŸ
""")

# ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†æ–‡ä»¶
print("å¤„ç†æ—¥å¿—æ–‡ä»¶ï¼š")
for line_num, content in process_log_file('sample.log'):
    print(f"ç¬¬{line_num}è¡Œ: {content}")
```

### 10.3 è£…é¥°å™¨å®æˆ˜

```python
from functools import wraps
import time

def cache(func):
    """ç®€å•çš„ç¼“å­˜è£…é¥°å™¨"""
    cache_dict = {}
    
    @wraps(func)
    def wrapper(*args, **kwargs):
        # åˆ›å»ºç¼“å­˜é”®
        key = str(args) + str(sorted(kwargs.items()))
        
        if key in cache_dict:
            print(f"ç¼“å­˜å‘½ä¸­: {func.__name__}")
            return cache_dict[key]
        
        print(f"è®¡ç®—ä¸­: {func.__name__}")
        result = func(*args, **kwargs)
        cache_dict[key] = result
        return result
    
    return wrapper

def timing(func):
    """è®¡æ—¶è£…é¥°å™¨"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        end = time.time()
        print(f"{func.__name__} æ‰§è¡Œæ—¶é—´: {end - start:.4f}ç§’")
        return result
    return wrapper

@cache
@timing
def fibonacci(n: int) -> int:
    """è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰"""
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

# æµ‹è¯•ç¼“å­˜æ•ˆæœ
print("ç¬¬ä¸€æ¬¡è®¡ç®—:")
result1 = fibonacci(10)
print(f"fibonacci(10) = {result1}")

print("\nç¬¬äºŒæ¬¡è®¡ç®—ï¼ˆåº”è¯¥ä½¿ç”¨ç¼“å­˜ï¼‰:")
result2 = fibonacci(10)
print(f"fibonacci(10) = {result2}")
```

---

## åä¸€ã€æ€»ç»“

### 11.1 é«˜çº§ç‰¹æ€§å¯¹æ¯”è¡¨

| ç‰¹æ€§ | ä¼˜ç‚¹ | ä½¿ç”¨åœºæ™¯ | æ³¨æ„äº‹é¡¹ |
|------|------|----------|----------|
| åˆ—è¡¨æ¨å¯¼å¼ | ç®€æ´ã€é«˜æ•ˆ | æ•°æ®è½¬æ¢ã€è¿‡æ»¤ | ä¸è¦è¿‡åº¦å¤æ‚åŒ– |
| ç”Ÿæˆå™¨ | èŠ‚çœå†…å­˜ | å¤§æ•°æ®å¤„ç†ã€æµå¼å¤„ç† | åªèƒ½éå†ä¸€æ¬¡ |
| è£…é¥°å™¨ | ä»£ç å¤ç”¨ã€åŠŸèƒ½å¢å¼º | æ—¥å¿—ã€ç¼“å­˜ã€æƒé™éªŒè¯ | ç†è§£æ‰§è¡Œé¡ºåº |
| é«˜é˜¶å‡½æ•° | å‡½æ•°å¼ç¼–ç¨‹ | æ•°æ®å¤„ç†ã€å‡½æ•°ç»„åˆ | å¯è¯»æ€§è€ƒè™‘ |
| ç±»å‹æ³¨è§£ | ä»£ç å¯è¯»æ€§ã€IDEæ”¯æŒ | å¤§å‹é¡¹ç›®ã€å›¢é˜Ÿåä½œ | è¿è¡Œæ—¶ä¸å¼ºåˆ¶ |

### 11.2 æœ€ä½³å®è·µå»ºè®®

1. **é€‚åº¦ä½¿ç”¨**ï¼šä¸è¦ä¸ºäº†ç‚«æŠ€è€Œä½¿ç”¨é«˜çº§ç‰¹æ€§
2. **å¯è¯»æ€§ä¼˜å…ˆ**ï¼šä»£ç è¦è®©å…¶ä»–äººèƒ½å¤Ÿç†è§£
3. **æ€§èƒ½è€ƒè™‘**ï¼šåœ¨éœ€è¦æ—¶æ‰ä¼˜åŒ–æ€§èƒ½
4. **å›¢é˜Ÿè§„èŒƒ**ï¼šä¸å›¢é˜Ÿä¿æŒä¸€è‡´çš„ç¼–ç é£æ ¼

### 11.3 ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘

æŒæ¡äº†è¿™äº›é«˜çº§ç‰¹æ€§åï¼Œä½ å¯ä»¥ç»§ç»­å­¦ä¹ ï¼š
- **æ¨¡å—å’ŒåŒ…**ï¼šä»£ç ç»„ç»‡å’Œç®¡ç†
- **é¢å‘å¯¹è±¡ç¼–ç¨‹**ï¼šç±»çš„é«˜çº§ç‰¹æ€§
- **å¼‚å¸¸å¤„ç†**ï¼šé”™è¯¯å¤„ç†å’Œè°ƒè¯•
- **æ–‡ä»¶å’ŒIOæ“ä½œ**ï¼šæ•°æ®æŒä¹…åŒ–
- **ç½‘ç»œç¼–ç¨‹**ï¼šWebå¼€å‘åŸºç¡€

æ­å–œä½ ï¼æŒæ¡äº†è¿™äº›é«˜çº§ç‰¹æ€§ï¼Œä½ çš„Pythonç¼–ç¨‹èƒ½åŠ›å·²ç»ä¸Šäº†ä¸€ä¸ªå°é˜¶ï¼ğŸš€

---

**ç»ƒä¹ å»ºè®®**ï¼š
1. é‡å†™ä¹‹å‰çš„ä»£ç ï¼Œä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ç®€åŒ–
2. å°è¯•åˆ›å»ºè‡ªå·±çš„ç”Ÿæˆå™¨å‡½æ•°
3. ç¼–å†™å®ç”¨çš„è£…é¥°å™¨
4. ç»ƒä¹ ä½¿ç”¨é«˜é˜¶å‡½æ•°å¤„ç†æ•°æ®
5. ä¸ºè‡ªå·±çš„å‡½æ•°æ·»åŠ ç±»å‹æ³¨è§£
